import{r as o,bw as Ce,aA as $e,O as I,bx as je,cC as Se,ax as he,aH as ie,cD as ve,j as n,f as ce,d as Ne,aM as De,cE as Ee,u as Re,h as be,S as Be,R as Pe,cF as Oe,cm as Te,z as pe}from"./index-ChUmNm8R.js";import{d as z}from"./dayjs.min-BA1p4t9P.js";import{B as Ie}from"./BookingDetailsModal-HSRnt7fr.js";import{S as _e}from"./SecoundaryButton-goiA8OO9.js";import{k as He,l as ze,m as Le,a as We,n as Ae}from"./index-8lg37tdn.js";import{F as ue}from"./DownOutlined-z3I3nDv9.js";import{G as Fe,B as fe}from"./index-De2sQM66.js";import{S as te}from"./index-D9Bv3C6k.js";import{u as Xe}from"./CheckOutlined-DPOLd74P.js";import{B as xe}from"./button-D0Rmo6Y5.js";import{c as Ve}from"./createLucideIcon-D1dtiQRH.js";import{C as qe}from"./chevron-right-Dff7e4Sy.js";import"./prescriptionService-el3J9jP_.js";import"./utils-CjlqjNT0.js";import"./clsx-B-dksMZM.js";import"./doctorUsersService--bmGzTWH.js";import"./useHasPermission-B8Y_MdsF.js";import"./useUploadToS3-CcI0wiNy.js";import"./ProfileService-D5sxIXUd.js";import"./index-BZKwATQs.js";import"./Upload-CTnVjxYJ.js";import"./collapse-BbEVqHco.js";import"./fade-8FE2cY_X.js";import"./useForceUpdate-jQjUdsvY.js";import"./DeleteOutlined-LwZaW3bw.js";import"./EyeOutlined-BGetrG_9.js";import"./LeftOutlined-lLzXux5-.js";import"./UploadOutlined-BeGctQLo.js";import"./index-CSCB4ib3.js";import"./row-B9qA-Efv.js";import"./index-Ctpo8ZnH.js";import"./Input-ClusE8wk.js";import"./useIcons-CDf6lDIp.js";import"./index-1XTAFx_Q.js";import"./CustomTab-sR3kUFYQ.js";import"./index-DmdwV89h.js";import"./Skeleton-D7MyXb_N.js";import"./index-BsLI0Qln.js";import"./index-B3SopV5_.js";import"./styleChecker-DD0Z1krI.js";import"./index-D6J9e9i1.js";import"./TextArea-C37Yo_Hy.js";import"./index-Ce5gUteX.js";import"./useClosable-B1XNXU5S.js";import"./extendsObject-78o_rR5W.js";import"./index-DC3reArS.js";import"./Table-BhIN-nUr.js";import"./addEventListener-D7w6vIGx.js";import"./useBubbleLock-BnnxIxI9.js";import"./dropdown-C4zMWtkZ.js";import"./Pagination-BbDnNTXA.js";import"./Table-CT4iqjp7.js";import"./CustomModal-Ds0Ku9jR.js";import"./useForm-CIMDi_Qk.js";const Ge=10,Ke=20;function Qe(e){const{fullscreen:t,validRange:s,generateConfig:l,locale:g,prefixCls:f,value:r,onChange:v,divRef:Y}=e,N=l.getYear(r||l.getNow());let D=N-Ge,j=D+Ke;s&&(D=l.getYear(s[0]),j=l.getYear(s[1])+1);const S=g&&g.year==="年"?"年":"",E=[];for(let y=D;y<j;y++)E.push({label:`${y}${S}`,value:y});return o.createElement(te,{size:t?void 0:"small",options:E,value:N,className:`${f}-year-select`,onChange:y=>{let c=l.setYear(r,y);if(s){const[$,R]=s,a=l.getYear(c),w=l.getMonth(c);a===l.getYear(R)&&w>l.getMonth(R)&&(c=l.setMonth(c,l.getMonth(R))),a===l.getYear($)&&w<l.getMonth($)&&(c=l.setMonth(c,l.getMonth($)))}v(c)},getPopupContainer:()=>Y.current})}function Ue(e){const{prefixCls:t,fullscreen:s,validRange:l,value:g,generateConfig:f,locale:r,onChange:v,divRef:Y}=e,N=f.getMonth(g||f.getNow());let D=0,j=11;if(l){const[y,c]=l,$=f.getYear(g);f.getYear(c)===$&&(j=f.getMonth(c)),f.getYear(y)===$&&(D=f.getMonth(y))}const S=r.shortMonths||f.locale.getShortMonths(r.locale),E=[];for(let y=D;y<=j;y+=1)E.push({label:S[y],value:y});return o.createElement(te,{size:s?void 0:"small",className:`${t}-month-select`,value:N,options:E,onChange:y=>{v(f.setMonth(g,y))},getPopupContainer:()=>Y.current})}function Je(e){const{prefixCls:t,locale:s,mode:l,fullscreen:g,onModeChange:f}=e;return o.createElement(Fe,{onChange:({target:{value:r}})=>{f(r)},value:l,size:g?void 0:"small",className:`${t}-mode-switch`},o.createElement(fe,{value:"month"},s.month),o.createElement(fe,{value:"year"},s.year))}function Ze(e){const{prefixCls:t,fullscreen:s,mode:l,onChange:g,onModeChange:f}=e,r=o.useRef(null),v=o.useContext(ue),Y=o.useMemo(()=>Object.assign(Object.assign({},v),{isFormItemInput:!1}),[v]),N=Object.assign(Object.assign({},e),{fullscreen:s,divRef:r});return o.createElement("div",{className:`${t}-header`,ref:r},o.createElement(ue.Provider,{value:Y},o.createElement(Qe,Object.assign({},N,{onChange:D=>{g(D,"year")}})),l==="month"&&o.createElement(Ue,Object.assign({},N,{onChange:D=>{g(D,"month")}}))),o.createElement(Je,Object.assign({},N,{onModeChange:f})))}const ke=e=>{const{calendarCls:t,componentCls:s,fullBg:l,fullPanelBg:g,itemActiveBg:f}=e;return{[t]:Object.assign(Object.assign(Object.assign({},ze(e)),je(e)),{background:l,"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",justifyContent:"flex-end",padding:`${I(e.paddingSM)} 0`,[`${t}-year-select`]:{minWidth:e.yearControlWidth},[`${t}-month-select`]:{minWidth:e.monthControlWidth,marginInlineStart:e.marginXS},[`${t}-mode-switch`]:{marginInlineStart:e.marginXS}}}),[`${t} ${s}-panel`]:{background:g,border:0,borderTop:`${I(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,[`${s}-month-panel, ${s}-date-panel`]:{width:"auto"},[`${s}-body`]:{padding:`${I(e.paddingXS)} 0`},[`${s}-content`]:{width:"100%"}},[`${t}-mini`]:{borderRadius:e.borderRadiusLG,[`${t}-header`]:{paddingInlineEnd:e.paddingXS,paddingInlineStart:e.paddingXS},[`${s}-panel`]:{borderRadius:`0 0 ${I(e.borderRadiusLG)} ${I(e.borderRadiusLG)}`},[`${s}-content`]:{height:e.miniContentHeight,th:{height:"auto",padding:0,lineHeight:I(e.weekHeight)}},[`${s}-cell::before`]:{pointerEvents:"none"}},[`${t}${t}-full`]:{[`${s}-panel`]:{display:"block",width:"100%",textAlign:"end",background:l,border:0,[`${s}-body`]:{"th, td":{padding:0},th:{height:"auto",paddingInlineEnd:e.paddingSM,paddingBottom:e.paddingXXS,lineHeight:I(e.weekHeight)}}},[`${s}-cell-week ${s}-cell-inner`]:{display:"block",borderRadius:0,borderTop:`${I(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,width:"100%",height:e.calc(e.dateValueHeight).add(e.dateContentHeight).add(e.calc(e.paddingXS).div(2)).add(e.lineWidthBold).equal()},[`${s}-cell`]:{"&::before":{display:"none"},"&:hover":{[`${t}-date`]:{background:e.controlItemBgHover}},[`${t}-date-today::before`]:{display:"none"},[`&-in-view${s}-cell-selected`]:{[`${t}-date, ${t}-date-today`]:{background:f}},"&-selected, &-selected:hover":{[`${t}-date, ${t}-date-today`]:{[`${t}-date-value`]:{color:e.colorPrimary}}}},[`${t}-date`]:{display:"block",width:"auto",height:"auto",margin:`0 ${I(e.calc(e.marginXS).div(2).equal())}`,padding:`${I(e.calc(e.paddingXS).div(2).equal())} ${I(e.paddingXS)} 0`,border:0,borderTop:`${I(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,transition:`background ${e.motionDurationSlow}`,"&-value":{lineHeight:I(e.dateValueHeight),transition:`color ${e.motionDurationSlow}`},"&-content":{position:"static",width:"auto",height:e.dateContentHeight,overflowY:"auto",color:e.colorText,lineHeight:e.lineHeight,textAlign:"start"},"&-today":{borderColor:e.colorPrimary,[`${t}-date-value`]:{color:e.colorText}}}},[`@media only screen and (max-width: ${I(e.screenXS)}) `]:{[t]:{[`${t}-header`]:{display:"block",[`${t}-year-select`]:{width:"50%"},[`${t}-month-select`]:{width:`calc(50% - ${I(e.paddingXS)})`},[`${t}-mode-switch`]:{width:"100%",marginTop:e.marginXS,marginInlineStart:0,"> label":{width:"50%",textAlign:"center"}}}}}}},et=e=>Object.assign({fullBg:e.colorBgContainer,fullPanelBg:e.colorBgContainer,itemActiveBg:e.controlItemBgActive,yearControlWidth:80,monthControlWidth:70,miniContentHeight:256},Le(e)),tt=Ce("Calendar",e=>{const t=`${e.componentCls}-calendar`,s=$e(e,He(e),{calendarCls:t,pickerCellInnerCls:`${e.componentCls}-cell-inner`,dateValueHeight:e.controlHeightSM,weekHeight:e.calc(e.controlHeightSM).mul(.75).equal(),dateContentHeight:e.calc(e.calc(e.fontHeightSM).add(e.marginXS)).mul(3).add(e.calc(e.lineWidth).mul(2)).equal()});return ke(s)},et),Ye=(e,t,s)=>{const{getYear:l}=s;return e&&t&&l(e)===l(t)},me=(e,t,s)=>{const{getMonth:l}=s;return Ye(e,t,s)&&l(e)===l(t)},ge=(e,t,s)=>{const{getDate:l}=s;return me(e,t,s)&&l(e)===l(t)},ye=e=>s=>{const{prefixCls:l,className:g,rootClassName:f,style:r,dateFullCellRender:v,dateCellRender:Y,monthFullCellRender:N,monthCellRender:D,cellRender:j,fullCellRender:S,headerRender:E,value:y,defaultValue:c,disabledDate:$,mode:R,validRange:a,fullscreen:w=!0,showWeek:b,onChange:T,onPanelChange:_,onSelect:B}=s,{getPrefixCls:W,direction:K,className:Q,style:k}=Se("calendar"),ee=W("picker",l),P=`${ee}-calendar`,[re,le,oe]=tt(ee,P),d=e.getNow(),[u,O]=he(()=>y||e.getNow(),{defaultValue:c,value:y}),[L,Z]=he("month",{value:R}),A=o.useMemo(()=>L==="year"?"month":"date",[L]),U=o.useCallback(i=>(a?e.isAfter(a[0],i)||e.isAfter(i,a[1]):!1)||!!($!=null&&$(i)),[$,a]),F=(i,C)=>{_==null||_(i,C)},M=i=>{O(i),ge(i,u,e)||((A==="date"&&!me(i,u,e)||A==="month"&&!Ye(i,u,e))&&F(i,L),T==null||T(i))},X=i=>{Z(i),F(u,i)},V=(i,C)=>{M(i),B==null||B(i,{source:C})},J=o.useCallback((i,C)=>S?S(i,C):v?v(i):o.createElement("div",{className:ie(`${ee}-cell-inner`,`${P}-date`,{[`${P}-date-today`]:ge(d,i,e)})},o.createElement("div",{className:`${P}-date-value`},String(e.getDate(i)).padStart(2,"0")),o.createElement("div",{className:`${P}-date-content`},j?j(i,C):Y==null?void 0:Y(i))),[v,Y,j,S]),m=o.useCallback((i,C)=>{if(S)return S(i,C);if(N)return N(i);const H=C.locale.shortMonths||e.locale.getShortMonths(C.locale.locale);return o.createElement("div",{className:ie(`${ee}-cell-inner`,`${P}-date`,{[`${P}-date-today`]:me(d,i,e)})},o.createElement("div",{className:`${P}-date-value`},H[e.getMonth(i)]),o.createElement("div",{className:`${P}-date-content`},j?j(i,C):D==null?void 0:D(i)))},[N,D,j,S]),[ae]=Xe("Calendar",ve),q=Object.assign(Object.assign({},ae),s.locale),se=(i,C)=>{if(C.type==="date")return J(i,C);if(C.type==="month")return m(i,Object.assign(Object.assign({},C),{locale:q==null?void 0:q.lang}))};return re(o.createElement("div",{className:ie(P,{[`${P}-full`]:w,[`${P}-mini`]:!w,[`${P}-rtl`]:K==="rtl"},Q,g,f,le,oe),style:Object.assign(Object.assign({},k),r)},E?E({value:u,type:L,onChange:i=>{V(i,"customize")},onTypeChange:X}):o.createElement(Ze,{prefixCls:P,value:u,generateConfig:e,mode:L,fullscreen:w,locale:q==null?void 0:q.lang,validRange:a,onChange:V,onModeChange:X}),o.createElement(We,{value:u,prefixCls:ee,locale:q==null?void 0:q.lang,generateConfig:e,cellRender:se,onSelect:i=>{V(i,A)},mode:A,picker:A,disabledDate:U,hideHeader:!0,showWeek:b})))},we=ye(Ae);we.generateCalendar=ye;/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],at=Ve("ChevronLeft",nt),st=e=>{const[t,s]=o.useState(!1);return o.useEffect(()=>{const l=window.matchMedia(e);s(l.matches);const g=f=>{s(f.matches)};return l.addEventListener("change",g),()=>l.removeEventListener("change",g)},[e]),t},Me=e=>{const{bookings:t,current:s,handleShowMore:l,mode:g,handleBookingDetailsModalOpen:f,leaves:r}=e,[v,Y]=o.useState([]),[N,D]=o.useState(0),j=o.useRef(null),[S,E]=o.useState(0),y=st("(max-width: 768px)"),c=o.useMemo(()=>z(),[]),$=o.useMemo(()=>s.format("YYYY-MM-DD")===c.format("YYYY-MM-DD"),[s,c]),R=(r==null?void 0:r.length)>0&&g==="month"?"bg-[#F3E1EA]":(t==null?void 0:t.length)>0?"bg-[#e9f2fd]":"";return o.useEffect(()=>{if(!(t!=null&&t.length)||!j.current)return;const a=()=>{const w=j.current;if(!w)return;const b=w.clientHeight,_=Math.floor(b/30),B=Math.max(1,_);E(B),Y(t.slice(0,B)),D(Math.max(0,t.length-B))};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[t]),y&&g==="month"?n.jsxs("div",{className:`mobile-date-cell ${(r==null?void 0:r.length)>0?"has-leaves":""} ${(t==null?void 0:t.length)>0?"has-bookings":""}`,children:[n.jsx("div",{className:`date-indicator ${$?"current-date":""}`,children:s.date()}),n.jsxs("div",{className:"badge-container",children:[t==null?void 0:t.slice(0,2).map((a,w)=>{var b,T,_,B,W;return n.jsx("div",{onClick:K=>{K.stopPropagation(),f(a)},className:`badge-pill ${(a==null?void 0:a.status)==="completed"?"bg-green-200":"bg-[#FFDA85]"}`,children:(b=a==null?void 0:a.user)!=null&&b.first_name?`${(_=(T=a==null?void 0:a.user)==null?void 0:T.first_name)==null?void 0:_.substring(0,6)}${((W=(B=a==null?void 0:a.user)==null?void 0:B.first_name)==null?void 0:W.length)>6?"...":""}`:(a==null?void 0:a.type)||"Stand"},(a==null?void 0:a.id)||w)}),(t==null?void 0:t.length)>2&&n.jsxs("div",{onClick:a=>{a.stopPropagation(),l({data:{bookings:t,leaves:r},type:(r==null?void 0:r.length)>0?"leave":"booking",title:s.format("DD MMMM YYYY"),position:{top:`${a.currentTarget.getBoundingClientRect().top}`,left:`${a.currentTarget.getBoundingClientRect().right}`}})},className:"text-[10px] text-black font-medium underline cursor-pointer text-center",children:["+",(t==null?void 0:t.length)-2," more"]})]})]}):n.jsxs("div",{className:`h-[140px] max-h-[140px] overflow-hidden flex flex-col cursor-default rounded-md p-1 ${R}`,children:[n.jsx("div",{children:n.jsx("div",{className:"text-[1rem] text-black",children:g==="year"?s.format("MMMM"):s.date()})}),(r==null?void 0:r.length)>0&&g==="month"?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex justify-around items-center h-full flex-col",children:[n.jsx("img",{className:"w-[36px] h-[36px]",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/119535-1745576627643.png",alt:"vacation_pic"}),n.jsx("p",{className:"text-black font-medium",children:"On Vacation"})]})}):n.jsxs(n.Fragment,{children:[(t==null?void 0:t.length)>0?n.jsxs("div",{ref:j,className:"w-full grow-1 px-2 py-1 overflow-hidden",children:[v.map(a=>{var w,b;return n.jsx("div",{onClick:T=>{T.stopPropagation(),f(a)},className:`${(a==null?void 0:a.status)=="completed"?"bg-green-200":"bg-[#92bdf6]"} max-w-[100%] truncate text-[12px] font-medium capitalize px-2 rounded-2xl my-[5px] inline-block cursor-pointer`,children:`${((w=a==null?void 0:a.user)==null?void 0:w.first_name)??""} ${((b=a==null?void 0:a.user)==null?void 0:b.last_name)??""}`},a==null?void 0:a.id)}),N>0&&n.jsxs("div",{onClick:a=>{a.stopPropagation(),l({data:{bookings:t},type:"booking",title:s.format("DD MMMM YYYY"),position:{top:`${a.currentTarget.getBoundingClientRect().top}`,left:`${a.currentTarget.getBoundingClientRect().right}`}})},className:"text-[12px] text-black font-medium mt-1 underline cursor-pointer",children:["+",N," more booking",N!==1?"s":""]})]}):n.jsx("div",{children:"No bookings"}),(r==null?void 0:r.length)>0&&g==="year"&&n.jsxs("div",{ref:j,className:"w-full grow-1 px-2 py-1 overflow-hidden",children:[r==null?void 0:r.slice(0,S).map(a=>n.jsx("div",{className:"bg-[#E7C2D4] max-w-[100%] truncate text-[12px] font-medium capitalize px-2 rounded-2xl my-[5px] inline-block cursor-pointer",children:`${ce(a==null?void 0:a.type)} leave ${a!=null&&a.reason?"("+(a==null?void 0:a.reason)+")":""}`},a==null?void 0:a.id)),Math.max(0,(r==null?void 0:r.length)-S)>0&&n.jsxs("div",{onClick:a=>{a.stopPropagation(),l({data:{leaves:r},type:"leave",title:s.format("DD MMMM YYYY"),position:{top:`${a.currentTarget.getBoundingClientRect().top}`,left:`${a.currentTarget.getBoundingClientRect().right}`}})},className:"text-[12px] text-black font-medium mt-1 underline cursor-pointer",children:["+",Math.max(0,(r==null?void 0:r.length)-S)," more leaves",N!==1?"s":""]})]})]})]})},rt=Ne.div`
    .calendar-container .ant-picker-cell {
        border: 2px solid #e9e9e9;
        padding: 2px !important;
        text-align: initial;
    }

    .calender-mode-select{
        .ant-select-selector{
            border-radius:25px;
            border:1px solid black;
            padding:7px 20px;
        }
    }

    .header-style{
        box-shadow: 2px 2px 9px 0px #00000021;
    }
    
    /* Mobile view styles */
    @media (max-width: 768px) {
        .ant-picker-calendar {
            .ant-picker-panel {
                width: 100%;
            }
            
            .ant-picker-cell {
                height: auto;
                min-height: 60px;
                
                .ant-picker-cell-inner {
                    height: 100%;
                    min-height: 60px;
                    display: flex;
                    flex-direction: column;
                }
            }
            
            .ant-picker-content th {
                font-weight: bold;
                text-transform: uppercase;
            }
            
            .mobile-date-cell {
                height: 100%;
                min-height: 60px;
                width: 100%;
                display: flex;
                flex-direction: column;
                padding: 2px;
                border-radius: 4px;
                position: relative;
                
                .date-indicator {
                    font-weight: 500;
                    padding: 2px 4px;
                    text-align: center;
                    width: 24px;
                    height: 24px;
                    margin-bottom: 2px;
                    border-radius: 50%;
                }
                
                .current-date {
                    background-color: #1677ff;
                    color: white;
                    font-weight: bold;
                }
                
                .badge-container {
                    display: flex;
                    flex-direction: column;
                    gap: 4px;
                    padding-top: 2px;
                }
                
                .badge-pill {
                    padding: 2px 6px;
                    border-radius: 12px;
                    font-size: 10px;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    text-align: center;
                }
                
                &.has-bookings {
                    background-color: #f0f7ff;
                }
                
                &.has-leaves {
                    background-color: #F3E1EA;
                }
            }
        }
    }
`,lt="raphaplus-tooltip-container",ot=({position:e,children:t,parentClassName:s,title:l,handleClose:g,headerClassName:f})=>{const r=o.useRef(null),v=o.useRef(null),[Y,N]=o.useState(e),[D,j]=o.useState("90%");o.useEffect(()=>{if(e!=null&&e.top||e!=null&&e.bottom||e!=null&&e.left||e!=null&&e.right){const E=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=E}}},[e]),o.useEffect(()=>{const E=()=>{if(!v.current)return;const $=v.current.getBoundingClientRect(),R=window.innerWidth,a=window.innerHeight,w={...e};let b="90%";if((e==null?void 0:e.top)!==void 0||(e==null?void 0:e.left)!==void 0){const _=(e==null?void 0:e.left)||0,B=R-_-10;if($.left<10){w.left=10;const Q=R-20;b=`${Math.min(Q,R*.9)}px`}else if($.right>R-10){const Q=Math.max(10,R-$.width-10);w.left=Q;const k=R-Q-10;b=`${Math.min(k,R*.9)}px`}else b=`${Math.min(B,R*.9)}px`;const W=10,K=$.height/2;$.top<W&&(w.top=W+K),$.bottom>a-W&&(w.top=a-K-W)}N(w),j(b)},y=setTimeout(E,50);return window.addEventListener("resize",E),()=>{clearTimeout(y),window.removeEventListener("resize",E),r.current&&r.current.remove()}},[e]);const S=!(Y!=null&&Y.top)&&!(Y!=null&&Y.left);return n.jsx("div",{ref:r,className:`${lt} h-[100vh] w-[100vw] bg-black/30 fixed top-0 left-0 right-0 bottom-0 z-10000 overflow-hidden`,children:n.jsx("div",{ref:v,className:`absolute ${s||""} overflow-hidden max-h-[90%] bg-white rounded-3xl shadow-2xl !p-[3px]`,style:{top:S?"50%":`${Y==null?void 0:Y.top}px`,left:S?"50%":`${Y==null?void 0:Y.left}px`,transform:S?"translate(-50%, -50%)":"translate(0, -50%)",maxWidth:S?"90%":D},children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:`flex justify-between items-center h-[30px] bg-[#e9f2fd] rounded-t-3xl p-1 flex-shrink-0 ${f||""}`,children:[n.jsx("div",{className:"text-lg font-bold truncate flex-1 mr-2",children:l}),n.jsx("span",{onClick:E=>{E.stopPropagation(),g==null||g()},className:"cursor-pointer flex-shrink-0",children:n.jsx(Ee,{size:23})})]}),n.jsx("div",{className:"flex-grow max-h-[calc(90vh-30px)] overflow-y-auto min-h-0",children:t})]})})})},dt=({position:e,children:t,isOpen:s,parentClassName:l,title:g,handleClose:f,headerClassName:r})=>n.jsx(n.Fragment,{children:s&&De.createPortal(n.jsx(ot,{parentClassName:l,handleClose:f,title:g,position:e,children:t,headerClassName:r}),document.body)}),cn=()=>{const e=Re(),{linkableId:t}=be(),[s,l]=o.useState(()=>z(new Date)),[g,f]=o.useState(z(new Date)),[r,v]=o.useState("month"),[Y,N]=o.useState(null),[D,j]=o.useState(!1),S=()=>{j(!1)},[E,y]=o.useState(!1),[c,$]=o.useState(null),R=d=>{y(!0),$(d)},a=()=>{y(!1),$(null)},[w,b]=o.useState(!1),[T,_]=o.useState(new Map),[B,W]=o.useState(new Map);console.log("selectedValue",T);const K=async(d,u)=>{var O,L,Z,A,U,F,M,X,V,J,m,ae,q;try{b(!0);const se=e(Oe({start_date:d,end_date:u,status:"approved"})),i=e(Te({filters:{from:"hr",status:"booking_scheduled,consultation_rescheduled,open,completed",count:1e4,dateRange:{dateType:"scheduled",from:d,to:u}}})),[C,H]=await Promise.allSettled([se,i]);if((O=H==null?void 0:H.value)!=null&&O.error){pe.error(((Z=(L=H==null?void 0:H.value)==null?void 0:L.error)==null?void 0:Z.message)||"Unknown Error Occured");return}if(r==="month"){const G=new Map;(F=(U=(A=H==null?void 0:H.value)==null?void 0:A.payload)==null?void 0:U.data)==null||F.bookings.forEach(x=>{if(x!=null&&x.collection_1_date){const h=z(x==null?void 0:x.collection_1_date).format("DD/MM/YYYY");G.has(h)?G.set(h,[...G.get(h),x]):G.set(h,[x])}}),_(G);const de=(X=(M=C==null?void 0:C.value)==null?void 0:M.payload)==null?void 0:X.reduce((x,h)=>{var ne;return(ne=h==null?void 0:h.leave_time)==null||ne.forEach(p=>{x.has(z(p==null?void 0:p.date,"YYYY-MM-DD").format("DD/MM/YYYY"))?x.set(z(p==null?void 0:p.date,"YYYY-MM-DD").format("DD/MM/YYYY"),[...x.get(z(p==null?void 0:p.date,"YYYY-MM-DD").format("DD/MM/YYYY")),{type:p==null?void 0:p.type,reason:h==null?void 0:h.reason,leaveType:h==null?void 0:h.type}]):x.set(z(p==null?void 0:p.date,"YYYY-MM-DD").format("DD/MM/YYYY"),[{type:p==null?void 0:p.type,reason:h==null?void 0:h.reason,leaveType:h==null?void 0:h.type}])}),x},new Map);W(de)}else if(r==="year"){const G=new Map;(m=(J=(V=H==null?void 0:H.value)==null?void 0:V.payload)==null?void 0:J.data)==null||m.bookings.forEach(x=>{if(x!=null&&x.collection_1_date){console.log("collection_1_date",x==null?void 0:x.collection_1_date);const h=z(x==null?void 0:x.collection_1_date).format("MM/YYYY");console.log("format",h),G.has(h)?G.set(h,[...G.get(h),x]):G.set(h,[x])}}),_(G),_(G);const de=(q=(ae=C==null?void 0:C.value)==null?void 0:ae.payload)==null?void 0:q.reduce((x,h)=>{var ne;return(ne=h==null?void 0:h.leave_time)==null||ne.forEach(p=>{x.has(z(p==null?void 0:p.date,"YYYY-MM-DD").format("MM/YYYY"))?x.set(z(p==null?void 0:p.date,"YYYY-MM-DD").format("MM/YYYY"),[...x.get(z(p==null?void 0:p.date,"YYYY-MM-DD").format("MM/YYYY")),{type:p==null?void 0:p.type,reason:h==null?void 0:h.reason,leaveType:h==null?void 0:h.type}]):x.set(z(p==null?void 0:p.date,"YYYY-MM-DD").format("MM/YYYY"),[p])}),x},new Map);W(de)}}catch{pe.error("unknown error occured")}finally{b(!1)}};console.log("bookings",T),console.log("leaveRequests",B),o.useEffect(()=>{if(t){if(r==="month"){const d=s.startOf("month").format("YYYY-MM-DD"),u=s.endOf("month").format("YYYY-MM-DD");K(d,u)}else if(r==="year"){const d=s.startOf("year").format("YYYY-MM-DD"),u=s.endOf("year").format("YYYY-MM-DD");K(d,u)}}},[e,t,s.toISOString(),r]);const Q=(d,u)=>{r==="month"?(s.format("MM/YYYY")!==d.format("MM/YYYY")&&l(d),f(d)):r==="year"&&(l(d),f(d),v("month")),console.log("info",u)},k=d=>{N(d),j(!0)},ee=d=>{const u=T.get(d.format("MM/YYYY")),O=B.get(d.format("MM/YYYY"));return n.jsx(Me,{handleShowMore:R,bookings:u,current:d,loading:w,leaves:O,mode:r,handleBookingDetailsModalOpen:k})},P=d=>{const u=T.get(d.format("DD/MM/YYYY")),O=B.get(d.format("DD/MM/YYYY"));return n.jsx(Me,{handleShowMore:R,bookings:u,current:d,leaves:O,loading:w,mode:r,handleBookingDetailsModalOpen:k})},re=({value:d,type:u,onChange:O,onTypeChange:L})=>{const U=[];let F=d.clone();const M=d.localeData(),X=[];for(let m=0;m<12;m++)F=F.month(m),X.push(M.monthsShort(F));for(let m=0;m<12;m++)U.push(n.jsx(te.Option,{value:m,className:"month-item",children:X[m]},m));const V=d.year();d.month();const J=[];for(let m=V-10;m<V+10;m+=1)J.push(n.jsx(te.Option,{value:m,className:"year-item",children:m},m));return n.jsx("div",{className:"!px-[22px] rounded-t-[20px] !py-[14px] header-style !mb-[22px]",children:n.jsxs("div",{className:"flex flex-col min-[675px]:flex-row justify-between items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-[46px] w-full",children:[n.jsx(_e,{className:"!border-[1px]",onClick:()=>{const m=z();l(m),f(m),r==="year"&&v("month")},children:"Today"}),n.jsxs("div",{className:"flex gap-6 items-center",children:[n.jsx(xe,{className:"!border-none shadow-none",icon:n.jsx(at,{}),onClick:()=>{const m=d.clone();O(u==="month"?m.month(m.month()-1):m.year(m.year()-1))}}),n.jsx("p",{className:"font-medium m-0 text-[Inter] text-[20px] mb-1",children:d.format(u==="month"?"MMMM YYYY":"YYYY")}),n.jsx(xe,{className:"!border-none shadow-none ",icon:n.jsx(qe,{}),onClick:()=>{const m=d.clone();O(u==="month"?m.month(m.month()+1):m.year(m.year()+1))}})]})]}),n.jsx("div",{className:"max-[675px]:w-full",children:n.jsxs(te,{value:u,onChange:m=>{L(m),v(m)},className:"calender-mode-select",children:[n.jsx(te.Option,{value:"month",children:"Month"}),n.jsx(te.Option,{value:"year",children:"Year"})]})})]})})},le=(d,u)=>u.type==="date"?P(d):u.type==="month"?ee(d):u.originNode,oe=(d,u)=>{v(u)};return console.log("toolTipData",c),n.jsx(rt,{children:n.jsxs("div",{className:"p-2 sm:px-4 sm:py-3",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("h4",{className:"font-bold",children:"My Calendar"})}),n.jsx("div",{className:"flex gap-3 max-[1100px]:flex-col",children:n.jsx("div",{className:"flex-grow-0",children:n.jsxs("div",{className:"bg-white rounded-lg p-2 calendar-container",children:[n.jsx(dt,{handleClose:a,isOpen:E,title:c==null?void 0:c.title,position:c==null?void 0:c.position,children:n.jsx("div",{className:"p-2",children:(()=>{var d,u,O,L,Z,A,U,F;switch(c==null?void 0:c.type){case"booking":return n.jsxs("div",{children:[n.jsxs("p",{children:["Total ",(u=(d=c==null?void 0:c.data)==null?void 0:d.bookings)==null?void 0:u.length," ","Consultations"]}),n.jsx("div",{className:"flex gap-2 flex-col max-h-[140px] overflow-y-auto",children:(L=(O=c==null?void 0:c.data)==null?void 0:O.bookings)==null?void 0:L.map((M,X)=>{var V,J;return n.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:[n.jsx("div",{className:"bg-[#92bdf6] px-2 rounded-lg text-sm cursor-pointer",onClick:m=>{m.stopPropagation(),a(),k(M)},children:n.jsx("div",{className:"font-semibold capitalize",children:`${((V=M==null?void 0:M.user)==null?void 0:V.first_name)??""} ${((J=M==null?void 0:M.user)==null?void 0:J.last_name)??""}`})}),n.jsx("div",{className:"text-[.8rem] font-semibold",children:(M==null?void 0:M.collection_1_slot)??""})]},(M==null?void 0:M.id)||X)})})]});case"leave":return n.jsx(n.Fragment,{children:n.jsxs("div",{children:[n.jsxs("p",{children:["Total ",(A=(Z=c==null?void 0:c.data)==null?void 0:Z.leaves)==null?void 0:A.length," Leaves"]}),n.jsx("div",{className:"flex gap-2 flex-col max-h-[140px] overflow-y-auto",children:(F=(U=c==null?void 0:c.data)==null?void 0:U.leaves)==null?void 0:F.map((M,X)=>n.jsx("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:n.jsx("div",{className:"bg-[#92bdf6] px-2 rounded-lg text-sm cursor-pointer",children:n.jsx("div",{className:"font-semibold capitalize",children:`${ce(M==null?void 0:M.type)} ${M!=null&&M.reason?"("+ce(M==null?void 0:M.type)+")":""}`})})},X))})]})});default:return null}})()})}),n.jsx(Be,{spinning:w,tip:"Loading",indicator:n.jsx(Pe,{spin:!0}),size:"large",children:n.jsx(we,{mode:r,value:s,onSelect:Q,onPanelChange:oe,fullCellRender:le,headerRender:re})}),D&&n.jsx(Ie,{handleClose:S,modalData:Y,handleSoftClose:S})]})})})]})})};export{cn as default};
