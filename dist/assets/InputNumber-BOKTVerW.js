import{r as s,aN as Ze,aG as H,_ as Ce,n as Ae,q as h,w as et,x as W,aW as tt,bE as nt,bF as z,aH as oe,aK as Ve,t as rt,bG as le,aX as at}from"./index-ChUmNm8R.js";import{B as it,t as ut}from"./Input-ClusE8wk.js";var st={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},lt=function(n,t){return s.createElement(Ze,H({},n,{ref:t,icon:st}))},yt=s.forwardRef(lt);function ce(){return typeof BigInt=="function"}function Fe(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function k(e){var n=e.trim(),t=n.startsWith("-");t&&(n=n.slice(1)),n=n.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),n.startsWith(".")&&(n="0".concat(n));var a=n||"0",i=a.split("."),u=i[0]||"0",g=i[1]||"0";u==="0"&&g==="0"&&(t=!1);var d=t?"-":"";return{negative:t,negativeStr:d,trimStr:a,integerStr:u,decimalStr:g,fullStr:"".concat(d).concat(a)}}function fe(e){var n=String(e);return!Number.isNaN(Number(n))&&n.includes("e")}function M(e){var n=String(e);if(fe(e)){var t=Number(n.slice(n.indexOf("e-")+2)),a=n.match(/\.(\d+)/);return a!=null&&a[1]&&(t+=a[1].length),t}return n.includes(".")&&de(n)?n.length-n.indexOf(".")-1:0}function j(e){var n=String(e);if(fe(e)){if(e>Number.MAX_SAFE_INTEGER)return String(ce()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(ce()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);n=e.toFixed(M(n))}return k(n).fullStr}function de(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var ot=(function(){function e(n){if(Ae(this,e),h(this,"origin",""),h(this,"negative",void 0),h(this,"integer",void 0),h(this,"decimal",void 0),h(this,"decimalLen",void 0),h(this,"empty",void 0),h(this,"nan",void 0),Fe(n)){this.empty=!0;return}if(this.origin=String(n),n==="-"||Number.isNaN(n)){this.nan=!0;return}var t=n;if(fe(t)&&(t=Number(t)),t=typeof t=="string"?t:j(t),de(t)){var a=k(t);this.negative=a.negative;var i=a.trimStr.split(".");this.integer=BigInt(i[0]);var u=i[1]||"0";this.decimal=BigInt(u),this.decimalLen=u.length}else this.nan=!0}return Ce(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var a="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(a)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"cal",value:function(t,a,i){var u=Math.max(this.getDecimalStr().length,t.getDecimalStr().length),g=this.alignDecimal(u),d=t.alignDecimal(u),N=a(g,d).toString(),v=i(u),c=k(N),p=c.negativeStr,b=c.trimStr,S="".concat(p).concat(b.padStart(v+1,"0"));return new e("".concat(S.slice(0,-v),".").concat(S.slice(-v)))}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var a=new e(t);return a.isInvalidate()?this:this.cal(a,function(i,u){return i+u},function(i){return i})}},{key:"multi",value:function(t){var a=new e(t);return this.isInvalidate()||a.isInvalidate()?new e(NaN):this.cal(a,function(i,u){return i*u},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":k("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e})(),ct=(function(){function e(n){if(Ae(this,e),h(this,"origin",""),h(this,"number",void 0),h(this,"empty",void 0),Fe(n)){this.empty=!0;return}this.origin=String(n),this.number=Number(n)}return Ce(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var a=Number(t);if(Number.isNaN(a))return this;var i=this.number+a;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var u=Math.max(M(this.number),M(a));return new e(i.toFixed(u))}},{key:"multi",value:function(t){var a=Number(t);if(this.isInvalidate()||Number.isNaN(a))return new e(NaN);var i=this.number*a;if(i>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var u=Math.max(M(this.number),M(a));return new e(i.toFixed(u))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":j(this.number):this.origin}}]),e})();function E(e){return ce()?new ot(e):new ct(e)}function Y(e,n,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var i=k(e),u=i.negativeStr,g=i.integerStr,d=i.decimalStr,N="".concat(n).concat(d),v="".concat(u).concat(g);if(t>=0){var c=Number(d[t]);if(c>=5&&!a){var p=E(e).add("".concat(u,"0.").concat("0".repeat(t)).concat(10-c));return Y(p.toString(),n,t,a)}return t===0?v:"".concat(v).concat(n).concat(d.padEnd(t,"0").slice(0,t))}return N===".0"?v:"".concat(v).concat(N)}function ft(e,n){return typeof Proxy<"u"&&e?new Proxy(e,{get:function(a,i){if(n[i])return n[i];var u=a[i];return typeof u=="function"?u.bind(a):u}}):e}function dt(e,n){var t=s.useRef(null);function a(){try{var u=e.selectionStart,g=e.selectionEnd,d=e.value,N=d.substring(0,u),v=d.substring(g);t.current={start:u,end:g,value:d,beforeTxt:N,afterTxt:v}}catch{}}function i(){if(e&&t.current&&n)try{var u=e.value,g=t.current,d=g.beforeTxt,N=g.afterTxt,v=g.start,c=u.length;if(u.startsWith(d))c=d.length;else if(u.endsWith(N))c=u.length-t.current.afterTxt.length;else{var p=d[v-1],b=u.indexOf(p,v-1);b!==-1&&(c=b+1)}e.setSelectionRange(c,c)}catch(S){et(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(S.message))}}return[a,i]}var vt=function(){var n=s.useState(!1),t=W(n,2),a=t[0],i=t[1];return tt(function(){i(nt())},[]),a},mt=200,gt=600;function Nt(e){var n=e.prefixCls,t=e.upNode,a=e.downNode,i=e.upDisabled,u=e.downDisabled,g=e.onStep,d=s.useRef(),N=s.useRef([]),v=s.useRef();v.current=g;var c=function(){clearTimeout(d.current)},p=function(w,T){w.preventDefault(),c(),v.current(T);function _(){v.current(T),d.current=setTimeout(_,mt)}d.current=setTimeout(_,gt)};s.useEffect(function(){return function(){c(),N.current.forEach(function(y){return z.cancel(y)})}},[]);var b=vt();if(b)return null;var S="".concat(n,"-handler"),C=oe(S,"".concat(S,"-up"),h({},"".concat(S,"-up-disabled"),i)),A=oe(S,"".concat(S,"-down"),h({},"".concat(S,"-down-disabled"),u)),I=function(){return N.current.push(z(c))},x={unselectable:"on",role:"button",onMouseUp:I,onMouseLeave:I};return s.createElement("div",{className:"".concat(S,"-wrap")},s.createElement("span",H({},x,{onMouseDown:function(w){p(w,!0)},"aria-label":"Increase Value","aria-disabled":i,className:C}),t||s.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-up-inner")})),s.createElement("span",H({},x,{onMouseDown:function(w){p(w,!1)},"aria-label":"Decrease Value","aria-disabled":u,className:A}),a||s.createElement("span",{unselectable:"on",className:"".concat(n,"-handler-down-inner")})))}function _e(e){var n=typeof e=="number"?j(e):k(e).fullStr,t=n.includes(".");return t?k(n.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}const ht=(function(){var e=s.useRef(0),n=function(){z.cancel(e.current)};return s.useEffect(function(){return n},[]),function(t){n(),e.current=z(function(){t()})}});var St=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],bt=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Me=function(n,t){return n||t.isEmpty()?t.toString():t.toNumber()},ke=function(n){var t=E(n);return t.isInvalidate()?null:t},pt=s.forwardRef(function(e,n){var t=e.prefixCls,a=e.className,i=e.style,u=e.min,g=e.max,d=e.step,N=d===void 0?1:d,v=e.defaultValue,c=e.value,p=e.disabled,b=e.readOnly,S=e.upHandler,C=e.downHandler,A=e.keyboard,I=e.changeOnWheel,x=I===void 0?!1:I,y=e.controls,w=y===void 0?!0:y;e.classNames;var T=e.stringMode,_=e.parser,V=e.formatter,F=e.precision,B=e.decimalSeparator,J=e.onChange,Q=e.onInput,Z=e.onPressEnter,ee=e.onStep,ve=e.changeOnBlur,Be=ve===void 0?!0:ve,Oe=e.domRef,$e=Ve(e,St),me="".concat(t,"-input"),U=s.useRef(null),Te=s.useState(!1),ge=W(Te,2),te=ge[0],Ne=ge[1],D=s.useRef(!1),q=s.useRef(!1),K=s.useRef(!1),Ue=s.useState(function(){return E(c??v)}),he=W(Ue,2),m=he[0],Se=he[1];function qe(l){c===void 0&&Se(l)}var ne=s.useCallback(function(l,r){if(!r)return F>=0?F:Math.max(M(l),M(N))},[F,N]),re=s.useCallback(function(l){var r=String(l);if(_)return _(r);var f=r;return B&&(f=f.replace(B,".")),f.replace(/[^\w.-]+/g,"")},[_,B]),ae=s.useRef(""),be=s.useCallback(function(l,r){if(V)return V(l,{userTyping:r,input:String(ae.current)});var f=typeof l=="number"?j(l):l;if(!r){var o=ne(f,r);if(de(f)&&(B||o>=0)){var R=B||".";f=Y(f,R,o)}}return f},[V,ne,B]),Le=s.useState(function(){var l=v??c;return m.isInvalidate()&&["string","number"].includes(rt(l))?Number.isNaN(l)?"":l:be(m.toString(),!1)}),pe=W(Le,2),L=pe[0],Ee=pe[1];ae.current=L;function G(l,r){Ee(be(l.isInvalidate()?l.toString(!1):l.toString(!r),r))}var O=s.useMemo(function(){return ke(g)},[g,F]),$=s.useMemo(function(){return ke(u)},[u,F]),Ie=s.useMemo(function(){return!O||!m||m.isInvalidate()?!1:O.lessEquals(m)},[O,m]),ye=s.useMemo(function(){return!$||!m||m.isInvalidate()?!1:m.lessEquals($)},[$,m]),Ge=dt(U.current,te),Re=W(Ge,2),Pe=Re[0],We=Re[1],we=function(r){return O&&!r.lessEquals(O)?O:$&&!$.lessEquals(r)?$:null},ie=function(r){return!we(r)},X=function(r,f){var o=r,R=ie(o)||o.isEmpty();if(!o.isEmpty()&&!f&&(o=we(o)||o,R=!0),!b&&!p&&R){var P=o.toString(),se=ne(P,f);return se>=0&&(o=E(Y(P,".",se)),ie(o)||(o=E(Y(P,".",se,!0)))),o.equals(m)||(qe(o),J==null||J(o.isEmpty()?null:Me(T,o)),c===void 0&&G(o,f)),o}return m},He=ht(),De=function l(r){if(Pe(),ae.current=r,Ee(r),!q.current){var f=re(r),o=E(f);o.isNaN()||X(o,!0)}Q==null||Q(r),He(function(){var R=r;_||(R=r.replace(/。/g,".")),R!==r&&l(R)})},Ke=function(){q.current=!0},Xe=function(){q.current=!1,De(U.current.value)},Ye=function(r){De(r.target.value)},ue=function(r){var f;if(!(r&&Ie||!r&&ye)){D.current=!1;var o=E(K.current?_e(N):N);r||(o=o.negate());var R=(m||E(0)).add(o.toString()),P=X(R,!1);ee==null||ee(Me(T,P),{offset:K.current?_e(N):N,type:r?"up":"down"}),(f=U.current)===null||f===void 0||f.focus()}},xe=function(r){var f=E(re(L)),o;f.isNaN()?o=X(m,r):o=X(f,r),c!==void 0?G(m,!1):o.isNaN()||G(o,!1)},ze=function(){D.current=!0},je=function(r){var f=r.key,o=r.shiftKey;D.current=!0,K.current=o,f==="Enter"&&(q.current||(D.current=!1),xe(!1),Z==null||Z(r)),A!==!1&&!q.current&&["Up","ArrowUp","Down","ArrowDown"].includes(f)&&(ue(f==="Up"||f==="ArrowUp"),r.preventDefault())},Je=function(){D.current=!1,K.current=!1};s.useEffect(function(){if(x&&te){var l=function(o){ue(o.deltaY<0),o.preventDefault()},r=U.current;if(r)return r.addEventListener("wheel",l,{passive:!1}),function(){return r.removeEventListener("wheel",l)}}});var Qe=function(){Be&&xe(!1),Ne(!1),D.current=!1};return le(function(){m.isInvalidate()||G(m,!1)},[F,V]),le(function(){var l=E(c);Se(l);var r=E(re(L));(!l.equals(r)||!D.current||V)&&G(l,D.current)},[c]),le(function(){V&&We()},[L]),s.createElement("div",{ref:Oe,className:oe(t,a,h(h(h(h(h({},"".concat(t,"-focused"),te),"".concat(t,"-disabled"),p),"".concat(t,"-readonly"),b),"".concat(t,"-not-a-number"),m.isNaN()),"".concat(t,"-out-of-range"),!m.isInvalidate()&&!ie(m))),style:i,onFocus:function(){Ne(!0)},onBlur:Qe,onKeyDown:je,onKeyUp:Je,onCompositionStart:Ke,onCompositionEnd:Xe,onBeforeInput:ze},w&&s.createElement(Nt,{prefixCls:t,upNode:S,downNode:C,upDisabled:Ie,downDisabled:ye,onStep:ue}),s.createElement("div",{className:"".concat(me,"-wrap")},s.createElement("input",H({autoComplete:"off",role:"spinbutton","aria-valuemin":u,"aria-valuemax":g,"aria-valuenow":m.isInvalidate()?null:m.toString(),step:N},$e,{ref:at(U,n),className:me,value:L,onChange:Ye,disabled:p,readOnly:b}))))}),Rt=s.forwardRef(function(e,n){var t=e.disabled,a=e.style,i=e.prefixCls,u=i===void 0?"rc-input-number":i,g=e.value,d=e.prefix,N=e.suffix,v=e.addonBefore,c=e.addonAfter,p=e.className,b=e.classNames,S=Ve(e,bt),C=s.useRef(null),A=s.useRef(null),I=s.useRef(null),x=function(w){I.current&&ut(I.current,w)};return s.useImperativeHandle(n,function(){return ft(I.current,{focus:x,nativeElement:C.current.nativeElement||A.current})}),s.createElement(it,{className:p,triggerFocus:x,prefixCls:u,value:g,disabled:t,style:a,prefix:d,suffix:N,addonAfter:c,addonBefore:v,classNames:b,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:C},s.createElement(pt,H({prefixCls:u,disabled:t,ref:I,domRef:A,className:b==null?void 0:b.input},S)))});export{Rt as I,yt as R};
