import{d as A,u as B,a as P,k as C,h as F,r as i,j as e,P as w,i as U,z as h,bN as z,bO as L}from"./index-ChUmNm8R.js";import{r as $,u as R}from"./xlsx-BUW7exb-.js";import{F as V,D as O,I as q}from"./DownloadCsv-Cwn0aB6k.js";import{S as G}from"./SecoundaryButton-goiA8OO9.js";import{C as H}from"./CommonBreadCrumb-ZFUcDUQp.js";import{p as Q}from"./packages.constants-DLMx6o0r.js";import{c as X}from"./createLucideIcon-D1dtiQRH.js";import"./index-HwAQ7eJ8.js";import"./DownOutlined-z3I3nDv9.js";import"./dropdown-C4zMWtkZ.js";import"./LeftOutlined-lLzXux5-.js";import"./collapse-BbEVqHco.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],k=X("ArrowDownUp",J),K=A.div`
  width: 100%;
  padding:39px 37px;
  font-family: inter;

  @media (max-width: 675px) {
    padding: 15px;
  }
`,oe=()=>{const u=B(),g=P(),{type:v}=C(),{linkableId:y}=F(),[c,_]=i.useState([]),[d,m]=i.useState([]),[j,f]=i.useState({booking:!1,page:!1,csv:!1,packages:!1}),[r,Y]=i.useState([]),[x,N]=i.useState({}),l=Q.find(s=>s.type===v);l||g(-1);const D=[{name:"Quick Links",link:"/quick-links"},{name:(l==null?void 0:l.name)??"",link:`/package/${l==null?void 0:l.type}`},{name:"Add Bulk Employee",link:`/package/${l==null?void 0:l.type}/employee/add-employee`}];i.useEffect(()=>{(async()=>{var t,n;try{f(o=>({...o,packages:!0}));const a=await u(U({filters:{count:200,clientId:y}}));Y(((n=(t=a==null?void 0:a.payload)==null?void 0:t.data)==null?void 0:n.data)||[])}catch{h.error("Failed to fetch packages")}finally{f(a=>({...a,packages:!1}))}})()},[u,y]),i.useEffect(()=>{(r==null?void 0:r.length)>0?N(r[0]):N({})},[r]);function E(s){if(s){const t=new FileReader;t.onload=n=>{var o;const a=(o=n.target)==null?void 0:o.result;if(a){const b=$(a,{type:"binary"}),S=b.SheetNames[0],I=b.Sheets[S],p=R.sheet_to_json(I,{raw:!1});_(p),m([...Array(p==null?void 0:p.length).keys()]),h.success(`${p.length} employees added successfully`)}},t.readAsArrayBuffer(s)}}const M=async()=>{var t,n;const s={order:{vendor_id:"1",client_id:y,package_code:x==null?void 0:x.service_code,users:(t=c.filter((a,o)=>d.includes(o)))==null?void 0:t.map(a=>({...a,selected_date:z(a==null?void 0:a.selected_date,["DD-MM-YYYY","MM/DD/YYYY","YYYY-MM-DD","DD MMM YYYY","MMMM D, YYYY"]).format("YYYY-MM-DD"),vendor_id:Number(a==null?void 0:a.vendor_id)}))}};try{f(o=>({...o,booking:!0}));const a=await u(L(s));if(a!=null&&a.error){h.error(((n=a==null?void 0:a.error)==null?void 0:n.message)||"unknown error occured");return}h.success("Employees added successfully"),g(`/package/${l==null?void 0:l.type}`)}catch{h.error("Something went wrong")}finally{f(a=>({...a,booking:!1}))}};return e.jsxs(K,{children:[e.jsx(H,{className:"mb-2",items:D}),e.jsx("p",{className:"text-[28px] font-semibold font-[Inter] !mb-[23.87px]"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-[22px] font-medium !mb-[58.32px]",children:"Please Upload Excel"}),e.jsx("div",{className:"flex gap-[20px] flex-wrap",children:r==null?void 0:r.map((s,t)=>e.jsx("span",{children:e.jsx(G,{className:`${(x==null?void 0:x.service_code)===(s==null?void 0:s.service_code)?"!bg-[#E9F2FD]":""} !px-[20px] !py-[10px]`,onClick:()=>N(s),children:s==null?void 0:s.service_name})}))})]}),e.jsxs("div",{className:"w-full flex flex-col gap-6",children:[e.jsxs("div",{className:"grid grid-col-1 gap-y-2 sm:grid-cols-[1.2fr_2px_1fr] gap-x-10",children:[e.jsx("div",{className:"flex-1",children:e.jsx(V,{onFileUpload:E,acceptType:".xls, .xlsx, .csv, text/csv",mode:"single",acceptText:"xls, xlsx, csv"})}),e.jsx("span",{className:"w-full min-h-[2px] sm:w-[2px] bg-slate-200 self-stretch"}),e.jsxs("div",{className:"flex flex-col items-start gap-[22px]",children:[e.jsxs("span",{className:"text-[16px] text-black font-medium",children:["Download The"," ",e.jsx("span",{className:"font-bold text-[#252b61]",children:"Package 1"})," ","Template For Bulk Upload"]}),e.jsxs("div",{children:[e.jsxs("a",{href:"#",className:"w-full flex items-center !no-underline gap-2 border !border-[#aeaeae] rounded-lg !px-[7.98px] !py-[16.02px] transition-colors",children:[e.jsx("img",{className:"w-[40px] h-[40px]",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/119535-1746609861744.png",alt:"xls lgo"}),e.jsx(O,{csvData:[["name","phone","email","employee_id","remarks","age","address","gender","relation","selected_date","selected_timeslot","vendor_id"]],children:e.jsx("span",{className:"text-[14px] font-medium !text-[#252b61]",children:"Host_Package_1_Template.2025.XLS"})})]}),e.jsxs("div",{className:"flex gap-[13.7px] !mt-[11.17px]",children:[e.jsx(q,{className:"w-[14px] h-[14px] flex-shrink-0 mt-1",color:"#888"}),e.jsx("span",{className:"text-[14px] text-[#888]",children:"only the xls, xlsx file types are allowed. Please download the above templet fill & upload for extra feilds contact admin"})]})]})]})]}),e.jsx("hr",{className:"my-2 border-gray-200"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium text-[22px]",children:[c==null?void 0:c.length," Employees Pacakage 1 package have uploaded"]}),e.jsx(w,{isLoading:j==null?void 0:j.booking,onClick:M,className:"!py-[10px] !px-[20px]",children:"Book Now"})]}),e.jsx("div",{className:"overflow-x-auto rounded-[20px] border border-gray-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-sm ",children:[e.jsx("thead",{className:"bg-blue-50 text-[16px] !border-[4px] border-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:e.jsx("input",{className:"scale-[1.65]",type:"checkbox",checked:d.length===c.length&&d.length>0,onChange:()=>{d.length===c.length?m([]):m([...Array(c.length).keys()])}})}),e.jsxs("th",{className:"px-3 py-2 text-left font-medium",children:["Emp ID ",e.jsx("span",{className:"text-xs",children:"â†•"})]}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Age"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Gender"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Email ID"}),e.jsxs("th",{className:"px-3 py-2 text-left font-medium",children:["Relation ",e.jsx(k,{size:18})]}),e.jsxs("th",{className:"px-3 py-2 text-left font-medium",children:["Vendor Id ",e.jsx(k,{size:18})]})]})}),e.jsx("tbody",{className:"text-[18px]",children:c.length===0?e.jsx("tr",{className:"border-t border-gray-100 transition-colors",children:e.jsx("td",{colSpan:8,className:"px-3 py-4 text-center text-gray-500",children:"No employees added"})}):c.map((s,t)=>e.jsxs("tr",{className:"border-t border-gray-100 transition-colors",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{className:"scale-[1.65]",type:"checkbox",checked:d.includes(t),onChange:()=>{d.includes(t)?m(d.filter(n=>n!==t)):m([...d,t])}})}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.employee_id}),e.jsx("td",{className:"px-3 py-2 cursor-pointer",children:e.jsxs("div",{className:"flex gap-[8.96px] items-center",children:[e.jsx("img",{className:"w-[32px] h-[32px] rounded-full",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/119535-1746610263790.png",alt:"pic"}),e.jsx("p",{className:"m-0 font-medium text-[16px] font-[Inter] text-[#252B61]",children:s.name})]})}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.age}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.gender}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.email}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.relation}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.vendor_id})]},t))})]})})]})]})};export{oe as default};
