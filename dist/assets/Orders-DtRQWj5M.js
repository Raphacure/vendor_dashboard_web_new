import{d as Ie,u as be,r as j,h as Ne,j as e,g as vs,P as Te,z as P,aJ as Le,c3 as Ye,c5 as Ts,c6 as Cs,S as oe,R as Be,c4 as gs,bI as hs,c8 as Os,c9 as Is,ca as zs,cb as fs,cd as os,bN as Oe,ce as As,ge as Ps,dY as $s,cf as Rs,cg as Ms,bK as Fs,a as Ls,c as Bs,gf as Vs}from"./index-ChUmNm8R.js";import{C as Ys}from"./CommonSearchBox-hAv5GAZt.js";import{C as Ge}from"./CustomTable-BBwjbMSz.js";import{u as bs,C as ys}from"./CustomModalRenderer-DuatB4dP.js";import{C as de}from"./CustomModal-Ds0Ku9jR.js";import{S as ne}from"./index-D9Bv3C6k.js";import{T as we}from"./index-BsLI0Qln.js";import{d as ue}from"./dayjs.min-BA1p4t9P.js";import{I as xe}from"./index-D6J9e9i1.js";import{A as Gs}from"./AddressAutoComplete-CKisEBlA.js";import{r as Hs,u as qs}from"./xlsx-BUW7exb-.js";import{F as Zs,D as Ws,I as Js}from"./DownloadCsv-Cwn0aB6k.js";import{S as Ve}from"./SecoundaryButton-goiA8OO9.js";import{T as Ks,F as Qs,a as Xs}from"./FilePreview-CUbD6Isw.js";import{S as U}from"./addEventListener-D7w6vIGx.js";import{C as pe}from"./index-DmdwV89h.js";import{R as Ds}from"./UserOutlined-C2uVDHrr.js";import{B as _e}from"./button-D0Rmo6Y5.js";import{a as Us,b as js,d as Ns,c as Es,R as et}from"./TeamOutlined-1BcXhxO2.js";import{c as st}from"./createLucideIcon-D1dtiQRH.js";import{C as tt}from"./CustomTab-sR3kUFYQ.js";import{g as ws,a as lt}from"./doctorUsersService--bmGzTWH.js";import{R as ge}from"./useIcons-CDf6lDIp.js";import{c as je,D as ks,d as ve}from"./index-8lg37tdn.js";import{C as Ss,M as at,F as nt,T as rt,P as ds}from"./index-CaKvCUqB.js";import{R as ct,C as is}from"./row-B9qA-Efv.js";import{A as Ae,T as ot}from"./trash-CjuzgK1H.js";import{F as fe}from"./index-CZV3_rbI.js";import{C as ms}from"./CustomSpinLoader-CrgQ8bNq.js";import{g as dt}from"./prescriptionService-el3J9jP_.js";import{P as us}from"./pill-BvFhSHtv.js";import{S as it}from"./index-v-CwiWzn.js";import{D as mt}from"./DownloadForm-nnrnBOUB.js";import{R as ut}from"./index-CPAACelN.js";import"./CustomPagination-BfzEq6pA.js";import"./index-gapj9Wcb.js";import"./chevron-down-u38pTTSM.js";import"./Table-BhIN-nUr.js";import"./styleChecker-DD0Z1krI.js";import"./DownOutlined-z3I3nDv9.js";import"./dropdown-C4zMWtkZ.js";import"./LeftOutlined-lLzXux5-.js";import"./collapse-BbEVqHco.js";import"./index-De2sQM66.js";import"./useBubbleLock-BnnxIxI9.js";import"./useForm-CIMDi_Qk.js";import"./Input-ClusE8wk.js";import"./useForceUpdate-jQjUdsvY.js";import"./CheckOutlined-DPOLd74P.js";import"./index-1XTAFx_Q.js";import"./Pagination-BbDnNTXA.js";import"./extendsObject-78o_rR5W.js";import"./index-B3SopV5_.js";import"./TextArea-C37Yo_Hy.js";import"./EyeOutlined-BGetrG_9.js";import"./index-Ds72tj9v.js";import"./index-HwAQ7eJ8.js";import"./index-DC3reArS.js";import"./Skeleton-D7MyXb_N.js";import"./index-CSCB4ib3.js";import"./useUploadToS3-CcI0wiNy.js";import"./ProfileService-D5sxIXUd.js";import"./index-Ctpo8ZnH.js";import"./ExclamationCircleFilled-ZOATJe35.js";import"./InfoCircleFilled-DNn_uXca.js";import"./QuestionCircleOutlined-B6yisc4C.js";import"./index-QWR8bAtG.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],xt=st("NotebookPen",pt),gt=Ie.div`
  width: 100%;
  padding: 30px 55px;
  font-family: inter;

  .completed-status {
    color: green;
  }

  @media (max-width: 675px) {
    padding: 15px 10px;

    .booking-create {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      scroll-behavior: smooth;
    }

    .date-number-span {
      font-family: Inter;
      font-weight: 600;
      font-size: 18px;
      line-height: 21.78px;
      text-align: center;
    }

    .booking-type {
      font-family: Inter;
      font-weight: 700;
      font-size: 9px;
      line-height: 10.89px;
      letter-spacing: 1.5%;
      text-align: center;
    }

    .date-month-name {
      font-family: Inter;
      font-weight: 600;
      font-size: 12px;
      line-height: 14.52px;
      text-align: center;
    }

    .load-more-btn-div {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }

    .red-call {
      background-color: rgb(255, 0, 4);
      color: white;
    }
    .yellow-call {
      background-color: rgb(255, 167, 0);
      color: white;
    }

    .completed-status-mobile {
      border: 1px solid green;
    }

    .status-mobile-div {
      display: flex;
      justify-content: center;
      align-items: baseline;
      min-width: 80px;
    }

    .other-status-mobile {
      border: 1px solid rgb(240, 218, 105);
    }

    .rejected-status-mobile {
      color: #ff0000 !important;
      border: 1px solid #ff0000;
    }

    .whole-center {
      gap: 2px;
    }

    .completed-status {
      color: green;
    }

    .status-btns {
      padding: 5px 10px;
      border-radius: 20px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .pending-status-mobile {
      background-color: rgb(240, 218, 105);
    }

    .mobile-upcoming-status {
      background-color: rgb(255, 167, 0);
    }

    .booking-mobile-body-div {
      background-color: rgb(254, 254, 254);
      padding: 0 5px;
      margin-top: 15px;
      display: flex;
      gap: 15px;
      overflow: hidden;
      border-radius: 10px;
      flex-direction: column;
    }

    .booking-mobile-div-card {
      border: 1px solid rgb(240, 240, 240);
      padding: 7px;
      border-radius: 15px;
      display: flex;
      justify-content: space-between;
      box-shadow: 2px 4px 15px 0px #0000001a;
      gap: 2px;

      .booking-mobile-card-details {
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 50%;
      }
      .booking-details-mobile {
        min-width: 0;
      }

      .calender-box-mobile {
        width: 67px;
        height: 71px;
        padding: 9px 4px;
        background-color: rgb(233, 242, 253);
        border-radius: 11px;
        display: flex;
        flex-direction: column;
        align-items: center;
        display: flex;
        flex-direction: column;
        gap: 3px;
        flex-shrink: 0;
        border: 1px solid #f0f0f0;
      }
      .booking-details-slot {
        font-family: Inter;
        font-weight: 400;
        font-size: 15px;
        line-height: 18.15px;
        letter-spacing: 1.5%;
      }
      .booking-details-type {
        color: #888888;
        font-family: Inter;
        font-weight: 400;
        font-size: 14px;
        line-height: 16.94px;
        letter-spacing: 1.5%;
      }
      .booking-details-name {
        font-family: Inter;
        font-weight: 500;
        font-size: 16px;
        line-height: 19.36px;
        margin-bottom: 5px !important;
      }

      .booking-details-mobile p {
        margin: 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .pending-btn {
        background-color: rgb(255, 0, 4);
        border: none;
        padding: 5px 15px !important;
        border-radius: 20px;
        cursor: pointer;
        font-size: 16px;
        color: white;
      }
    }

    .booking-header-div {
      display: flex;
      justify-content: space-between;
    }

    .add-patient {
      background-color: white;
      border-radius: 10px;
      border: 1px solid #252b61;
      padding: 5px 15px !important;

      cursor: pointer;
      font-size: 16px;
      letter-spacing: 0.02em;
      font-weight: 500;
      color: #252b61;
    }
    .filter {
      background-color: white;
      border: none;
      padding: 5px 0 !important;

      cursor: pointer;
      font-size: 16px;
      letter-spacing: 0.02em;
      font-weight: 500;
      color: #252b61;
    }
    .filter img {
      width: 25px;
      padding: 0 5px 0 0 !important;
    }
  }

  .table-loading {
    height: 200px;
  }
  .glowing-div-next {
    display: inline-block;
    background-color: #92bdf6;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    box-shadow: 0 0 5px #92bdf6;
    animation: glow-grow 1.5s infinite alternate ease-in-out;
  }
  @keyframes glow-grow {
    0% {
      transform: scale(1);
      box-shadow: 0 0 5px #92bdf6;
    }
    100% {
      transform: scale(1.5);
      box-shadow: 0 0 15px #92bdf6, 0 0 30px #92bdf6;
    }
  }

  .next-label {
    color: #ff0004 !important;
  }
  .all-label {
    color: rgb(34, 46, 98) !important;
  }
  .upcoming-label {
    color: rgb(0, 136, 45) !important;
  }
  .open-label {
    color: rgb(241, 157, 2) !important;
  }
  .rejected-label {
    color: rgb(34, 46, 98) !important;
  }

  .no-bookings-td {
    height: 150px;
    text-align: center;
    color: #22336b;
    font-size: 18px;
    font-weight: 500;
    font-family: Inter;
  }
  .action-td {
    border-left: 1px solid #d6cece;
  }
  .action-div {
    display: flex;
    justify-content: center;
    /* grid-template-columns: repeat(3, 1fr); */
    justify-content: center;
    width: max-content;
    margin: 0;
    gap: 10px;

    img {
      width: 16px;
      height: 16px;
      margin-right: 5px;
    }

    .action-btns-virtual {
      padding: 10px 20px;
      border: 1px solid #252b61;
      width: fit-content;
    }
  }

  .tab-container {
    margin-top: 10px;
    border-radius: 20px;
  }
  .tab {
    display: flex;
    padding: 8px 15px;
    border-radius: 7px;
    gap: 20px;
    background-color: #e9f2fd;
  }
  .tab-button {
    background: transparent;
    border: none;
    padding: 7px 20px;
    cursor: pointer;
    font-size: 18px;
    font-weight: 500;
    color: #000;
    border-radius: 8px;
    transition: background 0.3s ease;
  }

  .share-main-div {
    position: relative;
  }

  .share-top-header {
    background-color: #e9f2fd;
    padding: 9px 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .share-close {
    background-color: #dcdcdc;
    border-radius: 100%;
    padding: 0px 4px;
  }
  .share-top-header p {
    font-size: 10px;
    margin: 0;
    text-align: left;
  }

  .share-div {
    overflow: hidden;
    position: absolute;
    z-index: 5;
    background-color: white;
    border-radius: 25px;
    width: 225px;
    height: 127px;
    animation: genieAppear 0.7s ease-out forwards;
    left: 10px;
    box-shadow: 0 0 10px #b6b6b6;
  }
  .share-items {
    padding: 0 20px;
  }
  .tab-button.active {
    background: white;
    color: #252b61;
    font-weight: 500;
    border: none;
  }
  .next-text {
    color: red;
  }
  .pending-text {
    color: #f19d02;
  }
  .rejected-text {
    color: #222e62;
  }

  .table-status-div {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
  }
  .upcoming-text {
    color: green;
  }
  .label-img {
    width: 20px;
  }

  .share-items-list-div {
    display: flex;
    gap: 10px;
    justify-content: left;
    align-items: center;
    margin: 5px 0;
  }
  .share-items-list-div:not(:last-child) {
    border-bottom: 1px solid #ccc;
    padding-bottom: 8px;
    margin-bottom: 8px;
  }
  .share-items-list-div img {
    width: 25px;
    aspect-ratio: 1 / 1;
  }
  .share-items-list-div p {
    margin: 0;
  }

  @keyframes genieAppear {
    0% {
      opacity: 0;
      transform: scale(0.1) translate(-10%, -40%);
    }
    60% {
      opacity: 1;
      transform: scale(1.1) translate(-10%, -40%);
    }
    100% {
      transform: scale(1) translate(-10%, -40%);
    }
  }

  .heading {
    h2 {
      font-size: 20px;
      font-weight: 600;
      color: #000;
      text-align: left;
      margin-bottom: 5px;
    }

    p {
      font-size: 14px;
      color: #000;
      text-align: left;
      opacity: 0.7;
      margin-bottom: 10px;
    }
  }
  .filter-container {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15.5px;
  }
  .add-patient {
    background-color: white;
    border-radius: 25px;
    border: 1px solid #252b61;
    padding: 10px 20px;
    text-wrap: nowrap;

    cursor: pointer;
    font-size: 16px;
    letter-spacing: 0.02em;
    font-weight: 500;
    color: #252b61;
  }

  .pd-container {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .download-btn {
    background-color: #c8ebd8;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    margin-left: 16px;
    transition: background-color 0.3s ease;
  }

  .download-btn svg {
    color: #22336b;
    font-size: 14px;
  }

  .download-btn:hover {
    background-color: #a4dbc3;
  }
  .sort-dropdown {
    position: relative;
    display: inline-block;
  }

  .sort-btn {
    box-shadow: 2px 4px 19px rgba(0, 0, 0, 0.1);
    border-radius: 69px;
    background-color: #fff;
    border: 1px solid #252b61;
    padding: 8px 16px;
    cursor: pointer;
    font-size: 16px;
    letter-spacing: 0.03em;
    font-weight: 500;
    color: #252b61;
  }

  .dropdown-menu {
    position: absolute;

    left: 1rem;
    display: block !important;
    background: white;
    border-radius: 10px;
    box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);
    padding: 0px;
    overflow: hidden;
    z-index: 10;
  }

  .dropdown-item {
    border-bottom: 1px solid #d6cece;
    padding: 10px;
    cursor: pointer;
    transition: background 0.2s ease-in-out;
  }

  .dropdown-item:last-child {
    border-bottom: none;
  }

  .dropdown-item:hover {
    background: #f0f0f0;
  }

  .pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
    gap: 10px;

    .arrows {
      display: flex;
      align-items: center;
      gap: 13px;
    }

    .arrow-icon {
      font-size: 1.5rem;
      cursor: pointer;
    }

    .back-arrow-icon {
      display: flex;
      align-items: center;
      padding: 5px;
      border: 1px solid #252b61;
      background-color: white;
      border-radius: 50%;
      cursor: pointer;
    }

    .page-btn {
      display: flex;
      gap: 8px;
      align-items: center;
      width: 100%;
      background-color: #252b61;
      border: 1px solid #252b61;
      color: white;
      font-size: 14px;
      letter-spacing: 0.03em;
      font-weight: 500;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
    }

    span {
      font-size: 14px;
      letter-spacing: 0.03em;
      font-weight: 500;
      color: #161616;
      input {
        width: 60px;
        padding: 10px 16px;
        color: #252b61;
        text-align: left;
        border: 1px solid #252b61;
        border-radius: 8px;
        margin: 0 5px;
      }
    }
  }

  .table-container {
    overflow: auto;
    border-radius: 20px;
    margin-top: 15px;
    border: 1px solid #d6cece;
  }

  table {
    width: 100%;
    border-collapse: collapse;

    tr {
      border-bottom: 1px solid #d6cece;
    }

    tr:last-child {
      border-bottom: none;
    }
  }
  th {
    font-size: 18px;
    font-weight: 500;
    color: #000;
    text-align: center;
    padding: 10px;
  }

  th:first-child {
    border-top-left-radius: 20px;
  }

  th:last-child {
    border-top-right-radius: 20px;
  }
  td {
    font-size: 16px;
    font-weight: 500;
    color: #000;
    padding: 10px;
    text-align: center;
  }

  thead {
    background-color: #e9f2fd;
    font-weight: bold;
    border: 2px solid white;
    border-bottom: none;
  }

  th {
    font-size: 16px;
    font-weight: 500;
    color: #000;
    text-align: center;
    padding: 10px;
  }

  th:first-child {
    border-top-left-radius: 20px;
  }

  th:last-child {
    border-top-right-radius: 20px;
  }

  .name {
    color: #252b61;
    font-size: 16px;
    cursor: pointer;
  }

  .report p {
    color: #252b61;
    font-size: 16px;
    margin-bottom: 0px;
    text-decoration: underline;
  }

  .report a:hover {
    text-decoration: underline;
  }

  .status {
    width: 100%;
    padding: 20px 10px;
    border-radius: 69px;
    font-size: 14px;
    letter-spacing: 0.03em;
    font-weight: 500;
    text-align: center;
    display: inline-block;
  }

  .status img {
    width: 15px;
    height: 16px;
  }
  .status p {
    margin: 0;
  }

  .rejected {
    color: #ff0000 !important;
    border: 1px solid #ff0000 !important;
    background-color: #fff !important;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
    align-items: center;
    padding: 10px 10px;
  }

  .upcoming {
    color: #252b61;
    border: 1px solid #252b61;
    background-color: #fff;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
  }

  .pending {
    color: #000000;
    border: 1px solid #f0da69;
    background-color: #f0da69;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
    align-items: center;
  }
  .others {
    color: #252b61;
    border: 1px solid #252b61;
    background-color: #fff;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
    padding: 10px 10px;
  }

  .status-icon {
    height: 16px;
    width: 16px;
  }

  .actions {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .icon-all {
    display: flex;
    gap: 8px;
  }
  .icon {
    height: 22px;
    width: 22px;
    cursor: pointer;
  }

  .call-btn-width {
    width: 130px;
  }

  .call-btn {
    display: flex;
    gap: 23px;
    align-items: center;
    justify-content: left;
    background: #ffa700;
    border: 2px solid #ffa700;
    color: white;
    padding: 10px 15px;
    border-radius: 38px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: #fff;

    .logo-icon-2 {
      height: 13.5px;
      width: 13.5px;
    }
  }
  .call-btn-upcoming {
    display: flex;
    gap: 23px;
    align-items: center;
    justify-content: left;
    background: rgb(255, 0, 4);
    border: 2px solid rgb(255, 0, 4);
    color: white;
    padding: 10px 15px;
    border-radius: 38px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: #fff;

    .logo-icon-2 {
      height: 13.5px;
      width: 13.5px;
    }
  }

  .disabled-btn {
    display: flex;
    gap: 23px;
    align-items: center;
    justify-content: left;
    background: rgb(128, 128, 128);
    border: 2px solid rgba(128, 128, 128, 0.5);
    padding: 10px 15px;
    border-radius: 38px;
    cursor: not-allowed;
    font-size: 14px;
    font-weight: 500;
    color: white;

    .logo-icon {
      height: 13.5px;
      width: 13.5px;
    }
  }
`,ht=Ie.div`
  .form-container {
    background-color: #fff;
    padding: 24px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    max-width: 800px; // Adjust max-width as needed
    margin: auto; // Center the form if needed
  }

  h3 {
    font-size: 1.2rem;
    button {
      padding: 1rem !important;
    }
  }

  .ant-card-body{
    padding:12px !important;
  }

  .form-title {
    margin-bottom: 24px;
    font-size: 1.5rem;
    font-weight: 600;
    text-align: center;
    color: #333;
  }

  .ant-form-item-label > label {
    font-weight: 500;
    color: #555;
  }

  .ant-input,
  .ant-select-selector,
  .ant-input-number,
  .ant-picker {
    border-radius: 4px;
  }

  .ant-input-number {
    width: 100%;
  }

  .form-actions {
    text-align: right;
    margin-top: 24px;
    border-top: 1px solid #f0f0f0;
    padding-top: 16px;

    .cancel-btn {
      margin-right: 8px;
    }
  }

  /* Time slot styling similar to CreateAppointmentForm */
  .date-time-picker-section {
    margin-bottom: 24px;
  }

  /* Date slider styles */
  .date-slider-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    border-radius: 8px;
    margin-bottom: 20px;
  }

  .date-slider {
    display: flex;
    flex: 1;
    overflow: hidden;
    margin: 0 8px;
    justify-content: space-between;
  }

  .date-tab {
    flex: 1;
    text-align: center;
    padding: 12px 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 4px;
    margin: 0 4px;
    border-bottom: 3px solid transparent;
    display: flex;
    flex-direction: column;
    align-items: center;

    &:hover {
      background: #f5f5f5;
    }

    &.active {
      background: #fff;
      border-bottom-color: #1890ff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
  }

  .date-label {
    font-weight: 500;
    font-size: 14px;
    margin-bottom: 4px;
  }

  .slots-count {
    font-size: 12px;
    color: #52c41a;
  }

  .date-slider-nav-btn {
    background: #f0f2f5;
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #555;
    transition: all 0.3s;

    &:hover {
      background: #e6f7ff;
      color: #1890ff;
    }

    &:disabled {
      background: #f5f5f5;
      color: #d9d9d9;
      cursor: not-allowed;
    }
  }

  .time-slot-div {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
  }

  .time-slot {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 12px;
    background: #f0f2f5;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;

    &:hover {
      background: #e6f7ff;
      border-color: #1890ff;
    }

    &.active {
      background: #1890ff;
      color: white;
    }
  }

  h4 {
    margin-bottom: 12px;
    font-weight: 500;
  }

  /* Accordion styling customizations */
  .time-slots-accordions {
    margin-bottom: 24px;

    [data-slot="accordion-trigger"] {
      font-weight: 500;
    }

    [data-slot="accordion-content"] {
      padding: 0 12px;
    }
  }

  // Responsive adjustments if needed
  @media (max-width: 576px) {
    .form-container {
      padding: 16px;
    }
    .form-title {
      font-size: 1.25rem;
    }

    .date-slider {
      overflow-x: auto;
    }
  }

  .bannerWrapper {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: -1rem;
    width: 5rem;
    height: 1.625rem;

    .rectangle {
      display: flex;
      justify-content: center;
      align-items: center;
      background: #89db7b;
      padding: 5px 5px 5px 0px;
      border-radius: 10px 45px 45px 0;
      color: #252b61;
      font-family: Outfit, sans-serif;
      font-size: 12px;
      font-weight: 500;
      letter-spacing: 0.18px;
    }

    .triangle {
      width: 0;
      height: 0;
      border-left: 1rem solid transparent;
      border-top: 0.8rem solid #2c7420;
    }
  }

  .patientTypeContainer {
    /* border: 1px solid #ccc; */
    padding: 10px;
    border-radius: 10px;
  }

  .ant-collapse-content {
    max-height: 300px;
    overflow: auto;
  }
`,{Text:ft}=we,bt=({setFormData:n,selectedPatient:S,validationErrors:s,setValidationErrors:g})=>{var L,K,D,H;const N=be(),[v,i]=j.useState(!1),[w,V]=j.useState([]),{linkableId:b}=Ne(),R=(o,r)=>{var k;try{n&&n(C=>{var J;const c=((J=C==null?void 0:C.users)==null?void 0:J[0])??{user:{},address:{}};return{...C,users:[{...c,user:r==null?void 0:r.originalItem}]}}),(k=s==null?void 0:s.user)!=null&&k.id&&(r!=null&&r.originalItem)&&g(C=>({...C,user:void 0}))}catch(C){console.error("Error in handlePatientSelect:",C)}};return j.useEffect(()=>{(async()=>{var r,k;i(!0);try{if(b){const c=await N(vs({searchText:"",page:1,count:1e6,department:"",clientId:b}));(r=c==null?void 0:c.payload)!=null&&r.data&&V((k=c.payload)==null?void 0:k.data)}}catch(C){console.error("Error fetching patients:",C)}finally{i(!1)}})()},[N,b]),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee-select",className:"form-label",children:"Select Existing Employee"}),e.jsx(ne,{status:typeof(s==null?void 0:s.user)=="object"&&((L=s==null?void 0:s.user)!=null&&L.id)?"error":"",id:"employee-select",placeholder:"Search and select a Employee",showSearch:!0,size:"large",value:(S==null?void 0:S.id)||void 0,loading:v,options:(D=(K=w==null?void 0:w.associatedUsers)==null?void 0:K.map)==null?void 0:D.call(K,o=>({label:`${(o==null?void 0:o.first_name)||""} ${(o==null?void 0:o.last_name)||""}${!(o!=null&&o.first_name)&&!(o!=null&&o.last_name)?"N/A(name not available)":""}`,value:o==null?void 0:o.id,originalItem:o})),onChange:R,filterOption:(o,r)=>((r==null?void 0:r.label)??"").toLowerCase().includes(o.toLowerCase()),optionRender:o=>{var r,k,C,c,J,p,M,_,h,y,T,q,E,$;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:((k=(r=o==null?void 0:o.originalItem)==null?void 0:r.user)==null?void 0:k.image)||`data:image/svg+xml,${encodeURIComponent(`
  <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
    <rect width="40" height="40" fill="#FF5733"/>
    <text 
      x="50%" 
      y="50%" 
      dy=".1em"
      fill="white"
      font-family="Arial"
      font-size="16"
      text-anchor="middle"
      dominant-baseline="middle"
    >
      ${(C=o==null?void 0:o.originalItem)!=null&&C.first_name&&((c=o==null?void 0:o.originalItem)!=null&&c.last_name)?`${(p=(J=o==null?void 0:o.originalItem)==null?void 0:J.first_name)==null?void 0:p[0]}${(_=(M=o==null?void 0:o.originalItem)==null?void 0:M.last_name)==null?void 0:_[0]}`:"NA"}
    </text>
  </svg>
`)}`,alt:`${((y=(h=o==null?void 0:o.originalItem)==null?void 0:h.user)==null?void 0:y.first_name)||""} ${((q=(T=o==null?void 0:o.originalItem)==null?void 0:T.user)==null?void 0:q.last_name)||""}`,className:"w-8 h-8 rounded-full mr-2 object-cover"}),e.jsxs("div",{children:[e.jsx("div",{children:o==null?void 0:o.label}),e.jsx("div",{className:"text-xs text-gray-500",children:(($=(E=o==null?void 0:o.originalItem)==null?void 0:E.user)==null?void 0:$.email)||""})]})]})},className:"w-full"}),typeof(s==null?void 0:s.user)=="object"&&((H=s==null?void 0:s.user)==null?void 0:H.id)&&e.jsx(ft,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a user"})]})},yt=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],_s=j.memo(({formData:n,setFormData:S,validationErrors:s,setValidationErrors:g})=>{var p,M,_,h,y,T,q,E,$;const N=(M=(p=n.users)==null?void 0:p[0])==null?void 0:M.user,v=(z,I)=>{switch(z){case"firstName":return I!=null&&I.trim()?void 0:"First name is required.";case"lastName":return I!=null&&I.trim()?void 0:"Last name is required.";case"phone":return I?/^\d{10}$/.test(I)?void 0:"Phone number must be 10 digits.":"Phone number is required.";case"email":return I?/\S+@\S+\.\S+/.test(I)?void 0:"Invalid email format.":"Email is required.";case"age":{if(!I)return"Age is required.";const a=Number(I);return isNaN(a)||a<=0||a>120?"Please enter a valid age.":void 0}case"gender":return I?void 0:"Gender is required.";default:return}},i=(z,I)=>{const a={[z]:I};if(z==="age"&&I){const u=ue().subtract(Number(I),"year");a.dob=u.format("YYYY-MM-DD")}S(d=>{var A;const u=((A=d==null?void 0:d.users)==null?void 0:A[0])||{user:{},address:{}};return{...d,users:[{...u,user:{...u.user,...a}}]}});const l=v(z,I);g(d=>{const u={...d.user||{}};return l?u[z]=l:delete u[z],{...d,user:u}})},w=(N==null?void 0:N.firstName)||"",V=(N==null?void 0:N.lastName)||"",b=(N==null?void 0:N.phone)||"",R=(N==null?void 0:N.email)||"",L=(N==null?void 0:N.age)||"",K=(N==null?void 0:N.gender)||"",D=(N==null?void 0:N.employeeid)||"",H=(_=s.user)==null?void 0:_.firstName,o=(h=s.user)==null?void 0:h.lastName,r=(y=s.user)==null?void 0:y.phone,k=(T=s.user)==null?void 0:T.email,C=(q=s.user)==null?void 0:q.age,c=(E=s.user)==null?void 0:E.gender,J=($=s.user)==null?void 0:$.employeeid;return e.jsxs("div",{className:"patientTypeContainer grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx(xe,{size:"large",status:H?"error":"",id:"firstName",name:"firstName",type:"text",placeholder:"Enter First Name",value:w,onChange:z=>i("firstName",z.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),H&&e.jsx("p",{className:"text-red-500 mt-1",children:H})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx(xe,{size:"large",status:o?"error":"",id:"lastName",name:"lastName",type:"text",placeholder:"Enter Last Name",value:V,onChange:z=>i("lastName",z.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),o&&e.jsx("p",{className:"text-red-500 mt-1",children:o})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"employeeid",className:"block text-sm font-medium text-gray-700",children:"Employee Id"}),e.jsx(xe,{size:"large",status:J?"error":"",id:"employeeid",name:"employeeid",type:"text",placeholder:"Enter Employeeid",value:D,onChange:z=>i("employeeid",z.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),J&&e.jsx("p",{className:"text-red-500 mt-1",children:J})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"number",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx(xe,{size:"large",status:r?"error":"",id:"number",name:"phone",type:"text",placeholder:"Enter Employee Phone Number",value:b,onChange:z=>i("phone",z.target.value),maxLength:10,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),r&&e.jsx("p",{className:"text-red-500 mt-1",children:r})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"emailId",className:"block text-sm font-medium text-gray-700",children:"Email Id"}),e.jsx(xe,{size:"large",status:k?"error":"",id:"emailId",name:"email",type:"email",placeholder:"Enter Employee Email Id",value:R,onChange:z=>i("email",z.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),k&&e.jsx("p",{className:"text-red-500 mt-1",children:k})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700",children:"Age"}),e.jsx(xe,{size:"large",status:C?"error":"",id:"age",name:"age",type:"number",placeholder:"Enter Age",value:L,onChange:z=>i("age",z.target.value),min:0,max:120,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),C&&e.jsx("p",{className:"text-red-500 mt-1",children:C})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsx(ne,{size:"large",status:c?"error":"",id:"gender",placeholder:"Select Gender",value:K,onChange:z=>i("gender",z),className:"mt-1 block w-full rounded-md shadow-sm sm:text-sm",options:yt}),c&&e.jsx("p",{className:"text-red-500 mt-1",children:c})]})]})});_s.displayName="NewPatient";const jt=Ie.div`
  width: 100%;
  padding:5px;
  font-family: inter;
`,Nt=({setEmployeeListParent:n,employeeListParent:S,showTable:s=!0})=>{const g=bs(["table","invalid-data"]),[N,v]=j.useState([]),[i,w]=j.useState([]),[V,b]=j.useState([]),[R,L]=j.useState(1),[K,D]=j.useState(20);function H(h){if(h){const y=new FileReader;y.readAsArrayBuffer(h),y.onload=T=>{var E;const q=(E=T.target)==null?void 0:E.result;if(q){const $=Hs(q,{type:"binary"}),z=$.SheetNames[0],I=$.Sheets[z],a=qs.sheet_to_json(I,{raw:!1}),l=[{field:"name"},{field:"email"},{field:"phone"},{field:"age"},{field:"gender"},{field:"address"},{field:"selected_date"},{field:"selected_timeslot"}],d=[],u=[];a.forEach((A,F)=>{const Y={...A,selected_date:ue(A==null?void 0:A.selected_date).format("YYYY-MM-DD"),vendor_id:Number(A==null?void 0:A.vendor_id),originalIndex:F+2};l.map(({field:B})=>{var m;const t=(m=Y[B])==null?void 0:m.toString().trim();return t&&t.length>0}).every(Boolean)?d.push(Y):u.push(Y)}),u.length>0&&(w(u),g.push("invalid-data"),P.error(`${u.length} rows have invalid data. Please fix them.`)),d.length>0?(v(d),b([...Array(d.length).keys()]),u.length===0&&g.push("table"),P.success(`${d.length} employees added successfully`)):u.length===0&&(v([]),b([]),n([]),P.error("No valid employee data found."))}}}}const o=(h,y,T)=>{const q=[...i];q[h][y]=T,w(q)},r=()=>{const h=[],y=[];i.forEach(T=>{const q=[];q.push(T.name&&T.name.toString().trim().length>0),q.push(T.email&&/^[\w.-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(T.email.toString().trim())),q.push(T.phone&&/^[0-9]{10}$/.test(T.phone.toString().trim())),q.push(T.age&&!isNaN(Number(T.age))&&Number(T.age)<120),q.push(T.gender&&["male","female","others"].includes(T.gender.toString().trim().toLowerCase())),q.push(T.selected_date&&ue(T.selected_date).isValid()&&ue(T.selected_date).startOf("day").valueOf()>=ue().startOf("day").valueOf()),q.push(T.address&&T.address.toString().trim().length>0),q.push(T.selected_timeslot&&T.selected_timeslot.toString().trim().length>0),q.every(Boolean)?y.push(T):h.push(T)}),h.length>0?(w(h),P.error(`${h.length} rows still have invalid data. Please fix them.`)):(v([...N,...y]),b([...Array(N.length+y.length).keys()]),w([]),g.pop("invalid-data"),g.push("table"),P.success("All employees are now valid and added."))},k=()=>{const h=V.map(y=>N[y]);n&&n(h),g.pop("table"),P.success(`${h.length} employees added successfully`)},C=R*K,c=C-K,J=N.slice(c,C),p=(h,y)=>{D(y),L(h)},M=()=>e.jsx("div",{children:e.jsx(Ge,{columns:[{label:"Select All",headerRender:()=>e.jsx("input",{className:"scale-[1.65]",type:"checkbox",checked:V.length===N.length&&V.length>0,onChange:()=>{V.length===N.length?b([]):b([...Array(N.length).keys()])}}),render(h,y,T){return e.jsx("input",{className:"scale-[1.65]",type:"checkbox",checked:V.includes(T),onChange:()=>{V.includes(T)?b(V.filter(q=>q!==T)):b([...V,T])}})}},{label:"Name",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.name})}},{label:"Email",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.email})}},{label:"Phone",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.phone})}},{label:"Employee ID",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.employee_id})}},{label:"Remarks",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.remarks})}},{label:"Age",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.age})}},{label:"Gender",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.gender})}},{label:"Address",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.address})}},{label:"Selected Date",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.selected_date})}},{label:"Timeslot",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.selected_timeslot})}},{label:"Vendor ID",render(h,y){return e.jsx("td",{className:"px-3 py-2",children:y==null?void 0:y.vendor_id})}}],data:J,showingName:"",isLoading:!1,onPageChange:p,page:R,pageSize:K,total:N.length,pagination:!0})}),_=[{type:"invalid-data",component:e.jsxs(de,{handleClose:()=>g.pop("invalid-data"),open:!0,title:"Fix Invalid Data",children:[e.jsxs(de.Body,{children:[e.jsx("p",{className:"mb-4",children:"The following rows have missing or invalid data. Please correct them below and click 'Approve'."}),e.jsx(wt,{handleInvalidDataChange:o,invalidEmployeeList:i,setInvalidEmployeeList:w})]}),e.jsx(de.Footer,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ve,{onClick:()=>g.pop("invalid-data"),children:"Cancel"}),e.jsx(Te,{onClick:r,children:"Approve and Continue"})]})})]})},{type:"table",component:e.jsxs(de,{handleClose:()=>g.pop("table"),open:!0,title:"Bulk Orders List",children:[e.jsxs(de.Body,{children:[e.jsx("h3",{children:"Please Confirm and Save Changes"}),e.jsx(M,{})]}),e.jsx(de.Footer,{children:e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(Te,{onClick:k,children:"Save Changes"})})})]})}];return e.jsxs(jt,{children:[S&&(S==null?void 0:S.length)===0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[20px] font-semibold font-[Inter] !mb-[23.87px]",children:"Bulk Upload Orders List"}),e.jsx("p",{className:"text-[22px] font-medium !mb-[10px]",children:"Please Upload Excel"})]}),e.jsxs("div",{className:"w-full flex flex-col gap-6",children:[S&&(S==null?void 0:S.length)===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-col-1 gap-y-2 sm:grid-cols-[1.2fr_2px_1fr] gap-x-10",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Zs,{onFileUpload:H,acceptType:".csv",mode:"single",acceptText:"csv"})}),e.jsx("span",{className:"w-full min-h-[2px] sm:w-[2px] bg-slate-200 self-stretch"}),e.jsxs("div",{className:"flex flex-col items-start gap-[22px]",children:[e.jsx("span",{className:"text-[16px] text-black font-medium",children:"Download The Template For Bulk Upload"}),e.jsxs("div",{children:[e.jsxs("a",{href:"#",className:"w-full flex items-center !no-underline gap-2 border !border-[#aeaeae] rounded-lg !px-[7.98px] !py-[16.02px] transition-colors",children:[e.jsx("img",{className:"w-[40px] h-[40px]",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/119535-1746609861744.png",alt:"xls lgo"}),e.jsx(Ws,{csvData:[["name","email","phone","employee_id","remarks","age","gender","address","selected_date","selected_timeslot","vendor_id"]],children:e.jsx("span",{className:"text-[14px] font-medium !text-[#252b61]",children:"Template.2025.csv"})})]}),e.jsxs("div",{className:"flex gap-[13.7px] !mt-[11.17px]",children:[e.jsx(Js,{className:"w-[14px] h-[14px] flex-shrink-0 mt-1",color:"#888"}),e.jsx("span",{className:"text-[14px] text-[#888]",children:"only the csv file types are allowed. Please download the above templet fill & upload for extra feilds contact admin"})]})]})]})]}),e.jsx("hr",{className:"my-2 border-gray-200"})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium text-[22px]",children:[S==null?void 0:S.length," Employee Added"]}),e.jsx(Ve,{disabled:(N==null?void 0:N.length)===0,onClick:()=>g.push("table"),className:"!text-[18px] !ml-2",children:"Show Bulk Data"})]}),s&&e.jsx(M,{}),!s&&e.jsx(ys,{activeTypes:g.activeTypes,modals:_})]})]})},wt=({handleInvalidDataChange:n,invalidEmployeeList:S,setInvalidEmployeeList:s})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Ge,{total:S.length,showingName:"Invalid List",data:S,columns:[{label:"#",dataIndex:"originalIndex"},{label:"Name",render:(g,N,v)=>e.jsx("input",{type:"text",value:g.name||"",onChange:i=>n(v,"name",i.target.value),className:"w-full border rounded px-2 py-1"})},{label:"Email",render:(g,N,v)=>e.jsx("input",{type:"text",value:g.email||"",onChange:i=>n(v,"email",i.target.value),className:"w-full border rounded px-2 py-1"})},{label:"Phone",render:(g,N,v)=>e.jsx("input",{type:"number",value:g.phone||"",onChange:i=>{const w=i.target.value.replace(/\D/g,"");w.length<=10&&n(v,"phone",w)},className:"w-full border rounded px-2 py-1"})},{label:"Age",render:(g,N,v)=>e.jsx("input",{type:"number",value:g.age||"",max:"120",onChange:i=>{const w=i.target.value.replace(/\D/g,""),V=parseInt(w);(!w||V>0&&V<120)&&n(v,"age",w)},className:"w-full border rounded px-2 py-1"})},{label:"Gender",render:(g,N,v)=>e.jsx("input",{type:"text",value:g.gender||"",onChange:i=>n(v,"gender",i.target.value),className:"w-full border rounded px-2 py-1"})},{label:"Address",render:(g,N,v)=>e.jsx("input",{type:"text",value:g.address||"",onChange:i=>n(v,"address",i.target.value),className:"w-full border rounded px-2 py-1"})},{label:"Date",render:(g,N,v)=>e.jsx("input",{type:"date",value:g.selected_date||"",min:new Date().toISOString().split("T")[0],onChange:i=>n(v,"selected_date",i.target.value),className:"w-full border rounded px-2 py-1"})},{label:"Timeslot",render:(g,N,v)=>e.jsx("input",{type:"text",value:g.selected_timeslot||"",onChange:i=>n(v,"selected_timeslot",i.target.value),className:"w-full border rounded px-2 py-1"})},{label:"Action",render:(g,N,v)=>e.jsx("button",{onClick:()=>{const i=[...S];i.splice(v,1),s(i)},children:e.jsx(Ks,{className:"text-red-500"})})}]})}),kt=({formData:n,setFormData:S})=>{const s=g=>{S(N=>({...N,users:g}))};return e.jsx(e.Fragment,{children:e.jsx(Nt,{showTable:!1,setEmployeeListParent:s,employeeListParent:n})})},{Title:Pe,Text:Se}=we,St=({formData:n,setFormData:S,validationErrors:s,setValidationErrors:g})=>{var i,w,V,b,R,L,K,D,H,o,r,k,C,c,J,p,M,_,h,y,T,q,E;const{linkableId:N}=Ne();j.useEffect(()=>{S($=>({...$,users:[]}))},[n==null?void 0:n.userType,S]);const v=$=>{var z,I,a,l,d,u,A,F,Y,Q,B,t,m,O,f;if($){const x=$.formatted_address;let X=null,W=null;typeof((I=(z=$.geometry)==null?void 0:z.location)==null?void 0:I.lat)=="function"?X=(l=(a=$.geometry)==null?void 0:a.location)==null?void 0:l.lat():X=(u=(d=$.geometry)==null?void 0:d.location)==null?void 0:u.lat,typeof((F=(A=$.geometry)==null?void 0:A.location)==null?void 0:F.lng)=="function"?W=(Q=(Y=$.geometry)==null?void 0:Y.location)==null?void 0:Q.lng():W=(t=(B=$.geometry)==null?void 0:B.location)==null?void 0:t.lng;const G=$.address_components,te=(m=G==null?void 0:G.find(se=>se.types.includes("locality")))==null?void 0:m.long_name,re=(O=G==null?void 0:G.find(se=>se.types.includes("administrative_area_level_1")))==null?void 0:O.long_name,ce=(f=G==null?void 0:G.find(se=>se.types.includes("postal_code")))==null?void 0:f.long_name;if(X&&W){const se={fullAddress:x,detail:null,city:te,latitude:X,longitude:W,state:re,zip:ce};S(ae=>{var ie;return{...ae,users:[{...((ie=ae.users)==null?void 0:ie[0])||{},address:se}]}})}}};return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 !mt-[22px]",children:e.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(pe,{className:`shadow-md ${Object.keys(s.user||{}).length>0?"!border-red-500":""}`,children:e.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ds,{className:"text-blue-500 !mr-2 text-lg"}),e.jsx(Pe,{level:4,className:"m-0",children:"Employee Details"})]}),e.jsxs("div",{className:"flex items-center justify-start gap-2 flex-wrap",children:[e.jsx(_e,{type:(n==null?void 0:n.userType)==="existing"?"primary":"default",onClick:()=>S($=>({...$,userType:"existing"})),className:`h-10 px-4 !rounded-full flex items-center justify-center focus:outline-none ${(n==null?void 0:n.userType)==="existing"?"!bg-[#222E62] text-white":"bg-white text-[#222E62] border border-[#222E62] hover:bg-opacity-10 hover:bg-[#222E62]"}`,children:e.jsx(Se,{strong:!0,className:`${(n==null?void 0:n.userType)==="existing"?"text-white":"text-[#222E62]"}`,children:"Existing Employee"})}),N==="58ac0845-98d5-411e-aa3e-9490d7fcde1f"&&e.jsxs(e.Fragment,{children:[e.jsx(Se,{strong:!0,className:"text-gray-600",children:"OR"}),e.jsx(_e,{type:(n==null?void 0:n.userType)==="bulk"?"primary":"default",onClick:()=>S($=>({...$,userType:"bulk"})),className:`h-10 px-4 !rounded-full flex items-center justify-center focus:outline-none ${(n==null?void 0:n.userType)==="bulk"?"!bg-[#222E62] text-white":"bg-white text-[#222E62] border border-[#222E62] hover:bg-opacity-10 hover:bg-[#222E62]"}`,children:e.jsx(Se,{strong:!0,className:`${(n==null?void 0:n.userType)==="bulk"?"text-white":"text-[#222E62]"}`,children:"Bulk Employee"})})]}),e.jsx(Se,{strong:!0,className:"text-gray-600",children:"OR"}),e.jsx(_e,{type:(n==null?void 0:n.userType)==="new"?"primary":"default",onClick:()=>S($=>({...$,userType:"new"})),className:`h-10 px-4 !rounded-full flex items-center justify-center focus:outline-none ${(n==null?void 0:n.userType)==="new"?"!bg-[#222E62] text-white":"bg-white text-[#222E62] border border-[#222E62] hover:bg-opacity-10 hover:bg-[#222E62]"}`,children:e.jsx(Se,{strong:!0,className:`${(n==null?void 0:n.userType)==="new"?"text-white":"text-[#222E62]"}`,children:"New Employee"})})]})]}),e.jsxs("div",{children:[(n==null?void 0:n.userType)==="new"&&e.jsx(_s,{validationErrors:s,formData:n,setValidationErrors:g,setFormData:S}),(n==null?void 0:n.userType)==="existing"&&e.jsx(bt,{validationErrors:s,selectedPatient:n.users,setFormData:S,setValidationErrors:g}),(n==null?void 0:n.userType)==="bulk"&&e.jsx(kt,{formData:n.users,setFormData:S})]})]})}),n.userType!=="bulk"&&e.jsx(pe,{className:`shadow-md ${s.address?"!border-red-500":""}`,children:e.jsx(U,{direction:"vertical",size:"large",className:"w-full",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Us,{className:"text-green-500 !mr-2 text-lg"}),e.jsx(Pe,{level:4,className:"m-0",children:"Address Information"})]}),e.jsxs(U,{direction:"vertical",size:"middle",className:"w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx(Gs,{onChange:$=>S(z=>{var a;const I=((a=z.users)==null?void 0:a[0])||{user:{},address:{}};return{...z,users:[{...I,address:{...I.address,fullAddress:$.target.value}}]}}),onAddressSelected:v,placeholder:"Enter users's address",className:`w-full h-12 ${(i=s==null?void 0:s.address)!=null&&i.fullAddress?"!border-red-500":""} !rounded-[8px]`,value:((b=(V=(w=n==null?void 0:n.users)==null?void 0:w[0])==null?void 0:V.address)==null?void 0:b.fullAddress)??""}),((R=s==null?void 0:s.address)==null?void 0:R.city)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.city})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx(xe,{placeholder:"Enter city",className:`h-12 !rounded-[8px] ${(L=s==null?void 0:s.address)!=null&&L.city?"!border-red-500":""}`,value:((H=(D=(K=n==null?void 0:n.users)==null?void 0:K[0])==null?void 0:D.address)==null?void 0:H.city)??"",onChange:$=>S(z=>{var I,a,l;return{...z,users:[{...(I=z.users)==null?void 0:I[0],address:{...(l=(a=z.users)==null?void 0:a[0])==null?void 0:l.address,city:$.target.value}}]}})}),((o=s==null?void 0:s.address)==null?void 0:o.city)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.city})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx(xe,{placeholder:"Enter state",className:`h-12 !rounded-[8px] ${(r=s==null?void 0:s.address)!=null&&r.state?"!border-red-500":""}`,value:((c=(C=(k=n==null?void 0:n.users)==null?void 0:k[0])==null?void 0:C.address)==null?void 0:c.state)??"",onChange:$=>S(z=>{var I,a,l;return{...z,users:[{...(I=z.users)==null?void 0:I[0],address:{...(l=(a=z.users)==null?void 0:a[0])==null?void 0:l.address,state:$.target.value}}]}})}),((J=s==null?void 0:s.address)==null?void 0:J.state)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.state})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),e.jsx(xe,{placeholder:"Enter ZIP code",maxLength:6,className:`h-12 !rounded-[8px] ${(p=s==null?void 0:s.address)!=null&&p.zip?"!border-red-500":""}`,value:((h=(_=(M=n==null?void 0:n.users)==null?void 0:M[0])==null?void 0:_.address)==null?void 0:h.zip)??"",onChange:$=>{const z=$.target.value.replace(/\D/g,"");S(I=>{var a,l,d;return{...I,users:[{...(a=I.users)==null?void 0:a[0],address:{...(d=(l=I.users)==null?void 0:l[0])==null?void 0:d.address,zip:z}}]}})}}),((y=s==null?void 0:s.address)==null?void 0:y.zip)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.zip})]})]})]})]})})}),["existing","new"].includes(n.userType)&&e.jsx(pe,{className:"shadow-md",children:e.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs(Pe,{level:4,className:"m-0",children:[e.jsx(xt,{})," Remarks"]}),e.jsx(xe,{placeholder:"Enter Remark",className:"h-12 !rounded-[8px]",value:((E=(q=(T=n==null?void 0:n.users)==null?void 0:T[0])==null?void 0:q.user)==null?void 0:E.remark)??"",onChange:$=>{const z=$.target.value;S(I=>{var a,l,d;return{...I,users:[{...(a=I.users)==null?void 0:a[0],user:{...(d=(l=I.users)==null?void 0:l[0])==null?void 0:d.user,remark:z}}]}})}})]})})]})})},_t=j.memo(St),{Text:ee}=we,{Panel:vt}=Ss,ps=["rapha","call","chat","video","opd"],Tt=[{id:"26055",name:"Raphacure Preferred Doctor",img:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/1732785725785EMTYDOCTORIMAGE.png-1732785730293.png",exp:"5+",lang:"English,Hindi",specialization:"Genral Physician",rating:"4.3"}],Ct=[{value:"call",label:"Audio Consult",icon:e.jsx(Os,{className:"mr-2"}),type:"virtual_consultation"},{value:"chat",label:"Chat Consult",icon:e.jsx(Is,{className:"mr-2"}),type:"virtual_consultation"},{value:"video",label:"Video Consult",icon:e.jsx(zs,{className:"mr-2"}),type:"virtual_consultation"},{value:"opd",label:"OPD Consult",icon:e.jsx(fs,{className:"mr-2"}),type:"opd_consultation"}],Ot=({formData:n,setFormData:S,validationErrors:s,setValidationErrors:g,allowedData:N,selectedClientId:v})=>{var F,Y,Q,B;const i=["ebec2f0b-33aa-4e6a-aff9-6a1be18255ab","75990265-bf54-4b8d-b92e-bc384cb320f8","732b5b80-46d5-49a8-af7c-74cfe4c79f93"].includes(v),w=["6986ba4e-12e0-4316-ab99-abb032e1bceb"].includes(v),V=j.useRef({doctors:void 0}),b=n.consultation,R=be(),[L,K]=j.useState(()=>i?"rapha_prefered_doctors":w?"rapha_doctors":"associated_doctors"),{linkableId:D}=Ne(),[H,o]=j.useState([]),[r,k]=j.useState([]),[C,c]=j.useState([]),[J,p]=j.useState([]),[M,_]=j.useState({doctors:!1,timeSlots:!1,clinics:!1,specializations:!1});j.useEffect(()=>{L==="rapha_doctors"?(async()=>{var m,O,f;try{_(X=>({...X,specializations:!0}));const x=await R(gs({filtersNeeded:["category_ids"]}));if(x!=null&&x.error){P.error(((m=x==null?void 0:x.error)==null?void 0:m.message)||"Unknown Error Occured");return}else p(((f=(O=x.payload)==null?void 0:O.data)==null?void 0:f.category_ids)||[])}catch{P.error("unknown error occured")}finally{_(x=>({...x,specializations:!1}))}})():p([])},[R,L]),j.useEffect(()=>{i?(K("rapha_prefered_doctors"),S(t=>({...t,consultation:{...t.consultation,consultType:"rapha"}}))):(K(w?"rapha_doctors":"associated_doctors"),S(t=>({...t,consultation:{...t.consultation,consultType:"call"}})))},[i,w,S]);const h=j.useCallback((t,m)=>{S(O=>({...O,consultation:Ye(t,m,O.consultation)}))},[S]),y=j.useCallback(async(t="")=>{var m,O,f;try{if(_(x=>({...x,doctors:!0})),L==="rapha_doctors"){const x=await R(ws({filters:{count:10,...b.consultType==="opd"?{availabilities:!0}:{},searchText:t,status:["approved"],category_ids:Array.isArray(b.selectedSpecialization)?b.selectedSpecialization:[],client_id:null,...b.consultType==="opd"?{type:[b.consultType]}:{},...["call","chat","video","instant"].includes(b.consultType)?{virtual_type:[b.consultType]}:{}}}));x!=null&&x.error?P.error(((m=x.error)==null?void 0:m.message)||"unknown error occured"):o((f=(O=x==null?void 0:x.payload)==null?void 0:O.data)==null?void 0:f.doctors)}else L==="rapha_prefered_doctors"&&o(Tt)}catch(x){console.error("Error fetching users:",x),P.error("Failed to fetch team members.")}finally{_(x=>({...x,doctors:!1}))}},[b.consultType,R,b.selectedSpecialization,L]),T=j.useCallback(async(t="")=>{var m,O,f,x,X;try{_(G=>({...G,doctors:!0}));const W=await R(lt({clientId:D??""}));if(W!=null&&W.error){P.error(((m=W==null?void 0:W.error)==null?void 0:m.message)||"Unknown Error Occured");return}else o(((X=(x=(f=(O=W==null?void 0:W.payload)==null?void 0:O.data)==null?void 0:f.associatedDoctors)==null?void 0:x[0])==null?void 0:X.doctors)||[])}catch(W){console.error("Error fetching users:",W),P.error("Failed to fetch team members.")}finally{_(W=>({...W,doctors:!1}))}},[R,D]),q=j.useCallback(async()=>{var m,O,f;const t=(m=b.selectedDoctor)==null?void 0:m.id;if(!t){P.error("Please select a doctor first for getting clinics");return}try{_(X=>({...X,clinics:!0}));const x=await R(Ts({id:t}));if(x!=null&&x.error){P.error(((O=x==null?void 0:x.error)==null?void 0:O.message)||"Unknown Error Occured");return}else((f=x==null?void 0:x.payload)==null?void 0:f.length)===0&&P.error("No clinics found for this doctor please select another doctor"),c((x==null?void 0:x.payload)||[])}catch{P.error("unknown error occured")}finally{_(x=>({...x,clinics:!1}))}},[R,(F=b.selectedDoctor)==null?void 0:F.id]),E=async t=>{var m,O,f;if(!t){P.error("Please select a date first");return}try{_(X=>({...X,timeSlots:!0}));const x=await R(hs({date:t,vendorId:1}));if(x!=null&&x.error){P.error(((m=x==null?void 0:x.error)==null?void 0:m.message)||"Unknown Error Occured");return}k(((f=(O=x==null?void 0:x.payload)==null?void 0:O.data)==null?void 0:f.timeslots)??[])}catch(x){P.error("unknown error occured"),console.error(x)}finally{_(x=>({...x,timeSlots:!1}))}},$=j.useCallback(async t=>{var x,X,W;if(!t){P.error("Please select a date first");return}const m=b.selectedDoctor;let O=((x=m==null?void 0:m.doctorDetails)==null?void 0:x.id)||(m!=null&&m.roles&&m.roles.length>0?m.roles[0].linkable_id:null)||((X=m==null?void 0:m.roleDoctor)==null?void 0:X.linkable_id)||(m==null?void 0:m.id);if(!O){P.error("Please select a doctor first");return}const f=t;try{_(te=>({...te,timeSlots:!0}));const G=await R(Cs({id:O,type:b.consultType,date:f}));if(G!=null&&G.error){P.error(((W=G==null?void 0:G.error)==null?void 0:W.message)||"Unknown Error Occured");return}k(G==null?void 0:G.payload)}catch(G){P.error("unknown error occured"),console.error(G)}finally{_(G=>({...G,timeSlots:!1}))}},[R,b.consultType,b.selectedDoctor]),z=j.useCallback(t=>{t?h("selectedDate",ue(t).format("YYYY-MM-DD")):h("selectedDate",null),s!=null&&s.date&&g(m=>({...m,date:null}))},[h,s==null?void 0:s.date,g]),I=j.useCallback((t,m)=>{const O=(m==null?void 0:m.originalItem)||null;S(f=>({...f,consultation:{...f.consultation,selectedDoctor:O,selectedDate:null,selectedTimeSlot:null,selectedVendor:null}})),s.doctor&&O&&g(f=>({...f,doctor:null}))},[S,s.doctor,g]),a=t=>{h("selectedSpecialization",t)};j.useEffect(()=>{H.some(m=>{var O;return((O=b.selectedDoctor)==null?void 0:O.id)===(m==null?void 0:m.id)})||h("selectedDoctor",null)},[H,b.selectedDoctor,h]),j.useEffect(()=>{["rapha_doctors","rapha_prefered_doctors"].includes(L)?y():L==="associated_doctors"&&T()},[b.consultType,R,L,y,T]),j.useEffect(()=>{var t;b.consultType==="opd"&&((t=b.selectedDoctor)!=null&&t.id)&&q()},[b.selectedDoctor,b.consultType,q]),j.useEffect(()=>{b.selectedDoctor&&b.selectedDate&&(["associated_doctors","rapha_doctors"].includes(L)?$(b.selectedDate):L==="rapha_prefered_doctors"&&E(b.selectedDate))},[b.selectedDoctor,b.selectedDate,$,L]);const l=j.useMemo(()=>{var t,m,O,f,x,X,W,G,te,re,ce,se,ae,ie,ke;return[{title:`Morning (${((O=(m=(t=r==null?void 0:r[0])==null?void 0:t.timeslots)==null?void 0:m.morning)==null?void 0:O.length)??0} slots)`,slots:((x=(f=r==null?void 0:r[0])==null?void 0:f.timeslots)==null?void 0:x.morning)||[]},{title:`Afternoon (${((G=(W=(X=r==null?void 0:r[0])==null?void 0:X.timeslots)==null?void 0:W.afternoon)==null?void 0:G.length)??0} slots)`,slots:((re=(te=r==null?void 0:r[0])==null?void 0:te.timeslots)==null?void 0:re.afternoon)||[]},{title:`Evening (${((ae=(se=(ce=r==null?void 0:r[0])==null?void 0:ce.timeslots)==null?void 0:se.evening)==null?void 0:ae.length)??0} slots)`,slots:((ke=(ie=r==null?void 0:r[0])==null?void 0:ie.timeslots)==null?void 0:ke.evening)||[]}]},[r]),d=j.useMemo(()=>H==null?void 0:H.filter(t=>(t==null?void 0:t.id)!==null).map(t=>{var m,O;return{label:`${((m=t==null?void 0:t.user)==null?void 0:m.first_name)||""} ${((O=t==null?void 0:t.user)==null?void 0:O.last_name)||""}`,value:t==null?void 0:t.id,originalItem:t}}),[H]),u=j.useMemo(()=>H==null?void 0:H.map(t=>({label:`${(t==null?void 0:t.name)||""} - ${(t==null?void 0:t.specialization)||""}`,value:t.id,originalItem:t})),[H]),A=j.useMemo(()=>C==null?void 0:C.map(t=>{var m,O;return{value:(m=t==null?void 0:t.vendor)==null?void 0:m.id,originalItem:t==null?void 0:t.vendor,label:`${(O=t==null?void 0:t.vendor)==null?void 0:O.name}`}}),[C]);return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 mt-3",children:e.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[!i&&ps.includes(b.consultType)&&e.jsxs(pe,{title:e.jsxs(U,{children:[e.jsx(js,{className:"text-blue-500"}),e.jsx("span",{children:"Select Consultation Type"}),s.consultType&&e.jsx("span",{className:"text-red-500",children:"please select a consultation type"})]}),className:`shadow-md ${s.consultType?"!border-red-500":""}`,children:[e.jsx(ee,{type:"secondary",className:"block mb-4",children:"Choose how you'd like to consult with your doctor"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Ct.filter(t=>N.has(t==null?void 0:t.type)).map(t=>e.jsx(_e,{onClick:()=>h("consultType",t.value),className:`h-10 px-4 py-3 !rounded-full flex items-center justify-center focus:outline-none !shadow-md ${b.consultType===t.value?"!bg-[#222E62] text-white":"bg-white text-[#222E62] border border-[#222E62] hover:bg-opacity-10 hover:bg-[#222E62]"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.consultType===t.value&&e.jsx("span",{className:"w-1 h-1 inline-block bg-white rounded-full"}),e.jsx(ee,{strong:!0,className:`${b.consultType===t.value?"text-white":"text-[#222E62]"}`,children:t.label})]})},t.value))})]}),e.jsxs(pe,{title:e.jsxs(U,{children:[e.jsx(Ns,{className:"text-green-500"}),e.jsx("span",{children:"Doctor Selection Preference"})]}),className:`shadow-md ${s.doctor?"!border-red-500":""}`,children:[L==="rapha_doctors"&&e.jsxs("div",{children:[e.jsx(ee,{strong:!0,className:"block mb-2",children:"Filter by Specialization"}),e.jsx(ne,{placeholder:"Select one or more specializations to filter doctors",mode:"multiple",showSearch:!0,suffixIcon:M.specializations?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:Array.isArray(b.selectedSpecialization)?b.selectedSpecialization:[],loading:M.specializations,options:J==null?void 0:J.map(t=>({label:t==null?void 0:t.name,value:(t==null?void 0:t.id)??(t==null?void 0:t.value)})),filterOption:(t,m)=>((m==null?void 0:m.label)??"").toLowerCase().includes(t.toLowerCase()),onChange:a})]}),b.consultType&&ps.includes(b.consultType)&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{type:"secondary",className:"block mb-4",children:["rapha_doctors","rapha_prefered_doctors"].includes(L)?"Choose from available doctors on the platform":"Select from your associated doctors"}),L==="associated_doctors"?e.jsxs("div",{children:[e.jsx(ee,{strong:!0,className:"block mb-2",children:"Search Your Doctors"}),e.jsx(ne,{status:s.doctor?"error":"",placeholder:"Type to search and select a doctor from your team",showSearch:!0,suffixIcon:M.doctors?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:(Y=b.selectedDoctor)==null?void 0:Y.id,loading:M.doctors,onSearch:T,options:d,filterOption:!1,onChange:I,optionRender:t=>{var m,O,f,x;return e.jsxs("div",{className:"flex items-center py-2",children:[e.jsx("img",{src:((O=(m=t==null?void 0:t.data)==null?void 0:m.originalItem)==null?void 0:O.image)??"https://placehold.co/40x40",alt:`Dr. ${t==null?void 0:t.label}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t==null?void 0:t.label}),e.jsx("div",{className:"text-xs text-gray-600",children:((x=(f=t==null?void 0:t.data)==null?void 0:f.originalItem)==null?void 0:x.specialization)??"General Practice"})]})]})}}),s.doctor&&e.jsx(ee,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a doctor"})]}):e.jsx(U,{direction:"vertical",size:"middle",className:"w-full",children:e.jsxs("div",{children:[e.jsx(ee,{strong:!0,className:"block mb-2",children:"Select Doctor"}),e.jsx(ne,{status:s.doctor?"error":"",placeholder:"Search and select a doctor from the platform",showSearch:!0,suffixIcon:M.doctors?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:(Q=b.selectedDoctor)==null?void 0:Q.id,loading:M.doctors,onSearch:t=>{clearTimeout(V.current.doctors),V.current.doctors=setTimeout(()=>{y(t)},200)},options:u,filterOption:!1,onChange:I,optionRender:t=>{var m,O,f,x;return e.jsxs("div",{className:"flex items-center py-2",children:[e.jsx("img",{src:((O=(m=t==null?void 0:t.data)==null?void 0:m.originalItem)==null?void 0:O.image)??"https://placehold.co/40x40",alt:`Dr. ${t==null?void 0:t.label}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t==null?void 0:t.label}),e.jsx("div",{className:"text-xs text-gray-600",children:((x=(f=t==null?void 0:t.data)==null?void 0:f.originalItem)==null?void 0:x.specialization)??"General Practice"})]})]})}}),s.doctor&&e.jsx(ee,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a doctor"})]})})]})]}),b.selectedDoctor&&e.jsxs(pe,{title:e.jsxs(U,{children:[e.jsx(je,{className:"text-pink-500"}),e.jsx("span",{children:"Schedule Appointment"})]}),className:`shadow-md ${s.date||s!=null&&s.timeSlot?"!border-red-500":""}`,children:[e.jsx(ee,{type:"secondary",className:"block !mb-6",children:"Select your preferred date and time for the consultation"}),e.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[b.consultType==="opd"&&e.jsxs("div",{children:[e.jsx(ee,{strong:!0,className:"block mb-2",children:"Select OPD-Clinic"}),e.jsx(ne,{status:s.vendor?"error":"",placeholder:"Select a clinic",suffixIcon:M.clinics?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:(B=b.selectedVendor)==null?void 0:B.id,loading:M.clinics,options:A,filterOption:!1,onChange:(t,m)=>{const O=(m==null?void 0:m.originalItem)||null;h("selectedVendor",O)},optionRender:t=>{var m,O,f,x,X,W,G,te;return e.jsxs("div",{className:"flex items-center py-2 gap-2",children:[e.jsx("img",{src:((O=(m=t==null?void 0:t.data)==null?void 0:m.originalItem)==null?void 0:O.image)||"https://placehold.co/40x40",alt:`${(x=(f=t==null?void 0:t.data)==null?void 0:f.originalItem)==null?void 0:x.name}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(W=(X=t==null?void 0:t.data)==null?void 0:X.originalItem)==null?void 0:W.name}),e.jsx("div",{className:"text-xs text-gray-600",children:((te=(G=t==null?void 0:t.data)==null?void 0:G.originalItem)==null?void 0:te.address)??"Address not availabe"})]})]})}}),s.vendor&&e.jsx(ee,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a Clinic"})]}),e.jsxs("div",{children:[e.jsxs(ee,{strong:!0,className:"block !mb-3",children:[e.jsx(je,{className:"!mr-2"}),"Select Date"]}),e.jsx(ks,{status:s!=null&&s.date?"error":"",onChange:z,value:b.selectedDate?ue(b.selectedDate):null,size:"large",className:"w-[300px]",placeholder:"Choose appointment date",disabledDate:t=>t&&t<ue().startOf("day")}),(s==null?void 0:s.date)&&e.jsx(ee,{strong:!0,className:"block !text-red-500",children:"please select a date"})]}),e.jsxs("div",{children:[e.jsxs(ee,{strong:!0,className:"block !mb-3",children:[e.jsx(ve,{className:"!mr-2"}),"Available Time Slots",(s==null?void 0:s.timeSlot)&&e.jsx("span",{className:"text-red-500 !ml-2",children:"(please select a timeslot)"})]}),["associated_doctors","rapha_doctors"].includes(L)&&(M.timeSlots?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsxs(U,{size:"middle",children:[e.jsx(oe,{indicator:e.jsx(Be,{spin:!0}),size:"large"}),e.jsx(ee,{className:"text-base",children:"Loading available time slots..."})]})}):b.selectedDate&&r?e.jsx(Ss,{size:"large",className:"bg-gray-50",children:l.map((t,m)=>{var O,f;return e.jsx(vt,{header:e.jsxs(U,{children:[e.jsx(ve,{className:"text-blue-500"}),e.jsx(ee,{strong:!0,children:t.title}),e.jsxs(ee,{type:"secondary",className:"text-xs",children:["(",((O=t.slots)==null?void 0:O.length)||0," slots available)"]})]}),children:e.jsx(ct,{gutter:[12,12],className:"max-w-3xl",children:((f=t.slots)==null?void 0:f.length)>0?t.slots.map(x=>e.jsx(is,{xs:12,sm:8,md:6,lg:4,children:e.jsx(_e,{type:b.selectedTimeSlot===x?"primary":"default",size:"large",className:`w-full h-12 font-medium ${b.selectedTimeSlot===x?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"}`,onClick:()=>{h("selectedTimeSlot",x),s!=null&&s.timeSlot&&x&&g(X=>({...X,timeSlot:null}))},children:x})},x)):e.jsx(is,{span:24,children:e.jsx(Ae,{message:"No time slots available for this period",type:"info",showIcon:!0,className:"text-center"})})})},m)})}):b.selectedDate?e.jsx(Ae,{message:"No time slots available",description:"Please try selecting a different date",type:"warning",showIcon:!0,className:"text-center p-10"}):e.jsx(Ae,{message:"Select a date first",description:"Choose an appointment date to view available time slots",type:"info",showIcon:!0,className:"text-center p-10"})),L==="rapha_prefered_doctors"&&(M.timeSlots?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsxs(U,{size:"middle",children:[e.jsx(oe,{indicator:e.jsx(Be,{spin:!0}),size:"large"}),e.jsx(ee,{className:"text-base",children:"Loading available time slots..."})]})}):b.selectedDate?r.length===0?e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(ve,{className:"text-2xl text-gray-400 mb-2"}),e.jsx(ee,{className:"block text-gray-500",children:"No time slots available for the selected date"})]}):e.jsx(fe,{layout:"vertical",children:e.jsxs(fe.Item,{label:e.jsx("span",{className:"font-semibold text-[#262626]",children:"Select Time Slot"}),className:"mb-0",children:[e.jsx(ne,{status:s.timeSlot?"error":"",placeholder:"Choose a time slot",size:"large",style:{width:"100%"},value:b.selectedTimeSlot,onChange:t=>{h("selectedTimeSlot",t),t&&s.timeSlot&&g(m=>({...m,timeSlot:void 0}))},options:r.map(t=>({label:t==null?void 0:t.slot,value:t==null?void 0:t.slot})),notFoundContent:e.jsx("div",{className:"text-center py-2 text-gray-500",children:"No time slots available"})}),s.timeSlot&&e.jsx(ee,{strong:!0,className:"block mb-2 !text-red-500",children:s.timeSlot})]})}):e.jsxs("div",{className:"text-center !py-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(je,{className:"text-2xl text-gray-400 mb-2"}),e.jsx(ee,{className:"block text-gray-500",children:"Please select a date first to view available time slots"})]}))]})]})]})]})})},It=Le.memo(Ot),{Title:zt,Text:me}=we,xs={id:1,name:"Raphacure Preferred Vendor",phone:"95551 66000",address:"We will select the nearest vendor for you!",city:"Nearby",zip:560102,slot_start_time:"07:00:00",slot_end_time:"19:00:00",week_off_days:"0",type:"pathology_lab",parent_id:null,mapped_pin_codes:"500075,500034,",image:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/wa-default.png",rating:null,status:"requested",old_users_data:null,created_at:null,updated_at:"2025-04-25T05:18:27.456Z",state:"karnataka",search_keys:"Raphacure Preferred Vendor",instant_pin_codes:null,facilities:[],services:[],default_consultation_cost:0,available_in_90:!1,collection_type:"center",address1:null,address2:null,latitude:null,longitude:null,primary_email:"wellness@raphacure.com",secondary_email:null,created_by:null,spoc_contact_first_name:null,spoc_contact_last_name:null,spoc_contact_phone_no:null,spoc_contact_email:null,spoc_contact_office_no:null,spoc_contact_designation:null,marketplace_name:"raphacure",gst_number:null,secondary_phone:null,registration_details:null,vendor_client_id:null,is_premium:!1,country_code:null,price:{actual_cost:1200,discount_percentage:0,service_charges:0,discounted_price:1200}},At=({setFormData:n,formData:S,consultType:s,validationErrors:g,setValidationErrors:N,selectedClient:v})=>{var q,E,$,z,I,a;const i=S==null?void 0:S.tests,[w,V]=j.useState([]),{linkableId:b}=Ne(),R=be(),[L,K]=Le.useState([]),[D,H]=j.useState([]),[o,r]=Le.useState({testsList:!1,vendorsList:!1,timeSLots:!1});j.useEffect(()=>{K([]),H([])},[s]),j.useEffect(()=>{var l;if(b==="58ac0845-98d5-411e-aa3e-9490d7fcde1f")V([xs]),h("selectedVendor",null);else if(((l=i.selectedTest)==null?void 0:l.length)>0){const d=v.packages.find(u=>{var A,F;return u.service_code===((F=(A=i.selectedTest)==null?void 0:A[0])==null?void 0:F.service_code)});V([xs,...Array.isArray(d==null?void 0:d.vendors)?d.vendors.filter(u=>!(u!=null&&u.is_parent)):[]]),h("selectedVendor",null)}else V([]),h("selectedVendor",null)},[i.selectedTest,v.packages]),j.useEffect(()=>{switch(s){case"labpackage":C();break;case"labtest":c();break;case"radiology":J();break}},[s,R]),j.useEffect(()=>{i!=null&&i.selectedDate&&(k(i==null?void 0:i.selectedDate),h("selectedTimeSlot",null))},[i.selectedDate,R,i.selectedVendor]);const k=async l=>{var d,u,A,F,Y;if(!((d=i.selectedVendor)!=null&&d.id)){P.error("Please select a vendor to get timeslots");return}if(!l){P.error("Please select a date first");return}try{r(B=>({...B,timeSLots:!0}));const Q=await R(hs({date:l,vendorId:((u=i.selectedVendor)==null?void 0:u.id)??1}));if(Q!=null&&Q.error){P.error(((A=Q==null?void 0:Q.error)==null?void 0:A.message)||"Unknown Error Occured");return}H(((Y=(F=Q==null?void 0:Q.payload)==null?void 0:F.data)==null?void 0:Y.timeslots)??[])}catch(Q){P.error("unknown error occured"),console.error(Q)}finally{r(Q=>({...Q,timeSLots:!1}))}},C=async(l="")=>{try{r({...o,testsList:!0}),K(v.packages)}catch{P.error("Something went wrong")}finally{r({...o,testsList:!1})}},c=async(l="")=>{var d,u,A;try{r(Q=>({...Q,testsList:!0}));const Y=await R(os({filters:{categoryIds:[],count:20,page:1,searchText:l}}));if(Y!=null&&Y.error){P.error(((u=(d=Y==null?void 0:Y.error)==null?void 0:d.data)==null?void 0:u.message)??"Something went wrong");return}else K((A=Y==null?void 0:Y.payload)==null?void 0:A.data)}catch{P.error("Something went wrong")}finally{r(F=>({...F,testsList:!1}))}},J=async(l="")=>{var d,u,A;try{r(Q=>({...Q,testsList:!0}));const Y=await R(os({filters:{searchText:l,categoryIds:[],testType:"ctmri",count:20,page:1,active_status:"active"}}));if(Y!=null&&Y.error){P.error(((u=(d=Y==null?void 0:Y.error)==null?void 0:d.data)==null?void 0:u.message)??"Something went wrong");return}else K((A=Y==null?void 0:Y.payload)==null?void 0:A.data)}catch{P.error("Something went wrong")}finally{r(F=>({...F,testsList:!1}))}},p=async l=>{switch(s){case"labpackage":C(l);break;case"labtest":c(l);break;case"radiology":J(l);break}},M=l=>{n(d=>{var u;return{...d,tests:{...d.selectedTest,selectedTest:Array.isArray(l)?(u=l==null?void 0:l.map)==null?void 0:u.call(l,A=>A==null?void 0:A.originalItem):[l==null?void 0:l.originalItem]}}}),(g!=null&&g.vendor||g!=null&&g.test)&&N(d=>({...d,test:l?null:d.selectedTest}))},_=l=>{l?h("selectedDate",ue(l).format("YYYY-MM-DD")):h("selectedDate",null),l&&(g!=null&&g.date)&&N(d=>({...d,date:null}))},h=(l,d)=>{n(u=>({...u,tests:Ye(l,d,u.tests)}))},T=(()=>{switch(s){case"labpackage":return{title:"Lab Packages",placeholder:"Search Lab Packages...",icon:e.jsx(js,{}),mode:void 0,color:"#1677ff;"};case"labtest":return{title:"Lab Tests",placeholder:"Search Lab Tests...",icon:e.jsx(et,{}),mode:"multiple",color:"#1677ff;"};case"radiology":return{title:"Radiology Tests",placeholder:"Search Radiology Tests...",icon:e.jsx(Es,{}),mode:"multiple",color:"#1677ff;"};default:return null}})();return!["labpackage","labtest","radiology"].includes(s)||!T?null:e.jsxs("div",{className:"max-w-screen-xl mx-auto px-2 !mt-[22px]",children:[e.jsx(pe,{className:"search-component-card",style:{marginBottom:24,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:"8px",border:`1px solid ${T.color}20`},children:e.jsxs(U,{direction:"vertical",size:"middle",className:"w-full",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"text-[18px]",style:{color:T.color},children:T.icon}),e.jsx(zt,{className:"text-nowrap m-0",level:4,style:{color:T.color},children:T.title})]})}),e.jsx(me,{type:"secondary",children:s==="labpackage"?"Select a comprehensive lab package for multiple health checks":`Search and select ${s==="labtest"?"individual lab tests":"radiology examinations"} as needed`}),e.jsx(fe,{layout:"vertical",children:e.jsxs(fe.Item,{label:e.jsxs("span",{className:"font-semibold text-[#262626]",children:[T.title," Selection"]}),className:"mb-0",children:[e.jsx(ne,{status:g.test?"error":"",placeholder:T.placeholder,mode:T.mode,size:"large",loading:o==null?void 0:o.testsList,showSearch:!0,allowClear:!0,filterOption:!1,suffixIcon:o!=null&&o.testsList?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:T.color}}),style:{width:"100%"},onSearch:async l=>{p(l)},options:L==null?void 0:L.map(l=>({label:l.service_name,value:l.service_code,originalItem:l})),optionRender:l=>{var d,u;return e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"font-medium text-[#262626]",children:[e.jsx("img",{src:((u=(d=l.data.originalItem)==null?void 0:d.image)==null?void 0:u[0])??"https://placehold.co/40x40",alt:l.data.originalItem.service_name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 !mr-3"}),l.data.originalItem.service_name]}),l.data.originalItem.service_code&&e.jsxs("div",{className:"text-xs text-[#8c8c8c]",children:["Code: ",l.data.originalItem.service_code]})]})},onChange:(l,d)=>{M(d)},value:Array.isArray(i.selectedTest)?(q=i.selectedTest)==null?void 0:q.map(l=>l==null?void 0:l.service_code):(E=i.selectedTest)==null?void 0:E.service_code}),g.test&&e.jsx(me,{strong:!0,className:"block mb-2 !text-red-500",children:g.test})]})}),e.jsx(fe,{layout:"vertical",children:e.jsxs(fe.Item,{label:e.jsxs("span",{className:"font-semibold text-[#262626]",children:[T.title," Vendor Selection"]}),className:"mb-0",children:[e.jsx(ne,{placeholder:"Select Vendor",size:"large",status:g.vendor?"error":"",loading:o==null?void 0:o.vendorsList,showSearch:!0,allowClear:!0,disabled:!((z=($=i.selectedTest)==null?void 0:$[0])!=null&&z.service_code),filterOption:!1,suffixIcon:o!=null&&o.testsList?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:T.color}}),className:"w-full",options:(I=w==null?void 0:w.map)==null?void 0:I.call(w,l=>({label:l==null?void 0:l.name,value:l==null?void 0:l.id,originalItem:l})),value:(a=i.selectedVendor)==null?void 0:a.id,onChange:l=>{h("selectedVendor",w.find(d=>d.id===l)),g.vendor&&N(d=>({...d,vendor:null}))}}),g.vendor&&e.jsx(me,{strong:!0,className:"block mb-2 !text-red-500",children:g.vendor})]})})]})}),i.selectedTest&&e.jsxs(pe,{title:e.jsxs(U,{children:[e.jsx(je,{className:"text-pink-500"}),e.jsx("span",{children:"Schedule Appointment"})]}),className:"shadow-md",children:[e.jsx(me,{type:"secondary",className:"block mb-6",children:"Select your preferred date and time for the consultation"}),e.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs("div",{children:[e.jsxs(me,{strong:!0,className:"block mb-3",children:[e.jsx(je,{className:"!mr-2"}),"Select Date"]}),e.jsx(ks,{status:g.date?"error":"",onChange:_,value:i.selectedDate?ue(i.selectedDate):null,size:"large",className:"w-[300px]",placeholder:"Choose appointment date",disabledDate:l=>{const u=ue().startOf("day").add(1,"day");return l&&l<u.add(1,"day")||l&&l.day()===0}}),g.date&&e.jsx(me,{strong:!0,className:"block mb-2 !text-red-500",children:g.date})]}),e.jsxs("div",{children:[e.jsxs(me,{strong:!0,className:"block mb-3",children:[e.jsx(ve,{className:"!mr-2"}),"Available Time Slots"," ",g.timeSlot&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",g.timeSlot,")"]})]}),o.timeSLots?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsxs(U,{size:"middle",children:[e.jsx(oe,{indicator:e.jsx(Be,{spin:!0}),size:"large"}),e.jsx(me,{className:"text-base",children:"Loading available time slots..."})]})}):i.selectedDate?D.length===0?e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(ve,{className:"text-2xl text-gray-400 mb-2"}),e.jsx(me,{className:"block text-gray-500",children:"No time slots available for the selected date"})]}):e.jsx(fe,{layout:"vertical",children:e.jsxs(fe.Item,{label:e.jsx("span",{className:"font-semibold text-[#262626]",children:"Select Time Slot"}),className:"mb-0",children:[e.jsx(ne,{status:g.timeSlot?"error":"",placeholder:"Choose a time slot",size:"large",style:{width:"100%"},value:i.selectedTimeSlot,onChange:l=>{h("selectedTimeSlot",l),l&&g.timeSlot&&N(d=>({...d,timeSlot:void 0}))},options:D.filter(l=>{if(!(l!=null&&l.start_time))return!1;const d=Oe(l.start_time,"HH:mm:ss"),u=Oe("11:00:00","HH:mm:ss");return d.isBefore(u)&&(l==null?void 0:l.duration_minutes)==60}).map(l=>({label:l==null?void 0:l.slot,value:l==null?void 0:l.slot})),notFoundContent:e.jsx("div",{className:"text-center py-2 text-gray-500",children:"No time slots available"})}),g.timeSlot&&e.jsx(me,{strong:!0,className:"block mb-2 !text-red-500",children:g.timeSlot})]})}):e.jsxs("div",{className:"text-center !py-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(je,{className:"text-2xl text-gray-400 mb-2"}),e.jsx(me,{className:"block text-gray-500",children:"Please select a date first to view available time slots"})]})]})]})]})]})},Pt=j.memo(At),{Text:$e}=we,$t=({validationErrors:n,formData:S,setFormData:s,setValidationErrors:g})=>{var H,o;const N=S.pharmacy,v=be(),i=j.useRef({medicineTimer:void 0}),[w,V]=j.useState({pharmacy:!1}),[b,R]=j.useState([]);j.useEffect(()=>{L()},[v]);const L=async(r="")=>{clearTimeout(i.current.medicineTimer),i.current.medicineTimer=setTimeout(async()=>{try{V(C=>({...C,pharmacy:!0}));const k=await v(dt({count:10,page:1,searchText:r}));k.error?P.error(k.payload.message||"Something went wrong"):R(k.payload.data)}catch{P.error("Something went wrong")}finally{V(k=>({...k,pharmacy:!1}))}},250)},K=(r,k)=>{s(C=>{const c=C.pharmacy.selectedMedicines||[];if(c.find(p=>p.item.service_code===r)){if(k===0){const M=c.filter(_=>_.item.service_code!==r);return{...C,pharmacy:{...C.pharmacy,selectedMedicines:M}}}const p=c.map(M=>M.item.service_code===r?{...M,quantity:k}:M);return{...C,pharmacy:{...C.pharmacy,selectedMedicines:p}}}return C})},D=(r,k)=>{const C=k.filter(c=>(c==null?void 0:c.originalItem)&&r.includes(c.value)).map(c=>({item:c.originalItem,quantity:1}));s(c=>{const p=(c.pharmacy.selectedMedicines||[]).filter(_=>r.includes(_.item.service_code)),M=C.filter(_=>!p.some(h=>h.item.service_code===_.item.service_code));return{...c,pharmacy:{...c.pharmacy,selectedMedicines:[...p,...M]}}}),r&&n.pharmacy&&g(c=>({...c,pharmacy:void 0}))};return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 mt-3",children:e.jsx(U,{direction:"vertical",size:"large",className:"w-full",children:e.jsxs(pe,{title:e.jsxs(U,{children:[e.jsx(us,{className:"text-green-500"}),e.jsx("span",{children:"Medicine Selection"})]}),className:`shadow-md ${n.pharmacy?"!border-red-500":""}`,children:[e.jsxs(e.Fragment,{children:[e.jsx($e,{type:"secondary",className:"block mb-4",children:"Select from Medicines from the list"}),e.jsxs("div",{children:[e.jsx($e,{strong:!0,className:"block mb-2",children:"Search Your Medicines"}),e.jsx(ne,{status:n.pharmacy?"error":"",placeholder:"Type to search and select a medicines from the list",showSearch:!0,suffixIcon:w.pharmacy?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:"#1677ff"}}),mode:"multiple",size:"large",className:"w-full",value:(H=N.selectedMedicines)==null?void 0:H.map(r=>{var k;return(k=r==null?void 0:r.item)==null?void 0:k.service_code}),loading:w.pharmacy,onSearch:r=>L(r),options:b.map(r=>({label:`${(r==null?void 0:r.service_name)??(r==null?void 0:r.service_code)}`,value:r==null?void 0:r.service_code,originalItem:r})),filterOption:!1,onChange:D,optionRender:r=>{var k,C,c,J,p;return e.jsxs("div",{className:"flex items-center py-2",children:[e.jsx("img",{src:((c=(C=(k=r==null?void 0:r.data)==null?void 0:k.originalItem)==null?void 0:C.image)==null?void 0:c[0])??e.jsx(us,{}),alt:`${r==null?void 0:r.label}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r==null?void 0:r.label}),e.jsx("div",{className:"text-xs text-gray-600",children:((p=(J=r==null?void 0:r.data)==null?void 0:J.originalItem)==null?void 0:p.company)??"company not available"})]})]})}}),n.pharmacy&&e.jsx($e,{strong:!0,className:"block mb-2 !text-red-500",children:n.pharmacy})]})]}),e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(o=N.selectedMedicines)==null?void 0:o.map((r,k)=>{var C;return e.jsx(at,{medicineDetail:r.item,sectionName:(C=r==null?void 0:r.item)==null?void 0:C.category_key,onCountChange:K},k)})})})]})})})},Rt=j.memo($t),Mt=j.memo(({reports:n,setReports:S,validationErrors:s,setValidationErrors:g})=>{var D,H,o,r,k,C,c,J,p,M;const[N,v]=j.useState(!1),[i,w]=j.useState(!1),[V,b]=j.useState(""),R=_=>{b(_),w(!0)},L=()=>{v(!1)},K=_=>{var h;if(Array.isArray(n==null?void 0:n.urls)&&((h=n==null?void 0:n.urls)==null?void 0:h.length)>_){const y=[...n.urls];y.splice(_,1),S("urls",y)}};return e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2",children:["Upload Reports"," ",((D=s==null?void 0:s.secondOpinion)==null?void 0:D.reports)&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",(H=s==null?void 0:s.secondOpinion)==null?void 0:H.reports,")"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row mt-3 mb-5 w-full gap-6",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full",children:((o=n==null?void 0:n.urls)==null?void 0:o.length)>0?(r=n==null?void 0:n.urls)==null?void 0:r.map((_,h)=>e.jsxs("div",{className:"flex items-center p-2 bg-slate-100 border border-gray-300 rounded-md",children:[e.jsx("span",{children:e.jsx(Qs,{url:_,openPreview:R,handleRemoveFile:()=>K(h),fileContainerClassName:"w-[80px] h-[80px]"})}),e.jsxs("div",{className:"flex-grow !ml-2",children:[e.jsx("h6",{className:"font-medium text-sm",children:_==null?void 0:_.name}),e.jsx("p",{className:"text-xs text-gray-600",children:_.description})]}),e.jsx("button",{onClick:()=>K(h),className:"text-red-500 hover:text-red-700",children:e.jsx(ot,{color:"#FF0000"})})]},_==null?void 0:_.index)):e.jsx("div",{className:"flex justify-center items-center h-full border border-gray-300 rounded-md text-gray-500",children:e.jsx("p",{children:"No reports Added"})})}),e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs(Ft,{onClick:()=>v(!0),children:[e.jsx("img",{className:"uploadIcon",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/111904-1743769172669.png",alt:""}),e.jsx("div",{children:e.jsx("span",{className:"chooseFile",children:"Add a report"})})]})}),e.jsxs(de,{open:N,handleClose:()=>v(!1),title:"Upload Medical Report",width:"600px",children:[e.jsx(de.Body,{children:e.jsx(nt,{acceptType:["jpeg","png","pdf"],fileUrls:Array.isArray(n==null?void 0:n.urls)?n==null?void 0:n.urls:[],setFileUrls:_=>{var h;S("urls",_),(h=s==null?void 0:s.secondOpinion)!=null&&h.reports&&_&&g({...s,secondOpinion:{...s.secondOpinion,reports:""}})},mode:"multiple"})}),e.jsx(de.Footer,{children:e.jsx("div",{className:"flex justify-end",children:e.jsx(Te,{onClick:L,children:"Add Report"})})})]}),e.jsx(Xs,{previewOpen:i,closePreview:()=>w(!1),previewFile:V})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2",children:["Primary Contact Number"," ",((k=s==null?void 0:s.secondOpinion)==null?void 0:k.phone)&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",(C=s==null?void 0:s.secondOpinion)==null?void 0:C.phone,")"]})]}),e.jsx("input",{type:"tel",value:n==null?void 0:n.phone,onChange:_=>{var y;const h=_.target.value.replace(/\D/g,"").slice(0,10);S("phone",h),(y=s==null?void 0:s.secondOpinion)!=null&&y.phone&&h&&g({...s,secondOpinion:{...s.secondOpinion,phone:""}})},placeholder:"Enter primary contact number",maxLength:10,className:`px-3 py-2 border ${(c=s==null?void 0:s.secondOpinion)!=null&&c.phone?"!border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2",children:"Alternate Person Phone Number"}),e.jsx("input",{type:"tel",value:n==null?void 0:n.alternate_phone,onChange:_=>{var y;const h=_.target.value.replace(/\D/g,"").slice(0,10);S("alternate_phone",h),(y=s==null?void 0:s.secondOpinion)!=null&&y.phone&&h&&g({...s,secondOpinion:{...s.secondOpinion,phone:""}})},placeholder:"Enter alternate person phone number",maxLength:10,className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2",children:["Comments"," ",((J=s==null?void 0:s.secondOpinion)==null?void 0:J.comments)&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",(p=s==null?void 0:s.secondOpinion)==null?void 0:p.comments,")"]})]}),e.jsx("textarea",{value:n==null?void 0:n.comments,onChange:_=>{var h;S("comments",_.target.value),(h=s==null?void 0:s.secondOpinion)!=null&&h.comments&&_.target.value&&g({...s,secondOpinion:{...s.secondOpinion,comments:""}})},placeholder:"Enter any additional comments",rows:4,className:`px-3 py-2 border ${(M=s==null?void 0:s.secondOpinion)!=null&&M.comments?"!border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical`})]})]})]})}),Ft=Ie.div`
  border: 1px dashed #7291f4;
  border-radius: 25px;
  padding: 35px;
  cursor: pointer;
  text-align: center;
  background-color: white;
  transition: all 0.3s ease;

  &:hover {
    background-color: #f5f8ff;
  }

  .uploadIcon {
    width: 60px;
    height: 51px;
    margin-bottom: 10px;
  }

  .chooseFile {
    font-weight: 500;
    border-bottom: 1px solid #252b61;
  }

  p {
    color: #888888;
    font-weight: 400;
    font-size: 14px;
    letter-spacing: 1.5px;
    margin-top: 8px;
  }
`,{Text:he}=we,Re=[{id:102,name:"Cardiology"},{id:115,name:"Oncology"},{id:103,name:"Orthopedics"},{id:105,name:"Neurology"},{id:104,name:"Gastroenterology"},{id:88,name:"General Surgery"}],Me=Re==null?void 0:Re.map(n=>n==null?void 0:n.id),Lt=({formData:n,setFormData:S,validationErrors:s,setValidationErrors:g})=>{var J,p,M,_,h,y,T,q,E,$,z,I;j.useRef({doctors:void 0});const N=n.secondOpinion,v=be(),[i,w]=j.useState("doctors"),[V,b]=j.useState([]),[R,L]=j.useState([]),[K,D]=j.useState([]),[H,o]=j.useState({doctors:!1,categories:!1}),r=()=>{S(a=>({...a,secondOpinion:{selectedDoctor:null,selectedVendor:null,selectedCategory:null,urls:null,phone:null,comments:null,alternate_phone:null}}))};j.useEffect(()=>{k("",K,i)},[v,i,K]),j.useEffect(()=>{C(),r()},[]);const k=async(a="",l,d="doctors")=>{var u,A,F,Y,Q;if(d==="doctors")try{o(t=>({...t,doctors:!0}));const B=await v(ws({filters:{count:10,searchText:a,is_doctor_second_opinion:!0,status:["approved"],category_ids:Array.isArray(l)?l:[],client_id:null}}));B!=null&&B.error?(P.error(((u=B==null?void 0:B.error)==null?void 0:u.message)||"Unknown Error Occured"),b([])):b((F=(A=B==null?void 0:B.payload)==null?void 0:A.data)==null?void 0:F.doctors)}catch(B){console.error("Error fetching users:",B),P.error("Failed to fetch team members."),b([])}finally{o(B=>({...B,doctors:!1}))}else if(d==="vendors")try{o(t=>({...t,doctors:!0}));const B=await v(As({filters:{page:1,count:10,is_international:!0,search_text:a}}));B!=null&&B.error?(P.error(((Y=B==null?void 0:B.error)==null?void 0:Y.message)||"Unknown Error Occured"),b([])):b((Q=B==null?void 0:B.payload)==null?void 0:Q.vendors)}catch(B){console.error("Error fetching users:",B),P.error("Failed to fetch team members."),b([])}finally{o(B=>({...B,doctors:!1}))}},C=async()=>{var a,l,d;try{o(A=>({...A,categories:!0}));const u=await v(gs({filtersNeeded:["category_ids"]}));if(u!=null&&u.error){P.error(((a=u==null?void 0:u.error)==null?void 0:a.message)||"Unknown Error Occured");return}L(((d=(l=u.payload)==null?void 0:l.data)==null?void 0:d.category_ids)||[])}catch{P.error("unknown error occured")}finally{o(u=>({...u,categories:!1}))}},c=(a,l)=>{S(d=>({...d,secondOpinion:Ye(a,l,d.secondOpinion)}))};return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 mt-3",children:e.jsxs(U,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs(pe,{title:e.jsxs(U,{children:[e.jsx(Ns,{className:"text-green-500"}),e.jsx("span",{children:"Doctor Selection Preference"})]}),className:`shadow-md ${s.doctor?"!border-red-500":""}`,children:[e.jsxs(e.Fragment,{children:[e.jsx(he,{type:"secondary",className:"block mb-4",children:"Choose between International Doctors and Hospitals"}),e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-lg",children:e.jsx(U,{size:"large",children:e.jsxs(e.Fragment,{children:[e.jsx(he,{strong:!0,className:i!=="doctors"?"!text-gray-600":"!text-blue-500",children:"Indian Second Opinion(Doctors)"}),e.jsx(it,{checked:i!=="doctors",onChange:a=>{r(),w(a?"vendors":"doctors")},size:"default"}),e.jsx(he,{strong:!0,className:i!=="doctors"?"!text-blue-500":"!text-gray-600",children:"International Secound Opinion(Hospitals)"})]})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(he,{strong:!0,className:"block mb-2",children:"Specializations"}),e.jsx(ne,{status:(J=s==null?void 0:s.secondOpinion)!=null&&J.category?"error":void 0,className:"w-full mb-2",id:"secoundOpinionSpec",placeholder:"Select specializations",loading:H.categories,value:i==="doctors"?K:N.selectedCategory,size:"large",suffixIcon:H.doctors?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:"#1677ff"}}),mode:i==="doctors"?"multiple":void 0,showSearch:!0,options:i==="vendors"?(p=R==null?void 0:R.filter(a=>Me==null?void 0:Me.includes(a==null?void 0:a.id)))==null?void 0:p.map(a=>({label:`${a==null?void 0:a.name}`,value:a.id})):R==null?void 0:R.map(a=>({label:`${a==null?void 0:a.name}`,value:a.id})),filterOption:(a,l)=>((l==null?void 0:l.label)??"").toLowerCase().includes(a.toLowerCase()),onChange:a=>{var l;i==="vendors"?(c("selectedCategory",a),(l=s==null?void 0:s.secondOpinion)!=null&&l.category&&a&&g(d=>({...d,secondOpinion:{...d.secondOpinion,category:void 0}}))):i==="doctors"&&D(a)}}),((M=s.secondOpinion)==null?void 0:M.category)&&e.jsx(he,{strong:!0,className:"block mb-2 !text-red-500",children:(_=s.secondOpinion)==null?void 0:_.category}),e.jsx(he,{strong:!0,className:"block mb-2",children:`Select ${i==="vendors"?"International Hospitals":"Doctors"} from Rapha Platform`}),e.jsx(ne,{className:"w-full",id:"secoundOpinionDoctor",placeholder:"Search and select a secound opinion doctor",showSearch:!0,status:i==="doctors"?(h=s==null?void 0:s.secondOpinion)!=null&&h.doctor?"error":void 0:(y=s==null?void 0:s.secondOpinion)!=null&&y.vendor?"error":void 0,size:"large",suffixIcon:H.doctors?e.jsx(oe,{size:"small"}):e.jsx(ge,{style:{color:"#1677ff"}}),loading:H.doctors,value:i==="doctors"?(T=N.selectedDoctor)==null?void 0:T.id:i==="vendors"?(q=N==null?void 0:N.selectedVendor)==null?void 0:q.id:null,onSearch:a=>k(a,K,i),options:i==="doctors"?V==null?void 0:V.map(a=>({label:`${(a==null?void 0:a.name)||""} - ${(a==null?void 0:a.specialization)||""}`,value:a.id,originalItem:a})):V==null?void 0:V.map(a=>({label:`${(a==null?void 0:a.name)||""} - ${(a==null?void 0:a.specialization)||""}`,value:a.id,originalItem:a})),filterOption:!1,onChange:(a,l)=>{var d,u;if(i==="doctors"){const A=(l==null?void 0:l.originalItem)||null;S(F=>({...F,secondOpinion:{...F.secondOpinion,selectedDoctor:A,selectedVendor:null}})),(d=s==null?void 0:s.secondOpinion)!=null&&d.doctor&&a&&g(F=>({...F,secondOpinion:{...F.secondOpinion,doctor:void 0}}))}else if(i==="vendors"){const A=(l==null?void 0:l.originalItem)||null;S(F=>({...F,secondOpinion:{...F.secondOpinion,selectedDoctor:null,selectedVendor:A}})),(u=s==null?void 0:s.secondOpinion)!=null&&u.vendor&&a&&g(F=>({...F,secondOpinion:{...F.secondOpinion,vendor:void 0}}))}},optionRender:a=>{var l,d,u,A,F;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:((l=a==null?void 0:a.originalItem)==null?void 0:l.image)||((A=(u=(d=a==null?void 0:a.originalItem)==null?void 0:d.roleDoctor)==null?void 0:u.user)==null?void 0:A.image)||"https://placehold.co/40x40",alt:(F=a==null?void 0:a.originalItem)==null?void 0:F.name,className:"w-8 h-8 rounded-full mr-2 object-cover"}),e.jsx("span",{children:a==null?void 0:a.label})]})}}),i==="doctors"?((E=s.secondOpinion)==null?void 0:E.doctor)&&e.jsx(he,{strong:!0,className:"block mb-2 !text-red-500",children:($=s.secondOpinion)==null?void 0:$.doctor}):((z=s.secondOpinion)==null?void 0:z.vendor)&&e.jsx(he,{strong:!0,className:"block mb-2 !text-red-500",children:(I=s.secondOpinion)==null?void 0:I.vendor})]})]}),e.jsx(pe,{title:e.jsxs(U,{children:[e.jsx(rt,{}),e.jsx("span",{children:"Second Opinion Details"})]}),className:`shadow-md ${s.secondOpinion?"!border-red-500":""}`,children:e.jsx(Mt,{validationErrors:s,reports:N,setReports:(a,l)=>{c(a,l)},setValidationErrors:g})})]})})},Bt=j.memo(Lt),Vt=()=>{const n=be(),[S,s]=j.useState([]),[g,N]=j.useState(!0),v=j.useCallback(async()=>{try{N(!0);const i=await n(Ps());if(i.error){P.error(i.error.message??"unknown error occured");return}s(i.payload.data.clients)}catch{P.error("unknown error occured")}finally{N(!1)}},[n]);return j.useEffect(()=>{v()},[v]),{subClientsOrderDetails:S,isLoading:g,reload:v}},Yt=[{value:"virtual",label:"Virtual Consult",icon:e.jsx(fs,{className:"tab-icon"})},{value:"labpackage",label:"Lab Package",icon:e.jsx(Rs,{className:"tab-icon"})},{value:"labtest",label:"Lab Test",icon:e.jsx(Ms,{className:"tab-icon"})},{value:"pharmacy",label:"Pharmacy",icon:e.jsx(ds,{className:"tab-icon"})},{value:"second_opinion",label:"Second Opinion",icon:e.jsx(ds,{className:"tab-icon"})}],Fe={consultation:{consultType:"rapha",selectedDoctor:null,selectedTimeSlot:null,selectedDate:null,selectedSpecialization:null,selectedVendor:null},tests:{selectedTest:null,selectedVendor:null,selectedTimeSlot:null,selectedDate:null},pharmacy:{selectedMedicines:[]},secondOpinion:{phone:null,comments:null,alternate_phone:null,selectedCategory:null,selectedDoctor:null,selectedVendor:null,urls:null}},Gt=({visible:n=!1,onCancel:S,reload:s})=>{var I;const{isLoading:g,subClientsOrderDetails:N}=Vt();j.useRef({consultation:{date:"",doctor:"",timeSlot:""}});const[v,i]=j.useState(null),[w,V]=j.useState(null),{linkableId:b}=Ne(),R=be(),[L,K]=j.useState(!1),[D,H]=j.useState({virtual:[],labpackage:[],labtest:[],pharmacy:[]}),o=j.useMemo(()=>{var l;return((l=v==null?void 0:v.reduce)==null?void 0:l.call(v,(d,u)=>(d.get(u.type)?d.set(u.type,[...d.get(u.type),u]):d.set(u.type,[u]),d),new Map))??new Map},[v]);console.log("alloweddata",o);const r=j.useMemo(()=>{var a;return w?(a=Yt.filter(l=>{var d;switch(l.value){case"virtual":return!!(o!=null&&o.has("virtual_consultation")||o!=null&&o.has("opd_consultation"));case"labpackage":return((d=w==null?void 0:w.packages)==null?void 0:d.length)>0;default:return!1}}))==null?void 0:a.reverse():[]},[w,v]),[k,C]=j.useState(((I=r[0])==null?void 0:I.value)??""),[c,J]=j.useState({userType:"existing",users:[]}),[p,M]=j.useState(Fe),[_,h]=j.useState({}),[y,T]=j.useState({isBooking:!1}),q=j.useCallback(async()=>{var a,l,d;try{const u=await R($s(w==null?void 0:w.id));if(u!=null&&u.error){P.error(((a=u==null?void 0:u.error)==null?void 0:a.message)||"Unknown Error Occured");return}i((d=(l=u==null?void 0:u.payload)==null?void 0:l.data)==null?void 0:d.clientWallets)}catch(u){console.error("Error fetching clinic wallets:",u)}},[w==null?void 0:w.id,R]);j.useEffect(()=>{w!=null&&w.id&&q()},[q]),j.useEffect(()=>{var a;C(((a=r[0])==null?void 0:a.value)??"")},[w,r]),j.useEffect(()=>{M(Fe),h({})},[k]);const E=()=>{J({userType:"existing",users:[]}),M(Fe),h({})},$=()=>{var l,d,u,A,F,Y,Q,B,t,m,O,f,x,X,W,G,te,re,ce,se,ae,ie,ke,He,qe,Ze,We,Je,Ke,Qe,Xe,De,Ue,Ee,es,ss,ts,ls,as,ns,rs,cs;const a={};if(c!=null&&c.users||!(c!=null&&c.users))if((c==null?void 0:c.userType)==="new"){const Z={};(u=(d=(l=c==null?void 0:c.users)==null?void 0:l[0])==null?void 0:d.user)!=null&&u.firstName||(Z.firstName="Please enter first name"),(Y=(F=(A=c==null?void 0:c.users)==null?void 0:A[0])==null?void 0:F.user)!=null&&Y.lastName||(Z.lastName="Please enter last name");const le=(t=(B=(Q=c==null?void 0:c.users)==null?void 0:Q[0])==null?void 0:B.user)==null?void 0:t.email,ye=(f=(O=(m=c==null?void 0:c.users)==null?void 0:m[0])==null?void 0:O.user)==null?void 0:f.phone;!le&&!ye?(Z.email="Please enter email or phone number",Z.phone="Please enter email or phone number"):(le&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(le)||(Z.email="Please enter a valid email address")),ye&&(/^\d{10}$/.test(ye)||(Z.phone="Please enter a valid 10 digit phone number"))),(!((W=(X=(x=c==null?void 0:c.users)==null?void 0:x[0])==null?void 0:X.user)!=null&&W.age)||!((re=(te=(G=c==null?void 0:c.users)==null?void 0:G[0])==null?void 0:te.user)!=null&&re.dob))&&(Z.age="Please enter age"),(ae=(se=(ce=c==null?void 0:c.users)==null?void 0:ce[0])==null?void 0:se.user)!=null&&ae.gender||(Z.gender="Please enter gender"),(He=(ke=(ie=c==null?void 0:c.users)==null?void 0:ie[0])==null?void 0:ke.user)!=null&&He.employeeid||(Z.employeeid="Please enter employeeid"),Object.keys(Z).length>0&&(a.user=Z)}else c.userType==="existing"&&(((qe=c==null?void 0:c.users)==null?void 0:qe.length)===0||!((Ze=c==null?void 0:c.users)!=null&&Ze.every(Z=>Z.user.id)))&&(a.user={id:"Please select users"});switch(k){case"virtual":p.consultation.consultType||(a.consultType="Please select consultation type"),["call","chat","video","opd"].includes(p.consultation.consultType)&&(p.consultation.selectedDate||(a.date="Please select a date"),p.consultation.selectedTimeSlot||(a.timeSlot="Please select a time slot"),!((We=p.consultation.selectedVendor)!=null&&We.id)&&p.consultation.consultType==="opd"&&(a.vendor="Please select a clinic"));break;case"labpackage":{(!Array.isArray(p.tests.selectedTest)||p.tests.selectedTest.length===0||!p.tests.selectedTest.every(Z=>Z.service_code&&Z.service_code!==""))&&(a.test="Please select at least one valid test"),(Je=p.tests.selectedVendor)!=null&&Je.id||(a.vendor="Please select a vendor");break}case"labtest":break;case"pharmacy":{((Qe=(Ke=p==null?void 0:p.pharmacy)==null?void 0:Ke.selectedMedicines)==null?void 0:Qe.length)===0&&(a.pharmacy="Please select at least one medicine");break}case"second_opinion":{const Z={},le=(Xe=p.secondOpinion.selectedDoctor)!=null&&Xe.id?"doctor":p.secondOpinion.selectedVendor?"vendor":null;le?le==="doctor"?(Ue=(De=p==null?void 0:p.secondOpinion)==null?void 0:De.selectedDoctor)!=null&&Ue.id||(Z.doctor="Please select a doctor"):le==="vendor"&&((es=(Ee=p==null?void 0:p.secondOpinion)==null?void 0:Ee.selectedVendor)!=null&&es.id||(Z.vendor="Please select a Hospital"),(!((ss=p==null?void 0:p.secondOpinion)!=null&&ss.selectedCategory)||((ls=(ts=p==null?void 0:p.consultation)==null?void 0:ts.selectedSpecialization)==null?void 0:ls.length)===0)&&(Z.category="Please select a category")):(Z.doctor="Please select a doctor",Z.vendor="Please select a Hospital"),(as=p==null?void 0:p.secondOpinion)!=null&&as.urls||(Z.reports="Please upload reports"),(ns=p==null?void 0:p.secondOpinion)!=null&&ns.phone||(Z.phone="Please enter phone number"),(rs=p==null?void 0:p.secondOpinion)!=null&&rs.comments||(Z.comments="Please add a comment"),Object.keys(Z).length>0&&(a.secondOpinion=Z);break}default:a.general="Invalid consultation type"}if((k=="labtest"||(c==null?void 0:c.userType)==="new")&&((cs=c==null?void 0:c.users)==null||cs.forEach(Z=>{if(Z!=null&&Z.address){const le={};Z.address.fullAddress||(le.fullAddress="Please provide full address"),Z.address.city||(le.city="Please provide city"),Z.address.state||(le.state="Please provide state"),Z.address.zip||(le.zip="Please provide zip code"),Object.keys(le).length>0&&(a.address=le)}else a.address={fullAddress:"Please provide full address",city:"Please provide city",state:"Please provide state",zip:"Please provide zip code"}})),h(a),Object.keys(a).length>0){const Z=[],le=ye=>{Object.entries(ye).forEach(([ze,Ce])=>{typeof Ce=="string"?Z.push(Ce):typeof Ce=="object"&&le(Ce)})};return le(a),Z.forEach((ye,ze)=>{P.error(ye)}),!1}return!0},z=async()=>{var d,u,A,F,Y,Q,B,t;if(!$())return;const a=()=>{var m,O;if(c.userType==="existing")return(m=c.users)==null?void 0:m.map(f=>{var x,X,W,G,te,re,ce,se,ae,ie;return(x=f==null?void 0:f.user)!=null&&x.id?{...(X=f==null?void 0:f.user)!=null&&X.remark?{remarks:f.user.remark}:{},email:String(f.user.email),vendor_id:((G=(W=p.tests)==null?void 0:W.selectedVendor)==null?void 0:G.id)||1,...(te=f.user)!=null&&te.selectedDate?{selected_date:(re=f.user)==null?void 0:re.selectedDate}:{},...(ce=f.user)!=null&&ce.selectedTimeSlot?{selected_timeslot:(se=f.user)==null?void 0:se.selectedTimeSlot}:{},address:((ae=f==null?void 0:f.address)==null?void 0:ae.fullAddress)??"",name:`${f.user.first_name}${String(f.user.last_name)?" ":""}${String(f.user.last_name??"")}`,...(ie=f.user)!=null&&ie.employeeid?{employee_id:f.user.employeeid}:{}}:null}).filter(Boolean);if(c.userType==="new")return(O=c.users)==null?void 0:O.map(f=>{var x,X,W,G,te,re,ce,se,ae;return f!=null&&f.user?{...(x=f==null?void 0:f.user)!=null&&x.remark?{remarks:f.user.remark}:{},name:`${f.user.firstName}${String(f.user.lastName)?" ":""}${String(f.user.lastName??"")}`||"",email:f.user.email||null,phone:f.user.phone||null,age:f.user.age||"",gender:f.user.gender||"",address:((X=f==null?void 0:f.address)==null?void 0:X.fullAddress)??"",...(W=f.user)!=null&&W.selectedDate?{selected_date:(G=f.user)==null?void 0:G.selectedDate}:{},...(te=f.user)!=null&&te.selectedTimeSlot?{selected_timeslot:(re=f.user)==null?void 0:re.selectedTimeSlot}:{},vendor_id:((se=(ce=p.tests)==null?void 0:ce.selectedVendor)==null?void 0:se.id)||1,...(ae=f.user)!=null&&ae.employeeid?{employee_id:f.user.employeeid}:{}}:null}).filter(Boolean);if(c.userType==="bulk")return c.users;throw new Error("User details not found")};let l;switch(k){case"virtual":{if(["video","chat","call","opd","rapha"].includes(p.consultation.consultType))l={client_id:(w==null?void 0:w.id)??b,package_code:null,doctor_id:String(((d=p.consultation.selectedDoctor)==null?void 0:d.id)||null),vendor_id:1,selected_date:p.consultation.selectedDate,selected_timeslot:p.consultation.selectedTimeSlot,users:a()};else if(p.consultation.consultType==="opd")throw new Error("OPD consultation not implemented yet");break}case"labpackage":{l={client_id:(w==null?void 0:w.id)??b,package_code:(F=Array.isArray(p.tests.selectedTest)?(u=p.tests.selectedTest)==null?void 0:u.map(m=>m.service_code):[(A=p.tests.selectedTest)==null?void 0:A.service_code])==null?void 0:F[0],doctor_id:null,vendor_id:((Y=p.tests.selectedVendor)==null?void 0:Y.id)||1,selected_date:p.tests.selectedDate,selected_timeslot:p.tests.selectedTimeSlot,users:a()};break}case"labtest":{l={client_id:(w==null?void 0:w.id)??b,test_codes:Array.isArray(p.tests.selectedTest)?(Q=p.tests.selectedTest)==null?void 0:Q.map(m=>m.service_code):[(B=p.tests.selectedTest)==null?void 0:B.service_code],vendor_id:(t=p.tests.selectedVendor)==null?void 0:t.id,collection_1_date:p.tests.selectedDate,collection_1_slot:p.tests.selectedTimeSlot,users:a()};break}default:return}T(m=>({...m,isBooking:!0}));try{if(l){const m=await R(Fs(l));if(m.error){P.error(m.error.message||"Unknown error occurred");return}else P.success("Order Booked Successfully!"),E(),S(),s&&s()}}catch{P.error("Unknown error occurred")}finally{T(m=>({...m,isBooking:!1}))}};return console.log("formData",p),console.log("userDetails",c),console.log("cartData",D),console.log("validationErrors",_),console.log("consultType",k),e.jsxs(de,{title:w?L?"Cart":`Create New Order for ${w.name}`:"Select a Client",open:n,handleClose:S,headerClassName:"px-2",children:[e.jsxs(de.Body,{children:[e.jsx(ms,{spinning:g,children:e.jsxs("div",{className:"flex flex-col gap-1 m-2",children:[e.jsx("p",{className:"text-lg font-bold m-0",children:"Select a Client"}),e.jsx(ne,{size:"large",showSearch:!0,options:N==null?void 0:N.map(a=>({label:a.name,value:a.id})),value:w==null?void 0:w.id,onChange:a=>{V((N==null?void 0:N.find(l=>l.id===a))||null)},placeholder:"Select a Client",loading:g,filterOption:(a,l)=>((l==null?void 0:l.label)??"").toLowerCase().includes(a.toLowerCase()),optionFilterProp:"label"})]})}),w&&v&&(r==null?void 0:r.length)>0&&e.jsx(ms,{spinning:y.isBooking,children:e.jsx(ht,{children:L?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"createOrderTopDiv",children:e.jsx(tt,{activeTab:k,setActiveTab:C,tabs:r})}),e.jsxs("div",{children:[k==="virtual"&&e.jsx(It,{setFormData:M,formData:p,validationErrors:_,setValidationErrors:h,selectedClientId:w==null?void 0:w.id,allowedData:o}),["labpackage","labtest","radiology"].includes(k)&&e.jsx(Pt,{setFormData:M,formData:p,consultType:k,validationErrors:_,setValidationErrors:h,selectedClient:w}),k==="pharmacy"&&e.jsx(Rt,{setFormData:M,formData:p,validationErrors:_,setValidationErrors:h}),k==="second_opinion"&&e.jsx(Bt,{formData:p,setFormData:M,validationErrors:_,setValidationErrors:h}),e.jsx(_t,{consultType:k,formData:c,setFormData:J,validationErrors:_,setValidationErrors:h})]})]})})})]}),e.jsx(de.Footer,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ve,{onClick:S,children:"Cancel"}),!L&&e.jsx(Te,{onClick:z,children:"Create Order"})]})})]})},ta=()=>{const n=Ls();Ne();const S=be(),[s,g]=j.useState(""),{data:N,error:v,loading:i}=Bs(k=>k.order.clientOrders),[w,V]=j.useState({page:1,pageSize:10}),{activeTypes:b,push:R,pop:L,data:K}=bs(["createOrder","downloadOrderExcel"]),D=j.useCallback(()=>{S(Vs({page:w.page-1,count:w.pageSize,searchText:s}))},[w,s,S]);j.useEffect(()=>{const k=setTimeout(()=>{D()},300);return()=>clearTimeout(k)},[D]),j.useEffect(()=>{v&&P.error(v)},[v]);const H=(k,C)=>{V({page:k,pageSize:C})},o=[{label:"Sl No",key:"slno",render:(k,C,c)=>c+1},{label:"Order ID",dataIndex:"id",key:"orderId",render:k=>e.jsx("span",{className:"cursor-pointer text-blue-500",onClick:()=>n(`/bookings/all?clientOrderId=${k}`),children:k})},{label:"Clients",dataIndex:["client","name"],key:"clients"},{label:"Order Date",dataIndex:"created_at",key:"orderdate",render:k=>Oe(Number(k)).format("MMM DD, YYYY, hh:mm A")},{label:"Completed Date",dataIndex:"invoice_date",key:"completeddate",render:k=>k?Oe(Number(k)).format("MMM DD, YYYY, hh:mm A"):"N/A"}],r=[{type:"createOrder",component:e.jsx(Gt,{reload:D,onCancel:()=>L("createOrder"),visible:!0})},{type:"downloadOrderExcel",component:e.jsx(mt,{sectionType:"orders",closeForm:()=>L("downloadOrderExcel")})}];return e.jsxs(gt,{children:[e.jsx("h2",{children:"My Orders"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-2",children:[e.jsx(Ys,{onSearch:k=>g(k),searchText:s}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Te,{onClick:()=>R("createOrder"),children:"Create New Order"}),e.jsx("button",{className:"download-btn",onClick:()=>R("downloadOrderExcel"),children:e.jsx(ut,{size:20})})]})]}),e.jsx("div",{children:e.jsx(Ge,{columns:o,data:N.clientOrders,showingName:"Orders",isLoading:i,page:w.page,pageSize:w.pageSize,pagination:!0,total:N.clientOrdersCount,onPageChange:H})}),e.jsx(ys,{activeTypes:b,modals:r,data:K})]})};export{ta as default};
