import{d as C,j as s,a as b,r as o,u as N,c as w,b as k,h as P,df as S}from"./index-ChUmNm8R.js";import{c as x}from"./utils-CjlqjNT0.js";import{S as _,c as A}from"./index-DYe-NdTs.js";import{C as E}from"./CustomPagination-BfzEq6pA.js";import{U as I}from"./users-BRwWMaN2.js";import"./clsx-B-dksMZM.js";import"./index-gapj9Wcb.js";import"./index-D9Bv3C6k.js";import"./DownOutlined-z3I3nDv9.js";import"./useIcons-CDf6lDIp.js";import"./CheckOutlined-DPOLd74P.js";import"./chevron-down-u38pTTSM.js";import"./createLucideIcon-D1dtiQRH.js";const $=C.div`
  padding: 10px;
`;function L({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:x("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function U({className:e,...t}){return s.jsx("div",{"data-slot":"card-content",className:x("px-6",e),...t})}const z=A("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:e,variant:t,asChild:c=!1,...d}){const i=c?_:"span";return s.jsx(i,{"data-slot":"badge",className:x(z({variant:t}),e),...d})}const B=({data:e})=>{var c,d,i;b();const t=e.all_users?e.total_users:(((c=e.admin_users)==null?void 0:c.length)||0)+(((d=e.associated_users)==null?void 0:d.length)||0);return s.jsxs(L,{className:"p-0 overflow-hidden gap-2 h-full rounded-t-[29px] !justify-between",onClick:()=>window.location.href=`/communities/view/${e==null?void 0:e.id}`,children:[s.jsx("img",{src:e.cover_image||((i=e.banner_images)==null?void 0:i[0])||"",alt:`${e.name} background`,className:"!m-[5px] object-fill h-[230px] rounded-t-[25px] bg-gray-200 dark:bg-gray-700"}),s.jsxs(U,{className:"p-3 gap-3 flex flex-col h-full justify-evenly",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"gap-1",children:[s.jsx("h3",{className:"font-semibold text-foreground leading-tight !text-base",children:e.name}),s.jsx("p",{className:"text-sm text-muted-foreground mb-0",children:e.description})]}),s.jsx(g,{variant:"secondary",className:`px-2 py-1 rounded-[25px] cursor-pointer ${e.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 border-green-200 dark:border-green-800":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 border-red-200 dark:border-red-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(I,{className:"h-4 w-4"}),s.jsx("span",{children:e.all_users?`${t}`:`${t}+ Members`})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:e.categories&&e.categories.length>0?e.categories.map((a,l)=>s.jsx(g,{variant:"outline",className:"text-xs px-2 py-1 text-gray-500 rounded-[25px]",children:typeof a=="object"?a==null?void 0:a.name:a},l)):s.jsx(g,{variant:"outline",className:"text-xs px-2 py-1 text-gray-500 rounded-[25px]",children:"Community"})})]})]})},W=()=>{var v;const[e,t]=o.useState([]),[c,d]=o.useState(!0),[i,a]=o.useState(1),[l,h]=o.useState(10),j=b(),p=N(),{allCommunities:r}=w(n=>n.community),{clientDetails:m}=k(),{linkableId:f}=P();o.useEffect(()=>{console.log("communities : ",e)},[e]),o.useEffect(()=>{p(S({client_id:f,page:i,count:l,status:"active"}))},[p,i,l,f]);const y=(n,u)=>{a(n),h(u)};return o.useEffect(()=>{if(r!=null&&r.communities){const n=r==null?void 0:r.communities.filter(u=>u.status==="active");t(n),d(!1)}},[r]),s.jsxs($,{children:[s.jsx("h2",{className:"text-lg p-2",children:"Communities"}),s.jsxs("div",{className:"flex flex-row justify-between items-center p-2 m-1",children:[s.jsxs("h2",{className:"!text-[1.5rem]",children:[(m==null?void 0:m.name)??"Client"," Communities"]}),s.jsx("button",{className:"text-base bg-[#252B61] text-white px-2 py-1 md:px-4 md:py-3 !rounded-[32px] cursor-pointer",onClick:()=>j("/communities/create"),children:"Create Community"})]}),s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"m-3 grid lg:grid-cols-4 gap-4 md:grid-cols-3 sm:grid-cols-2 grid-cols-1 pb-4",children:c?s.jsx("div",{children:"Loading..."}):e.map(n=>s.jsx(B,{data:n},n.id))})}),s.jsx(E,{page:i,onPageChange:y,total:((v=r==null?void 0:r.pagination)==null?void 0:v.total)??0,pageSize:l})]})};export{B as CommunityCard,W as default};
