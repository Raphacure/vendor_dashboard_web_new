import{d as Ae,j as e,u as ge,r as o,P as _e,b$ as bs,z as W,c0 as Os,a as ys,f as Ne,bR as xe,c1 as as,bN as we,c2 as zs,h as ve,g as Ms,aJ as De,c3 as We,c4 as js,c5 as Ps,c6 as As,S as oe,R as Ve,c7 as vs,c8 as Fs,c9 as $s,ca as Rs,cb as Ns,bI as Ys,cc as Bs,cd as os,ce as Ls,cf as Us,cg as Ds,ch as Ws,bL as Vs,ci as Gs,cj as Hs,ck as Js,k as qs,m as Ks,cl as Xs,cm as Zs,cn as rs}from"./index-ChUmNm8R.js";import{R as Oe}from"./index-CPAACelN.js";import{D as is}from"./DownloadForm-nnrnBOUB.js";import{B as ds}from"./BookingModals-CERPOe7c.js";import{S as Ce}from"./SecoundaryButton-goiA8OO9.js";import{C as ie}from"./CustomModal-Ds0Ku9jR.js";import{u as Qs,C as Es}from"./CustomModalRenderer-DuatB4dP.js";import{c as ks}from"./createLucideIcon-D1dtiQRH.js";import{M as et}from"./mail-hThchRSe.js";import{M as fe}from"./dropdown-C4zMWtkZ.js";import{S as ce}from"./index-D9Bv3C6k.js";import{T as ke}from"./index-BsLI0Qln.js";import{d as je}from"./dayjs.min-BA1p4t9P.js";import{I as ye}from"./index-D6J9e9i1.js";import{A as st}from"./AddressAutoComplete-CKisEBlA.js";import{S as ee}from"./addEventListener-D7w6vIGx.js";import{C as de}from"./index-DmdwV89h.js";import{R as tt}from"./UserOutlined-C2uVDHrr.js";import{B as ze}from"./button-D0Rmo6Y5.js";import{a as lt,b as ws,d as _s,c as nt,R as ct}from"./TeamOutlined-1BcXhxO2.js";import{R as at}from"./CreditCardOutlined-jV_RS77q.js";import{C as ot}from"./CustomTab-sR3kUFYQ.js";import{g as Ss,a as rt}from"./doctorUsersService--bmGzTWH.js";import{S as Cs}from"./index-v-CwiWzn.js";import{R as he}from"./useIcons-CDf6lDIp.js";import{c as Se,D as Me,d as Pe}from"./index-8lg37tdn.js";import{C as Ts,M as it,F as dt,T as mt,P as ms}from"./index-CaKvCUqB.js";import{R as pt,C as ps}from"./row-B9qA-Efv.js";import{A as Fe,T as ut}from"./trash-CjuzgK1H.js";import{F as Te}from"./index-CZV3_rbI.js";import{C as xt}from"./CustomSpinLoader-CrgQ8bNq.js";import{g as ht}from"./prescriptionService-el3J9jP_.js";import{P as us}from"./pill-BvFhSHtv.js";import{F as gt,a as ft}from"./FilePreview-CUbD6Isw.js";import{C as xs}from"./CommonSearchBox-hAv5GAZt.js";import{C as bt}from"./CustomTable-BBwjbMSz.js";import"./xlsx-BUW7exb-.js";import"./BookingDetailsModal-HSRnt7fr.js";import"./utils-CjlqjNT0.js";import"./clsx-B-dksMZM.js";import"./useHasPermission-B8Y_MdsF.js";import"./useUploadToS3-CcI0wiNy.js";import"./ProfileService-D5sxIXUd.js";import"./index-BZKwATQs.js";import"./Upload-CTnVjxYJ.js";import"./DownOutlined-z3I3nDv9.js";import"./collapse-BbEVqHco.js";import"./fade-8FE2cY_X.js";import"./useForceUpdate-jQjUdsvY.js";import"./DeleteOutlined-LwZaW3bw.js";import"./EyeOutlined-BGetrG_9.js";import"./CheckOutlined-DPOLd74P.js";import"./LeftOutlined-lLzXux5-.js";import"./UploadOutlined-BeGctQLo.js";import"./index-CSCB4ib3.js";import"./index-Ce5gUteX.js";import"./useClosable-B1XNXU5S.js";import"./extendsObject-78o_rR5W.js";import"./index-DC3reArS.js";import"./Table-BhIN-nUr.js";import"./styleChecker-DD0Z1krI.js";import"./index-De2sQM66.js";import"./useBubbleLock-BnnxIxI9.js";import"./useForm-CIMDi_Qk.js";import"./Input-ClusE8wk.js";import"./index-1XTAFx_Q.js";import"./Pagination-BbDnNTXA.js";import"./Table-CT4iqjp7.js";import"./Accordium-D_-yQ0k_.js";import"./index-B3SopV5_.js";import"./TextArea-C37Yo_Hy.js";import"./index-Ds72tj9v.js";import"./Skeleton-D7MyXb_N.js";import"./index-QWR8bAtG.js";import"./index-Ctpo8ZnH.js";import"./ExclamationCircleFilled-ZOATJe35.js";import"./InfoCircleFilled-DNn_uXca.js";import"./QuestionCircleOutlined-B6yisc4C.js";import"./CustomPagination-BfzEq6pA.js";import"./index-gapj9Wcb.js";import"./chevron-down-u38pTTSM.js";/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],jt=ks("CircleX",yt);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],kt=ks("Phone",Nt),hs=Ae.div`
  width: 100%;
  padding: 20px;
  font-family: inter;

  .ant-select-selector {
    border-radius: 25px !important;
    border:1px solid #252b61 !important;
  }

  .ant-select {
    height: 37px;
  }
  .ant-picker {
    border-radius: 25px !important;
    height: 37px !important;
    border:1px solid #252b61 !important;
  }

  .ant-select-selection-placeholder{
    font-size:16px;
  }

  .date-range-picker {
    height: 37px;
  }

  .completed-status {
    color: green;
  }

  @media (max-width: 675px) {
    padding: 15px 10px;

    .booking-create {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      scroll-behavior: smooth;
    }

    .date-number-span {
      font-family: Inter;
      font-weight: 600;
      font-size: 18px;
      line-height: 21.78px;
      text-align: center;
    }

    .booking-type {
      font-family: Inter;
      font-weight: 700;
      font-size: 9px;
      line-height: 10.89px;
      letter-spacing: 1.5%;
      text-align: center;
    }

    .date-month-name {
      font-family: Inter;
      font-weight: 600;
      font-size: 12px;
      line-height: 14.52px;
      text-align: center;
    }

    .load-more-btn-div {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }

    .red-call {
      background-color: rgb(255, 0, 4);
      color: white;
    }
    .yellow-call {
      background-color: rgb(255, 167, 0);
      color: white;
    }

    .completed-status-mobile {
      border: 1px solid green;
    }

    .status-mobile-div {
      display: flex;
      justify-content: center;
      align-items: baseline;
      min-width: 80px;
    }

    .other-status-mobile {
      border: 1px solid rgb(240, 218, 105);
    }

    .rejected-status-mobile {
      color: #ff0000 !important;
      border: 1px solid #ff0000;
    }

    .whole-center {
      gap: 2px;
    }

    .completed-status {
      color: green;
    }

    .status-btns {
      padding: 5px 10px;
      border-radius: 20px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .pending-status-mobile {
      background-color: rgb(240, 218, 105);
    }

    .mobile-upcoming-status {
      background-color: rgb(255, 167, 0);
    }

    .booking-mobile-body-div {
      background-color: rgb(254, 254, 254);
      padding: 0 5px;
      margin-top: 15px;
      display: flex;
      gap: 15px;
      overflow: hidden;
      border-radius: 10px;
      flex-direction: column;
    }

    .booking-mobile-div-card {
      border: 1px solid rgb(240, 240, 240);
      padding: 7px;
      border-radius: 15px;
      box-shadow: 2px 4px 15px 0px #0000001a;

      .booking-mobile-card-details {
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 50%;
      }
      .booking-details-mobile {
        min-width: 0;
      }

      .calender-box-mobile {
        width: 67px;
        height: 71px;
        padding: 9px 4px;
        background-color: rgb(233, 242, 253);
        border-radius: 11px;
        display: flex;
        flex-direction: column;
        align-items: center;
        display: flex;
        flex-direction: column;
        gap: 3px;
        flex-shrink: 0;
        border: 1px solid #f0f0f0;
      }
      .booking-details-slot {
        font-family: Inter;
        font-weight: 400;
        font-size: 15px;
        line-height: 18.15px;
        letter-spacing: 1.5%;
      }
      .booking-details-type {
        color: #888888;
        font-family: Inter;
        font-weight: 400;
        font-size: 14px;
        line-height: 16.94px;
        letter-spacing: 1.5%;
      }
      .booking-details-name {
        font-family: Inter;
        font-weight: 500;
        font-size: 16px;
        line-height: 19.36px;
        margin-bottom: 5px !important;
      }

      .booking-details-mobile p {
        margin: 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .pending-btn {
        background-color: rgb(255, 0, 4);
        border: none;
        padding: 5px 15px !important;
        border-radius: 20px;
        cursor: pointer;
        font-size: 16px;
        color: white;
      }
    }

    .booking-header-div {
      display: flex;
      justify-content: space-between;
    }

    .add-patient {
      background-color: white;
      border-radius: 10px;
      border: 1px solid #252b61;
      padding: 5px 15px !important;

      cursor: pointer;
      font-size: 16px;
      letter-spacing: 0.02em;
      font-weight: 500;
      color: #252b61;
    }
    .filter {
      background-color: white;
      border: none;
      padding: 5px 0 !important;

      cursor: pointer;
      font-size: 16px;
      letter-spacing: 0.02em;
      font-weight: 500;
      color: #252b61;
    }
    .filter img {
      width: 25px;
      padding: 0 5px 0 0 !important;
    }
  }

  .table-loading {
    height: 200px;
  }
  .glowing-div-next {
    display: inline-block;
    background-color: #92bdf6;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    box-shadow: 0 0 5px #92bdf6;
    animation: glow-grow 1.5s infinite alternate ease-in-out;
  }
  @keyframes glow-grow {
    0% {
      transform: scale(1);
      box-shadow: 0 0 5px #92bdf6;
    }
    100% {
      transform: scale(1.5);
      box-shadow: 0 0 15px #92bdf6, 0 0 30px #92bdf6;
    }
  }

  .next-label {
    color: #ff0004 !important;
  }
  .all-label {
    color: rgb(34, 46, 98) !important;
  }
  .upcoming-label {
    color: rgb(0, 136, 45) !important;
  }
  .open-label {
    color: rgb(241, 157, 2) !important;
  }
  .rejected-label {
    color: rgb(34, 46, 98) !important;
  }

  .no-bookings-td {
    height: 150px;
    text-align: center;
    color: #22336b;
    font-size: 18px;
    font-weight: 500;
    font-family: Inter;
  }
  .action-td {
    border-left: 1px solid #d6cece;
  }
  .action-div {
    display: flex;
    justify-content: center;
    /* grid-template-columns: repeat(3, 1fr); */
    justify-content: center;
    width: max-content;
    margin: 0;
    gap: 10px;

    img {
      width: 16px;
      height: 16px;
      margin-right: 5px;
    }

    .action-btns-virtual {
      padding: 10px 20px;
      border: 1px solid #252b61;
      width: fit-content;
    }
  }

  .tab-container {
    margin-top: 10px;
    border-radius: 20px;
  }
  .tab {
    display: flex;
    padding: 8px 15px;
    border-radius: 7px;
    gap: 20px;
    background-color: #e9f2fd;
  }
  .tab-button {
    background: transparent;
    border: none;
    padding: 7px 20px;
    cursor: pointer;
    font-size: 18px;
    font-weight: 500;
    color: #000;
    border-radius: 8px;
    transition: background 0.3s ease;
  }

  .share-main-div {
    position: relative;
  }

  .share-top-header {
    background-color: #e9f2fd;
    padding: 9px 14px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .share-close {
    background-color: #dcdcdc;
    border-radius: 100%;
    padding: 0px 4px;
  }
  .share-top-header p {
    font-size: 10px;
    margin: 0;
    text-align: left;
  }

  .share-div {
    overflow: hidden;
    position: absolute;
    z-index: 5;
    background-color: white;
    border-radius: 25px;
    width: 225px;
    height: 127px;
    animation: genieAppear 0.7s ease-out forwards;
    left: 10px;
    box-shadow: 0 0 10px #b6b6b6;
  }
  .share-items {
    padding: 0 20px;
  }
  .tab-button.active {
    background: white;
    color: #252b61;
    font-weight: 500;
    border: none;
  }
  .next-text {
    color: red;
  }
  .pending-text {
    color: #f19d02;
  }
  .rejected-text {
    color: #222e62;
  }

  .table-status-div {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
  }
  .upcoming-text {
    color: green;
  }
  .label-img {
    width: 20px;
  }

  .share-items-list-div {
    display: flex;
    gap: 10px;
    justify-content: left;
    align-items: center;
    margin: 5px 0;
  }
  .share-items-list-div:not(:last-child) {
    border-bottom: 1px solid #ccc;
    padding-bottom: 8px;
    margin-bottom: 8px;
  }
  .share-items-list-div img {
    width: 25px;
    aspect-ratio: 1 / 1;
  }
  .share-items-list-div p {
    margin: 0;
  }

  @keyframes genieAppear {
    0% {
      opacity: 0;
      transform: scale(0.1) translate(-10%, -40%);
    }
    60% {
      opacity: 1;
      transform: scale(1.1) translate(-10%, -40%);
    }
    100% {
      transform: scale(1) translate(-10%, -40%);
    }
  }

  .heading {
    h2 {
      font-size: 20px;
      font-weight: 600;
      color: #000;
      text-align: left;
      margin-bottom: 5px;
    }

    p {
      font-size: 14px;
      color: #000;
      text-align: left;
      opacity: 0.7;
      margin-bottom: 10px;
    }
  }
  .add-patient {
    background-color: white;
    border-radius: 25px;
    border: 1px solid #252b61;
    padding: 10px 20px;
    text-wrap: nowrap;

    cursor: pointer;
    font-size: 16px;
    letter-spacing: 0.02em;
    font-weight: 500;
    color: #252b61;
  }

  .pd-container {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .download-btn {
    background-color: #c8ebd8;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    margin-left: 16px;
    transition: background-color 0.3s ease;
  }

  .download-btn svg {
    color: #22336b;
    font-size: 14px;
  }

  .download-btn:hover {
    background-color: #a4dbc3;
  }
  .sort-dropdown {
    position: relative;
    display: inline-block;
  }

  .sort-btn {
    box-shadow: 2px 4px 19px rgba(0, 0, 0, 0.1);
    border-radius: 69px;
    background-color: #fff;
    border: 1px solid #252b61;
    padding: 8px 16px;
    cursor: pointer;
    font-size: 16px;
    letter-spacing: 0.03em;
    font-weight: 500;
    color: #252b61;
  }

  .dropdown-menu {
    position: absolute;

    left: 1rem;
    display: block !important;
    background: white;
    border-radius: 10px;
    box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);
    padding: 0px;
    overflow: hidden;
    z-index: 10;
  }

  .dropdown-item {
    border-bottom: 1px solid #d6cece;
    padding: 10px;
    cursor: pointer;
    transition: background 0.2s ease-in-out;
  }

  .dropdown-item:last-child {
    border-bottom: none;
  }

  .dropdown-item:hover {
    background: #f0f0f0;
  }

  .pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
    gap: 10px;

    .arrows {
      display: flex;
      align-items: center;
      gap: 13px;
    }

    .arrow-icon {
      font-size: 1.5rem;
      cursor: pointer;
    }

    .back-arrow-icon {
      display: flex;
      align-items: center;
      padding: 5px;
      border: 1px solid #252b61;
      background-color: white;
      border-radius: 50%;
      cursor: pointer;
    }

    .page-btn {
      display: flex;
      gap: 8px;
      align-items: center;
      width: 100%;
      background-color: #252b61;
      border: 1px solid #252b61;
      color: white;
      font-size: 14px;
      letter-spacing: 0.03em;
      font-weight: 500;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
    }

    span {
      font-size: 14px;
      letter-spacing: 0.03em;
      font-weight: 500;
      color: #161616;
      input {
        width: 60px;
        padding: 10px 16px;
        color: #252b61;
        text-align: left;
        border: 1px solid #252b61;
        border-radius: 8px;
        margin: 0 5px;
      }
    }
  }

  .table-container {
    overflow: auto;
    border-radius: 20px;
    margin-top: 15px;
    border: 1px solid #d6cece;
  }

  table {
    width: 100%;
    border-collapse: collapse;

    tr {
      border-bottom: 1px solid #d6cece;
    }

    tr:last-child {
      border-bottom: none;
    }
  }
  th {
    font-size: 18px;
    font-weight: 500;
    color: #000;
    text-align: center;
    padding: 10px;
  }

  th:first-child {
    border-top-left-radius: 20px;
  }

  th:last-child {
    border-top-right-radius: 20px;
  }
  td {
    font-size: 16px;
    font-weight: 500;
    color: #000;
    padding: 10px;
    text-align: center;
  }

  thead {
    background-color: #e9f2fd;
    font-weight: bold;
    border: 2px solid white;
    border-bottom: none;
  }

  th {
    font-size: 16px;
    font-weight: 500;
    color: #000;
    text-align: center;
    padding: 10px;
  }

  th:first-child {
    border-top-left-radius: 20px;
  }

  th:last-child {
    border-top-right-radius: 20px;
  }

  .name {
    color: #252b61;
    font-size: 16px;
    cursor: pointer;
  }

  .report p {
    color: #252b61;
    font-size: 16px;
    margin-bottom: 0px;
    text-decoration: underline;
  }

  .report a:hover {
    text-decoration: underline;
  }

  .status {
    width: 100%;
    padding: 20px 10px;
    border-radius: 69px;
    font-size: 14px;
    letter-spacing: 0.03em;
    font-weight: 500;
    text-align: center;
    display: inline-block;
  }

  .status img {
    width: 15px;
    height: 16px;
  }
  .status p {
    margin: 0;
  }

  .rejected {
    color: #ff0000 !important;
    border: 1px solid #ff0000 !important;
    background-color: #fff !important;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
    align-items: center;
    padding: 10px 10px;
  }

  .upcoming {
    color: #252b61;
    border: 1px solid #252b61;
    background-color: #fff;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
  }

  .pending {
    color: #000000;
    border: 1px solid #f0da69;
    background-color: #f0da69;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
    align-items: center;
  }
  .others {
    color: #252b61;
    border: 1px solid #252b61;
    background-color: #fff;
    display: flex;
    align-items: center;
    gap: 9px;
    justify-content: center;
    padding: 10px 10px;
  }

  .status-icon {
    height: 16px;
    width: 16px;
  }

  .actions {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .icon-all {
    display: flex;
    gap: 8px;
  }
  .icon {
    height: 22px;
    width: 22px;
    cursor: pointer;
  }

  .call-btn-width {
    width: 130px;
  }

  .call-btn {
    display: flex;
    gap: 23px;
    align-items: center;
    justify-content: left;
    background: #ffa700;
    border: 2px solid #ffa700;
    color: white;
    padding: 10px 15px;
    border-radius: 38px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: #fff;

    .logo-icon-2 {
      height: 13.5px;
      width: 13.5px;
    }
  }
  .call-btn-upcoming {
    display: flex;
    gap: 23px;
    align-items: center;
    justify-content: left;
    background: rgb(255, 0, 4);
    border: 2px solid rgb(255, 0, 4);
    color: white;
    padding: 10px 15px;
    border-radius: 38px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: #fff;

    .logo-icon-2 {
      height: 13.5px;
      width: 13.5px;
    }
  }

  .disabled-btn {
    display: flex;
    gap: 23px;
    align-items: center;
    justify-content: left;
    background: rgb(128, 128, 128);
    border: 2px solid rgba(128, 128, 128, 0.5);
    padding: 10px 15px;
    border-radius: 38px;
    cursor: not-allowed;
    font-size: 14px;
    font-weight: 500;
    color: white;

    .logo-icon {
      height: 13.5px;
      width: 13.5px;
    }
  }
`,wt=Ae.div`
  margin: 10px 0;
  width: 100%;
  font-family: system-ui, -apple-system, sans-serif;

  h3 {
    font-size: 1.125rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
  }

  .booking-details-mobile{
    max-width:50px;
  }

  .filter-list {
    border-top: 1px solid #e5e7eb;
  }

  .filter-item {
    display: flex;
    align-items: center;
    padding: 0.75rem 0.5rem;
    border-bottom: 1px solid #e5e7eb;
  }

  input[type="checkbox"] {
    height: 1rem;
    width: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 0.25rem;
  }

  label {
    margin-left: 0.75rem;
    font-size: 0.875rem;
    color: #374151;
  }
`,_t=t=>{const{filters:N,selectedFilters:s,handleChange:j,title:w="Filters",render:d}=t;return e.jsx(wt,{children:e.jsx("div",{className:"filter-list",children:N.map((h,R)=>typeof d=="function"?d():e.jsxs("div",{className:"filter-item",children:[e.jsx("input",{type:"checkbox",id:`filter-${h==null?void 0:h.label}`,checked:s==null?void 0:s.includes(h==null?void 0:h.key),onChange:()=>j(h==null?void 0:h.key,N),disabled:h==null?void 0:h.disabled}),e.jsx("label",{htmlFor:`filter-${h==null?void 0:h.label}`,children:h==null?void 0:h.label})]},R))})})},gs=({data:t,time:N,instituteAction:s})=>{var k,Y,Z,X,M,D,J,p,v,a;const j=ge(),{pop:w,push:d,activeTypes:h}=Qs(["reports_download"]),[R,K]=o.useState(!1),[L,V]=o.useState(null),[i,H]=o.useState({}),[r,$]=o.useState(!1),x=((k=t==null?void 0:t.doctor)==null?void 0:k.name)||"",c=((Y=JSON.parse(localStorage.getItem("user")||JSON.stringify({})))==null?void 0:Y.phone)||"",z=`${((Z=t==null?void 0:t.user)==null?void 0:Z.first_name)||""} ${((X=t==null?void 0:t.user)==null?void 0:X.last_name)||""}`,T=((M=t==null?void 0:t.user)==null?void 0:M.phone)||((J=(D=t==null?void 0:t.user)==null?void 0:D.parent)==null?void 0:J.phone)||"",P=async()=>{var b;const g=await j(bs({patient_name:z,doctor_name:x,patient_number:T,doctor_number:c,booking_id:t==null?void 0:t.id}));if(g!=null&&g.error){W.error(((b=g==null?void 0:g.error)==null?void 0:b.message)||"Something went wrong");return}W.success("Call initiated successfully"),K(!1)},U=()=>{K(!1)},B=()=>{var b;const g=(b=t==null?void 0:t.user)==null?void 0:b.email;g?window.location.href=`mailto:${g}`:W.error("No email address found for this patient")},C=async g=>{var _;if(!g)return;const b=await j(Os(g)),m=(_=b==null?void 0:b.payload)==null?void 0:_.url;m&&(m.startsWith("http://")||m.startsWith("https://"))?setTimeout(()=>{window.open(m,"_blank")},300):W.error("Could not retrieve file URL.")};return e.jsxs("div",{className:"action-div",children:[e.jsxs(ie,{title:"Confirm Call",open:R,handleClose:U,width:"420px",headerClassName:"bg-blue-50 border-b border-blue-100 !px-2 rounded-t-2xl",bodyClass:"px-6 py-4",children:[e.jsx(ie.Body,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Calling from:"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-900 text-base",children:x}),e.jsx("span",{className:"text-gray-600 text-sm",children:c})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Calling to:"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-900 text-base",children:z}),e.jsx("span",{className:"text-gray-600 text-sm",children:T})]})]})]})}),e.jsx(ie.Footer,{children:e.jsxs("div",{className:"flex justify-between w-full gap-4",children:[e.jsx(Ce,{onClick:U,className:"w-1/2 py-2 text-base",children:"Cancel"},"cancel"),e.jsxs(_e,{onClick:P,className:"w-1/2 py-2 text-base flex items-center justify-center",children:[e.jsx(kt,{size:18,className:"mr-2"}),"Call Now"]},"call")]})})]}),e.jsx(e.Fragment,{children:((p=t==null?void 0:t.attachments)==null?void 0:p.length)>0&&e.jsxs(_e,{className:"action-btns-virtual text-nowrap",onClick:()=>d("reports_download"),children:[e.jsx(Oe,{size:20,className:"!mr-1"}),"Download Reports"]})}),e.jsxs(Ce,{className:"text-nowrap ",onClick:B,children:[e.jsx(et,{size:20,className:"!mr-1"}),"Email"]}),e.jsx(Es,{activeTypes:h,modals:[{type:"reports_download",component:e.jsx(e.Fragment,{children:e.jsx(ie,{open:!0,handleClose:()=>w("reports_download"),title:"Reports Download",width:"500px",headerClassName:"bg-blue-50 border-b border-blue-100 !px-2 rounded-t-2xl",bodyClass:"p-4",children:e.jsx(ie.Body,{children:e.jsx("div",{className:"space-y-4",children:(a=(v=t==null?void 0:t.attachments)==null?void 0:v.filter(g=>(g==null?void 0:g.active_status)==="active"))==null?void 0:a.map((g,b)=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm text-gray-600",children:g.url||`Report ${b+1}`})}),e.jsxs(_e,{onClick:()=>C(g.id),className:"text-sm py-1.5",children:[e.jsx(Oe,{size:18,className:"mr-1"}),"Download"]})]},b))})})})})}]})]})},St=({data:t,instituteAction:N,time:s})=>{const j=ge(),w=ys();switch(t==null?void 0:t.status){case"booking_scheduled":{const d=we((t==null?void 0:t.collection_1_date)??(t==null?void 0:t.collection_2_date),"DD/MM/YYYY"),h=we(`${d.format("YYYY-MM-DD")} ${(t==null?void 0:t.collection_1_slot)??(t==null?void 0:t.collection_2_slot)}`,"YYYY-MM-DD h:mm a"),R=we(s),K=h.diff(R),L=we.duration(K),V=Math.floor(L.asMinutes()),i=L.seconds(),H=`${V}:${Math.abs(Number(i.toString().padStart(2,"0")))}`,r=async $=>{var x,c,z,T,P,U,B;$.key==="call"?await j(bs({patient_name:`${(x=t==null?void 0:t.user)==null?void 0:x.first_name} ${(c=t==null?void 0:t.user)==null?void 0:c.last_name}`,doctor_name:(z=t==null?void 0:t.doctor)==null?void 0:z.name,patient_number:((T=t==null?void 0:t.user)==null?void 0:T.phone)??((U=(P=t==null?void 0:t.user)==null?void 0:P.parent)==null?void 0:U.phone),doctor_number:(B=JSON.parse(localStorage.getItem("user")||JSON.stringify({})))==null?void 0:B.phone,booking_id:t==null?void 0:t.id})):$.key==="video"?w(`/VideoCall?roomID=${t==null?void 0:t.id}`):$.key==="chat"&&console.log("chat")};return fe,fe.Item,fe.Item,fe.Item,V<30&&V>-10?xe()?e.jsxs("span",{className:`status-btns ${V<10?"red-call":"yellow-call"}`,children:[e.jsx(zs,{})," ",H]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"next-text",children:["Next ",H," min"]})}):xe()?e.jsxs("span",{className:"mobile-upcoming-status status-btns text-green-600",children:[e.jsx("img",{className:"label-img",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/106435-1740997677616.png",alt:"upcoming"}),"upcoming"]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"upcoming-text table-status-div text-green-600",children:[e.jsx("img",{className:"label-img",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/106435-1740997677616.png",alt:"upcoming"}),"Upcoming"]})})}case"open":{const d=h=>{h.key==="reshedule"?console.log("reshedule"):h.key==="reject"?N("reject",t):h.key==="accept"&&N("approve",t)};return fe,fe.Item,fe.Item,fe.Item,xe()?e.jsx("span",{className:"status-btns pending-status-mobile",children:"pending"}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"table-status-div pending-text",children:[e.jsx("img",{className:"label-img",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/106435-1740999025608.png",alt:"upcoming"}),"Pending"]})})}case"completed":return xe()?e.jsxs("span",{className:"status-btns completed-status-mobile whole-center",children:[e.jsx(as,{color:"green"}),"Completed"]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"table-status-div completed-status",children:[e.jsx(as,{color:"green"}),"Completed"]})});case"cancelled":return xe()?e.jsxs("span",{className:"status-btns rejected-status-mobile",children:[e.jsx("img",{className:"label-img",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/106435-1741429137408.png",alt:"upcoming"}),"Rejected"]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"table-status-div rejected-text",children:[e.jsx("img",{className:"label-img",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/106435-1740999287595.png",alt:"upcoming"}),"Rejected"]})});default:return e.jsx("span",{title:t==null?void 0:t.status,className:" status-btns other-status-mobile",children:Ne(t==null?void 0:t.status)})}},Ct=Ae.div`
  .form-container {
    background-color: #fff;
    padding: 24px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    max-width: 800px; // Adjust max-width as needed
    margin: auto; // Center the form if needed
  }

  h3 {
    font-size: 1.2rem;
    button {
      padding: 1rem !important;
    }
  }

  .ant-card-body{
    padding:12px !important;
  }

  .form-title {
    margin-bottom: 24px;
    font-size: 1.5rem;
    font-weight: 600;
    text-align: center;
    color: #333;
  }

  .ant-form-item-label > label {
    font-weight: 500;
    color: #555;
  }

  .ant-input,
  .ant-select-selector,
  .ant-input-number,
  .ant-picker {
    border-radius: 4px;
  }

  .ant-input-number {
    width: 100%;
  }

  .form-actions {
    text-align: right;
    margin-top: 24px;
    border-top: 1px solid #f0f0f0;
    padding-top: 16px;

    .cancel-btn {
      margin-right: 8px;
    }
  }

  /* Time slot styling similar to CreateAppointmentForm */
  .date-time-picker-section {
    margin-bottom: 24px;
  }

  /* Date slider styles */
  .date-slider-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    border-radius: 8px;
    margin-bottom: 20px;
  }

  .date-slider {
    display: flex;
    flex: 1;
    overflow: hidden;
    margin: 0 8px;
    justify-content: space-between;
  }

  .date-tab {
    flex: 1;
    text-align: center;
    padding: 12px 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 4px;
    margin: 0 4px;
    border-bottom: 3px solid transparent;
    display: flex;
    flex-direction: column;
    align-items: center;

    &:hover {
      background: #f5f5f5;
    }

    &.active {
      background: #fff;
      border-bottom-color: #1890ff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
  }

  .date-label {
    font-weight: 500;
    font-size: 14px;
    margin-bottom: 4px;
  }

  .slots-count {
    font-size: 12px;
    color: #52c41a;
  }

  .date-slider-nav-btn {
    background: #f0f2f5;
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #555;
    transition: all 0.3s;

    &:hover {
      background: #e6f7ff;
      color: #1890ff;
    }

    &:disabled {
      background: #f5f5f5;
      color: #d9d9d9;
      cursor: not-allowed;
    }
  }

  .time-slot-div {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
  }

  .time-slot {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 12px;
    background: #f0f2f5;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;

    &:hover {
      background: #e6f7ff;
      border-color: #1890ff;
    }

    &.active {
      background: #1890ff;
      color: white;
    }
  }

  h4 {
    margin-bottom: 12px;
    font-weight: 500;
  }

  /* Accordion styling customizations */
  .time-slots-accordions {
    margin-bottom: 24px;

    [data-slot="accordion-trigger"] {
      font-weight: 500;
    }

    [data-slot="accordion-content"] {
      padding: 0 12px;
    }
  }

  // Responsive adjustments if needed
  @media (max-width: 576px) {
    .form-container {
      padding: 16px;
    }
    .form-title {
      font-size: 1.25rem;
    }

    .date-slider {
      overflow-x: auto;
    }
  }

  .bannerWrapper {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: -1rem;
    width: 5rem;
    height: 1.625rem;

    .rectangle {
      display: flex;
      justify-content: center;
      align-items: center;
      background: #89db7b;
      padding: 5px 5px 5px 0px;
      border-radius: 10px 45px 45px 0;
      color: #252b61;
      font-family: Outfit, sans-serif;
      font-size: 12px;
      font-weight: 500;
      letter-spacing: 0.18px;
    }

    .triangle {
      width: 0;
      height: 0;
      border-left: 1rem solid transparent;
      border-top: 0.8rem solid #2c7420;
    }
  }

  .patientTypeContainer {
    /* border: 1px solid #ccc; */
    padding: 10px;
    border-radius: 10px;
  }

  .ant-collapse-content {
    max-height: 300px;
    overflow: auto;
  }
`,{Text:Tt}=ke,It=({onPatientSelect:t,selectedPatient:N,validationErrors:s,setValidationErrors:j})=>{var i,H,r,$;const w=ge(),[d,h]=o.useState(!1),[R,K]=o.useState([]),{linkableId:L}=ve(),V=(x,c)=>{var z;t&&t(c==null?void 0:c.originalItem),(z=s==null?void 0:s.user)!=null&&z.id&&(c!=null&&c.originalItem)&&j(T=>({...T,user:void 0}))};return o.useEffect(()=>{(async()=>{var c,z;h(!0);try{if(L){const P=await w(Ms({searchText:"",page:1,count:1e6,department:"",clientId:L}));(c=P==null?void 0:P.payload)!=null&&c.data&&K((z=P.payload)==null?void 0:z.data)}}catch(T){console.error("Error fetching patients:",T)}finally{h(!1)}})()},[w,L]),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee-select",className:"form-label",children:"Select Existing Employee"}),e.jsx(ce,{status:typeof(s==null?void 0:s.user)=="object"&&((i=s==null?void 0:s.user)!=null&&i.id)?"error":"",id:"employee-select",placeholder:"Search and select a Employee",showSearch:!0,size:"large",value:(N==null?void 0:N.id)||void 0,loading:d,options:(r=(H=R==null?void 0:R.associatedUsers)==null?void 0:H.map)==null?void 0:r.call(H,x=>({label:`${(x==null?void 0:x.first_name)||""} ${(x==null?void 0:x.last_name)||""}`,value:x==null?void 0:x.id,originalItem:x})),onChange:V,filterOption:(x,c)=>((c==null?void 0:c.label)??"").toLowerCase().includes(x.toLowerCase()),optionRender:x=>{var c,z,T,P,U,B,C,k;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:((z=(c=x==null?void 0:x.originalItem)==null?void 0:c.user)==null?void 0:z.image)||"https://placehold.co/40x40",alt:`${((P=(T=x==null?void 0:x.originalItem)==null?void 0:T.user)==null?void 0:P.first_name)||""} ${((B=(U=x==null?void 0:x.originalItem)==null?void 0:U.user)==null?void 0:B.last_name)||""}`,className:"w-8 h-8 rounded-full mr-2 object-cover"}),e.jsxs("div",{children:[e.jsx("div",{children:x==null?void 0:x.label}),e.jsx("div",{className:"text-xs text-gray-500",children:((k=(C=x==null?void 0:x.originalItem)==null?void 0:C.user)==null?void 0:k.email)||""})]})]})},className:"w-full"}),typeof(s==null?void 0:s.user)=="object"&&(($=s==null?void 0:s.user)==null?void 0:$.id)&&e.jsx(Tt,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a user"})]})},Ot=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],Is=o.memo(({formData:t,setFormData:N,validationErrors:s,setValidationErrors:j})=>{var k,Y,Z,X,M,D,J,p,v,a,g,b;const w=o.useMemo(()=>t.user||{},[t.user]),d=o.useCallback(m=>{var F;const _=m.target.value;N(G=>({...G,user:{...G.user,firstName:_}})),_&&((F=s.user)!=null&&F.firstName)&&j(G=>({...G,user:{...G.user,firstName:void 0}}))},[N,j,(k=s.user)==null?void 0:k.firstName]),h=o.useCallback(m=>{var F;const _=m.target.value;N(G=>({...G,user:{...G.user,lastName:_}})),_&&((F=s.user)!=null&&F.lastName)&&j(G=>({...G,user:{...G.user,lastName:void 0}}))},[N,j,(Y=s.user)==null?void 0:Y.lastName]),R=o.useCallback(m=>{var F;const _=m.target.value;N(G=>({...G,user:{...G.user,phone:_}})),_&&((F=s.user)!=null&&F.phone)&&j(G=>({...G,user:{...G.user,phone:void 0}}))},[N,j,(Z=s.user)==null?void 0:Z.phone]),K=o.useCallback(m=>{var F;const _=m.target.value;N(G=>({...G,user:{...G.user,email:_}})),_&&((F=s.user)!=null&&F.email)&&j(G=>({...G,user:{...G.user,email:void 0}}))},[N,j,(X=s.user)==null?void 0:X.email]),L=o.useCallback(m=>{var G;const _=m.target.value,F={age:_};if(_){const l=je().subtract(Number(_),"year");F.dob=l.format("YYYY-MM-DD")}N(te=>({...te,user:{...te.user,...F}})),_&&((G=s.user)!=null&&G.age)&&j(te=>({...te,user:{...te.user,age:void 0}}))},[N,j,(M=s.user)==null?void 0:M.age]),V=o.useCallback(m=>{var _;N(F=>({...F,user:{...F.user,gender:m}})),m&&((_=s.user)!=null&&_.gender)&&j(F=>({...F,user:{...F.user,gender:void 0}}))},[N,j,(D=s.user)==null?void 0:D.gender]),i=o.useMemo(()=>w.firstName||"",[w.firstName]),H=o.useMemo(()=>w.lastName||"",[w.lastName]),r=o.useMemo(()=>w.phone||"",[w.phone]),$=o.useMemo(()=>w.email||"",[w.email]),x=o.useMemo(()=>w.age||"",[w.age]),c=o.useMemo(()=>w.gender||"",[w.gender]),z=o.useMemo(()=>{var m;return(m=s.user)==null?void 0:m.firstName},[(J=s.user)==null?void 0:J.firstName]),T=o.useMemo(()=>{var m;return(m=s.user)==null?void 0:m.lastName},[(p=s.user)==null?void 0:p.lastName]),P=o.useMemo(()=>{var m;return(m=s.user)==null?void 0:m.phone},[(v=s.user)==null?void 0:v.phone]),U=o.useMemo(()=>{var m;return(m=s.user)==null?void 0:m.email},[(a=s.user)==null?void 0:a.email]),B=o.useMemo(()=>{var m;return(m=s.user)==null?void 0:m.age},[(g=s.user)==null?void 0:g.age]),C=o.useMemo(()=>{var m;return(m=s.user)==null?void 0:m.gender},[(b=s.user)==null?void 0:b.gender]);return e.jsxs("div",{className:"patientTypeContainer grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx(ye,{size:"large",status:z?"error":"",id:"firstName",name:"firstName",type:"text",placeholder:"Enter First Name",value:i,onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),z&&e.jsx("p",{className:"text-red-500 mt-1",children:z})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx(ye,{size:"large",status:T?"error":"",id:"lastName",name:"lastName",type:"text",placeholder:"Enter Last Name",value:H,onChange:h,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),T&&e.jsx("p",{className:"text-red-500 mt-1",children:T})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"number",className:"block text-sm font-medium text-gray-700",children:"Number"}),e.jsx(ye,{size:"large",status:P?"error":"",id:"number",name:"phone",type:"text",placeholder:"Enter Employee Phone Number",value:r,onChange:R,maxLength:10,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),P&&e.jsx("p",{className:"text-red-500 mt-1",children:P})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"emailId",className:"block text-sm font-medium text-gray-700",children:"Email Id"}),e.jsx(ye,{size:"large",status:U?"error":"",id:"emailId",name:"email",type:"email",placeholder:"Enter Employee Email Id",value:$,onChange:K,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),U&&e.jsx("p",{className:"text-red-500 mt-1",children:U})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700",children:"Age"}),e.jsx(ye,{size:"large",status:B?"error":"",id:"age",name:"age",type:"number",placeholder:"Enter Age",value:x,onChange:L,min:0,max:120,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),B&&e.jsx("p",{className:"text-red-500 mt-1",children:B})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsx(ce,{size:"large",status:C?"error":"",id:"gender",placeholder:"Select Gender",value:c,onChange:V,className:"mt-1 block w-full rounded-md shadow-sm sm:text-sm",options:Ot}),C&&e.jsx("p",{className:"text-red-500 mt-1",children:C})]})]})});Is.displayName="NewPatient";const{Title:$e,Text:ue}=ke,zt=({formData:t,setFormData:N,validationErrors:s,setValidationErrors:j})=>{var h,R,K,L,V,i,H,r,$,x,c,z,T,P,U,B,C,k,Y,Z,X;o.useEffect(()=>{w(null)},[t.userType]);const w=o.useCallback(M=>{N(D=>({...D,user:M}))},[N]),d=M=>{var D,J,p,v,a,g,b,m,_,F,G,te,l,f,I;if(M){const A=M.formatted_address;let O=null,Q=null;typeof((J=(D=M.geometry)==null?void 0:D.location)==null?void 0:J.lat)=="function"?O=(v=(p=M.geometry)==null?void 0:p.location)==null?void 0:v.lat():O=(g=(a=M.geometry)==null?void 0:a.location)==null?void 0:g.lat,typeof((m=(b=M.geometry)==null?void 0:b.location)==null?void 0:m.lng)=="function"?Q=(F=(_=M.geometry)==null?void 0:_.location)==null?void 0:F.lng():Q=(te=(G=M.geometry)==null?void 0:G.location)==null?void 0:te.lng;const u=M.address_components,q=(l=u==null?void 0:u.find(S=>S.types.includes("locality")))==null?void 0:l.long_name,n=(f=u==null?void 0:u.find(S=>S.types.includes("administrative_area_level_1")))==null?void 0:f.long_name,y=(I=u==null?void 0:u.find(S=>S.types.includes("postal_code")))==null?void 0:I.long_name;if(O&&Q){const S={fullAddress:A,detail:null,city:q,latitude:O,longitude:Q,state:n,zip:y};N(E=>({...E,address:S}))}}};return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 !mt-[22px]",children:e.jsxs(ee,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(de,{className:`shadow-md ${s.user?"!border-red-500":""}`,children:e.jsxs(ee,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(tt,{className:"text-blue-500 !mr-2 text-lg"}),e.jsx($e,{level:4,className:"m-0",children:"Patient Type"})]}),e.jsxs("div",{className:"flex items-center justify-start gap-2",children:[e.jsx(ze,{type:(t==null?void 0:t.userType)==="existing"?"primary":"default",onClick:()=>N(M=>({...M,userType:"existing"})),className:`h-10 px-4 !rounded-full flex items-center justify-center focus:outline-none ${(t==null?void 0:t.userType)==="existing"?"!bg-[#222E62] text-white":"bg-white text-[#222E62] border border-[#222E62] hover:bg-opacity-10 hover:bg-[#222E62]"}`,children:e.jsx(ue,{strong:!0,className:`${(t==null?void 0:t.userType)==="existing"?"text-white":"text-[#222E62]"}`,children:"Existing Patient"})}),e.jsx(ue,{strong:!0,className:"text-gray-600",children:"OR"}),e.jsx(ze,{type:(t==null?void 0:t.userType)==="new"?"primary":"default",onClick:()=>N(M=>({...M,userType:"new"})),className:`h-10 px-4 !rounded-full flex items-center justify-center focus:outline-none ${(t==null?void 0:t.userType)==="new"?"!bg-[#222E62] text-white":"bg-white text-[#222E62] border border-[#222E62] hover:bg-opacity-10 hover:bg-[#222E62]"}`,children:e.jsx(ue,{strong:!0,className:`${(t==null?void 0:t.userType)==="new"?"text-white":"text-[#222E62]"}`,children:"New Patient"})})]})]}),e.jsxs("div",{children:[(t==null?void 0:t.userType)==="new"&&e.jsx(Is,{validationErrors:s,formData:t,setValidationErrors:j,setFormData:N}),(t==null?void 0:t.userType)==="existing"&&e.jsx(It,{validationErrors:s,selectedPatient:t.user,onPatientSelect:w,setValidationErrors:j})]})]})}),e.jsx(de,{className:`shadow-md ${s.address?"!border-red-500":""}`,children:e.jsx(ee,{direction:"vertical",size:"large",className:"w-full",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(lt,{className:"text-green-500 !mr-2 text-lg"}),e.jsx($e,{level:4,className:"m-0",children:"Address Information"})]}),e.jsxs(ee,{direction:"vertical",size:"middle",className:"w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx(st,{onChange:M=>N(D=>({...D,address:{...D.address,fullAddress:M.target.value}})),onAddressSelected:d,placeholder:"Enter users's address",className:`w-full h-12 ${(h=s==null?void 0:s.address)!=null&&h.fullAddress?"!border-red-500":""} !rounded-[8px]`,value:((R=t==null?void 0:t.address)==null?void 0:R.fullAddress)??""}),((K=s==null?void 0:s.address)==null?void 0:K.city)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.city})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx(ye,{placeholder:"Enter city",className:`h-12 !rounded-[8px] ${(L=s==null?void 0:s.address)!=null&&L.city?"!border-red-500":""}`,value:((V=t==null?void 0:t.address)==null?void 0:V.city)??"",onChange:M=>N(D=>({...D,address:{...D.address,city:M.target.value}}))}),((i=s==null?void 0:s.address)==null?void 0:i.city)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.city})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx(ye,{placeholder:"Enter state",className:`h-12 !rounded-[8px] ${(H=s==null?void 0:s.address)!=null&&H.state?"!border-red-500":""}`,value:((r=t==null?void 0:t.address)==null?void 0:r.state)??"",onChange:M=>N(D=>({...D,address:{...D.address,state:M.target.value}}))}),(($=s==null?void 0:s.address)==null?void 0:$.state)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.state})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code"}),e.jsx(ye,{placeholder:"Enter ZIP code",maxLength:6,className:`h-12 !rounded-[8px] ${(x=s==null?void 0:s.address)!=null&&x.zip?"!border-red-500":""}`,value:((c=t==null?void 0:t.address)==null?void 0:c.zip)??"",onChange:M=>{const D=M.target.value.replace(/\D/g,"");N(J=>({...J,address:{...J.address,zip:D}}))}}),((z=s==null?void 0:s.address)==null?void 0:z.zip)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.address.zip})]})]})]})]})})}),e.jsx(de,{className:`shadow-md ${(T=s==null?void 0:s.payment)!=null&&T.paymentMethod||(P=s==null?void 0:s.payment)!=null&&P.paymentType?"!border-red-500":""}`,children:e.jsx(ee,{direction:"vertical",size:"large",className:"w-full",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(at,{className:"text-orange-500 !mr-2 text-lg"}),e.jsx($e,{level:4,className:"m-0",children:"Payment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Collection Method"}),e.jsxs(ce,{onChange:M=>{var D;N(J=>({...J,payment:{paymentType:null,paymentMethod:M}})),(D=s==null?void 0:s.payment)!=null&&D.paymentMethod&&M&&j(J=>({...J,payment:{...J.payment,paymentMethod:null}}))},value:(U=t==null?void 0:t.payment)==null?void 0:U.paymentMethod,className:"w-full !h-12",placeholder:"Select payment method",status:(B=s==null?void 0:s.payment)!=null&&B.paymentMethod?"error":"",children:[e.jsx(ce.Option,{value:"clinic_collects",children:e.jsxs("div",{children:[e.jsx(ue,{strong:!0,className:"block",children:"Clinic Collection"}),e.jsx(ue,{className:"text-sm text-gray-600",children:"Amount will be collected by the clinic from patient"})]})}),e.jsx(ce.Option,{value:"raphacure_collects",children:e.jsxs("div",{children:[e.jsx(ue,{strong:!0,className:"block",children:"Raphacure Collection"}),e.jsx(ue,{className:"text-sm text-gray-600",children:"Amount to be collected by Raphacure from patient"})]})}),e.jsx(ce.Option,{value:"raphacure_bills_clinic",children:e.jsxs("div",{children:[e.jsx(ue,{strong:!0,className:"block",children:"Clinic Billing"}),e.jsx(ue,{className:"text-sm text-gray-600",children:"Amount to be billed by Raphacure to the clinic"})]})})]}),((C=s==null?void 0:s.payment)==null?void 0:C.paymentMethod)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.payment.paymentMethod})]}),((k=t==null?void 0:t.payment)==null?void 0:k.paymentMethod)!=="raphacure_collects"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Type"}),e.jsx(ce,{onChange:M=>{var D;N(J=>({...J,payment:{...J.payment,paymentType:M}})),(D=s==null?void 0:s.payment)!=null&&D.paymentType&&M&&j(J=>({...J,payment:{...J.payment,paymentType:null}}))},value:(Y=t==null?void 0:t.payment)==null?void 0:Y.paymentType,className:"w-full !h-12",placeholder:"Select payment type",status:(Z=s==null?void 0:s.payment)!=null&&Z.paymentType?"error":"",children:[{value:"upi",label:"UPI"},{value:"card",label:"Card"},{value:"cash",label:"Cash"},{value:"wallet",label:"Wallet"},{value:"gpay",label:"GPay"},{value:"phonepay",label:"PhonePay"},{value:"bank_transfer",label:"Bank Transfer"},{value:"online_banking",label:"Online Banking"},{value:"other",label:"Other"}].map(M=>e.jsx(ce.Option,{value:M.value,children:M.label},M.value))}),((X=s==null?void 0:s.payment)==null?void 0:X.paymentType)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.payment.paymentType})]})]})})})]})})},Mt=o.memo(zt),{Text:ne}=ke,{Panel:Pt}=Ts,Re=["instant","call","chat","video","opd"],At=[{value:"instant",label:"Instant Call",icon:e.jsx(vs,{className:"mr-2"})},{value:"call",label:"Audio Consult",icon:e.jsx(Fs,{className:"mr-2"})},{value:"chat",label:"Chat Consult",icon:e.jsx($s,{className:"mr-2"})},{value:"video",label:"Video Consult",icon:e.jsx(Rs,{className:"mr-2"})},{value:"opd",label:"OPD Consult",icon:e.jsx(Ns,{className:"mr-2"})}],vt=({formData:t,setFormData:N,validationErrors:s,setValidationErrors:j})=>{var _,F,G,te;const w=o.useRef({doctors:void 0}),d=t.consultation,h=ge(),[R,K]=o.useState("associated_doctors"),{linkableId:L}=ve(),[V,i]=o.useState([]),[H,r]=o.useState([]),[$,x]=o.useState([]),[c,z]=o.useState([]),[T,P]=o.useState([]),[U,B]=o.useState({doctors:!1,categories:!1,timeSlots:!1,clinics:!1}),C=o.useCallback((l,f)=>{N(I=>({...I,consultation:We(l,f,I.consultation)}))},[N]),k=o.useCallback(()=>{N(l=>({...l,consultation:{...l.consultation,selectedSpecialization:[],selectedDoctor:null,selectedDate:null,selectedTimeSlot:null}}))},[N]),Y=o.useCallback(async()=>{var l,f,I;try{B(O=>({...O,categories:!0}));const A=await h(js({filtersNeeded:["category_ids"]}));if(A!=null&&A.error){W.error(((l=A==null?void 0:A.error)==null?void 0:l.message)||"Unknown Error Occured");return}r(((I=(f=A.payload)==null?void 0:f.data)==null?void 0:I.category_ids)||[])}catch{W.error("unknown error occured")}finally{B(A=>({...A,categories:!1}))}},[h]),Z=o.useCallback(async(l="",f=H,I=d.consultType)=>{var A,O,Q;try{B(q=>({...q,doctors:!0}));const u=await h(Ss({filters:{count:10,...I==="opd"?{availabilities:!0}:{},searchText:l,status:["approved"],category_ids:Array.isArray(d.selectedSpecialization)?d.selectedSpecialization:[],...I==="instant"?{availableIn90:!0}:{},client_id:null,...I==="opd"?{type:[I]}:{},...["call","chat","video","instant"].includes(I)?{virtual_type:[I]}:{}}}));u!=null&&u.error?W.error(((A=u==null?void 0:u.error)==null?void 0:A.message)||"Unknown Error Occured"):i(((Q=(O=u==null?void 0:u.payload)==null?void 0:O.data)==null?void 0:Q.doctors)||[])}catch(u){console.error("Error fetching users:",u),W.error("Failed to fetch team members.")}finally{B(u=>({...u,doctors:!1}))}},[h,d.consultType,d.selectedSpecialization,H]),X=o.useCallback(async(l="")=>{var f,I,A,O,Q;try{B(q=>({...q,doctors:!0}));const u=await h(rt({clientId:L??""}));if(u!=null&&u.error){W.error(((f=u==null?void 0:u.error)==null?void 0:f.message)||"Unknown Error Occured");return}else i(((Q=(O=(A=(I=u==null?void 0:u.payload)==null?void 0:I.data)==null?void 0:A.associatedDoctors)==null?void 0:O[0])==null?void 0:Q.doctors)||[])}catch(u){console.error("Error fetching users:",u),W.error("Failed to fetch team members.")}finally{B(u=>({...u,doctors:!1}))}},[h,L]),M=o.useCallback(async()=>{var f,I,A;const l=(f=d.selectedDoctor)==null?void 0:f.id;if(!l){W.error("Please select a doctor first for getting clinics");return}try{B(Q=>({...Q,clinics:!0}));const O=await h(Ps({id:l}));if(O!=null&&O.error){W.error(((I=O==null?void 0:O.error)==null?void 0:I.message)||"Unknown Error Occured");return}else((A=O==null?void 0:O.payload)==null?void 0:A.length)===0&&W.error("No clinics found for this doctor please select another doctor"),P((O==null?void 0:O.payload)||[])}catch{W.error("unknown error occured")}finally{B(O=>({...O,clinics:!1}))}},[h,(_=d.selectedDoctor)==null?void 0:_.id]),D=o.useCallback(async l=>{var O,Q,u;if(!l){W.error("Please select a date first");return}const f=d.selectedDoctor;let I=((O=f==null?void 0:f.doctorDetails)==null?void 0:O.id)||(f!=null&&f.roles&&f.roles.length>0?f.roles[0].linkable_id:null)||((Q=f==null?void 0:f.roleDoctor)==null?void 0:Q.linkable_id)||(f==null?void 0:f.id);if(!I){W.error("Please select a doctor first");return}const A=l;try{B(n=>({...n,timeSlots:!0}));const q=await h(As({id:I,type:d.consultType,date:A}));if(q!=null&&q.error){W.error(((u=q==null?void 0:q.error)==null?void 0:u.message)||"Unknown Error Occured");return}z(q==null?void 0:q.payload)}catch(q){W.error("unknown error occured"),console.error(q)}finally{B(q=>({...q,timeSlots:!1}))}},[h,d.consultType,d.selectedDoctor]),J=o.useCallback(l=>{l?C("selectedDate",je(l).format("YYYY-MM-DD")):C("selectedDate",null),s!=null&&s.date&&j(f=>({...f,date:null}))},[C,s==null?void 0:s.date,j]),p=o.useCallback((l,f)=>{const I=(f==null?void 0:f.originalItem)||null;N(A=>({...A,consultation:{...A.consultation,selectedDoctor:I,selectedDate:null,selectedTimeSlot:null,selectedVendor:null}})),s.doctor&&I&&j(A=>({...A,doctor:null}))},[N,s.doctor,j]);o.useEffect(()=>{Y(),k()},[d.consultType,Y,k]),o.useEffect(()=>{R==="rapha_doctors"?Z():X()},[d.consultType,h,R,$,Z,X]),o.useEffect(()=>{var l;d.consultType==="opd"&&((l=d.selectedDoctor)!=null&&l.id)&&M()},[d.selectedDoctor,d.consultType,M]),o.useEffect(()=>{d.selectedDoctor&&d.selectedDate&&D(d.selectedDate)},[d.selectedDoctor,d.selectedDate,D]);const v=o.useMemo(()=>{var l,f,I,A,O,Q,u,q,n,y,S,E,le,me,ae;return[{title:`Morning (${((I=(f=(l=c==null?void 0:c[0])==null?void 0:l.timeslots)==null?void 0:f.morning)==null?void 0:I.length)??0} slots)`,slots:((O=(A=c==null?void 0:c[0])==null?void 0:A.timeslots)==null?void 0:O.morning)||[]},{title:`Afternoon (${((q=(u=(Q=c==null?void 0:c[0])==null?void 0:Q.timeslots)==null?void 0:u.afternoon)==null?void 0:q.length)??0} slots)`,slots:((y=(n=c==null?void 0:c[0])==null?void 0:n.timeslots)==null?void 0:y.afternoon)||[]},{title:`Evening (${((le=(E=(S=c==null?void 0:c[0])==null?void 0:S.timeslots)==null?void 0:E.evening)==null?void 0:le.length)??0} slots)`,slots:((ae=(me=c==null?void 0:c[0])==null?void 0:me.timeslots)==null?void 0:ae.evening)||[]}]},[c]),a=o.useMemo(()=>V==null?void 0:V.filter(l=>(l==null?void 0:l.id)!==null).map(l=>{var f,I;return{label:`${((f=l==null?void 0:l.user)==null?void 0:f.first_name)||""} ${((I=l==null?void 0:l.user)==null?void 0:I.last_name)||""}`,value:l==null?void 0:l.id,originalItem:l}}),[V]),g=o.useMemo(()=>V==null?void 0:V.map(l=>({label:`${(l==null?void 0:l.name)||""} - ${(l==null?void 0:l.specialization)||""}`,value:l.id,originalItem:l})),[V]),b=o.useMemo(()=>H==null?void 0:H.map(l=>({label:`${l==null?void 0:l.name} (${l==null?void 0:l.count} doctors)`,value:l.id})),[H]),m=o.useMemo(()=>T==null?void 0:T.map(l=>{var f,I;return{value:(f=l==null?void 0:l.vendor)==null?void 0:f.id,originalItem:l==null?void 0:l.vendor,label:`${(I=l==null?void 0:l.vendor)==null?void 0:I.name}`}}),[T]);return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 mt-3",children:e.jsxs(ee,{direction:"vertical",size:"large",className:"w-full",children:[Re.includes(d.consultType)&&e.jsxs(de,{title:e.jsxs(ee,{children:[e.jsx(ws,{className:"text-blue-500"}),e.jsx("span",{children:"Select Consultation Type"}),s.consultType&&e.jsx("span",{className:"text-red-500",children:"please select a consultation type"})]}),className:`shadow-md ${s.consultType?"!border-red-500":""}`,children:[e.jsx(ne,{type:"secondary",className:"block mb-4",children:"Choose how you'd like to consult with your doctor"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:At.map(l=>e.jsx(ze,{onClick:()=>C("consultType",l.value),className:`h-10 px-4 py-3 !rounded-full flex items-center justify-center focus:outline-none !shadow-md ${d.consultType===l.value?"!bg-[#222E62] text-white":"bg-white text-[#222E62] border border-[#222E62] hover:bg-opacity-10 hover:bg-[#222E62]"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[d.consultType===l.value&&e.jsx("span",{className:"w-1 h-1 inline-block bg-white rounded-full"}),e.jsx(ne,{strong:!0,className:`${d.consultType===l.value?"text-white":"text-[#222E62]"}`,children:l.label})]})},l.value))})]}),e.jsxs(de,{title:e.jsxs(ee,{children:[e.jsx(_s,{className:"text-green-500"}),e.jsx("span",{children:"Doctor Selection Preference"})]}),className:`shadow-md ${s.doctor?"!border-red-500":""}`,children:[Re.includes(d.consultType)&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{type:"secondary",className:"block mb-4",children:"Choose between your associated doctors or browse all available doctors"}),e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-lg",children:e.jsx(ee,{size:"large",children:e.jsxs(e.Fragment,{children:[e.jsx(ne,{strong:!0,className:R==="rapha_doctors"?"!text-gray-600":"!text-blue-500",children:"Your Associated Doctors"}),e.jsx(Cs,{checked:R==="rapha_doctors",onChange:l=>{k(),K(l?"rapha_doctors":"associated_doctors")},size:"default"}),e.jsx(ne,{strong:!0,className:R==="associated_doctors"?"!text-gray-600":"!text-blue-500",children:"All Platform Doctors"})]})})})]}),d.consultType&&Re.includes(d.consultType)&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{type:"secondary",className:"block mb-4",children:R==="rapha_doctors"?"Choose from available doctors on the platform":"Select from your associated doctors"}),R==="associated_doctors"?e.jsxs("div",{children:[e.jsx(ne,{strong:!0,className:"block mb-2",children:"Search Your Doctors"}),e.jsx(ce,{status:s.doctor?"error":"",placeholder:"Type to search and select a doctor from your team",showSearch:!0,suffixIcon:U.doctors?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:(F=d.selectedDoctor)==null?void 0:F.id,loading:U.doctors,onSearch:X,options:a,filterOption:!1,onChange:p,optionRender:l=>{var f,I,A,O;return e.jsxs("div",{className:"flex items-center py-2",children:[e.jsx("img",{src:((I=(f=l==null?void 0:l.data)==null?void 0:f.originalItem)==null?void 0:I.image)??"https://placehold.co/40x40",alt:`Dr. ${l==null?void 0:l.label}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l==null?void 0:l.label}),e.jsx("div",{className:"text-xs text-gray-600",children:((O=(A=l==null?void 0:l.data)==null?void 0:A.originalItem)==null?void 0:O.specialization)??"General Practice"})]})]})}}),s.doctor&&e.jsx(ne,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a doctor"})]}):e.jsxs(ee,{direction:"vertical",size:"middle",className:"w-full",children:[e.jsxs("div",{children:[e.jsx(ne,{strong:!0,className:"block mb-2",children:"Filter by Specialization"}),e.jsx(ce,{placeholder:"Select one or more specializations to filter doctors",mode:"multiple",showSearch:!0,suffixIcon:U.categories?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:Array.isArray($)?$:[],loading:U.categories,options:b,filterOption:(l,f)=>((f==null?void 0:f.label)??"").toLowerCase().includes(l.toLowerCase()),onChange:x})]}),e.jsxs("div",{children:[e.jsx(ne,{strong:!0,className:"block mb-2",children:"Select Doctor"}),e.jsx(ce,{status:s.doctor?"error":"",placeholder:"Search and select a doctor from the platform",showSearch:!0,suffixIcon:U.doctors?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:(G=d.selectedDoctor)==null?void 0:G.id,loading:U.doctors,onSearch:l=>{clearTimeout(w.current.doctors),w.current.doctors=setTimeout(()=>{Z(l,d.selectedSpecialization,d.consultType)},200)},options:g,filterOption:!1,onChange:p,optionRender:l=>{var f,I,A,O;return e.jsxs("div",{className:"flex items-center py-2",children:[e.jsx("img",{src:((I=(f=l==null?void 0:l.data)==null?void 0:f.originalItem)==null?void 0:I.image)??"https://placehold.co/40x40",alt:`Dr. ${l==null?void 0:l.label}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l==null?void 0:l.label}),e.jsx("div",{className:"text-xs text-gray-600",children:((O=(A=l==null?void 0:l.data)==null?void 0:A.originalItem)==null?void 0:O.specialization)??"General Practice"})]})]})}}),s.doctor&&e.jsx(ne,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a doctor"})]})]})]})]}),d.selectedDoctor&&d.consultType!=="instant"&&e.jsxs(de,{title:e.jsxs(ee,{children:[e.jsx(Se,{className:"text-pink-500"}),e.jsx("span",{children:"Schedule Appointment"})]}),className:`shadow-md ${s.date||s!=null&&s.timeSlot?"!border-red-500":""}`,children:[e.jsx(ne,{type:"secondary",className:"block !mb-6",children:"Select your preferred date and time for the consultation"}),e.jsxs(ee,{direction:"vertical",size:"large",className:"w-full",children:[d.consultType==="opd"&&e.jsxs("div",{children:[e.jsx(ne,{strong:!0,className:"block mb-2",children:"Select OPD-Clinic"}),e.jsx(ce,{status:s.vendor?"error":"",placeholder:"Select a clinic",suffixIcon:U.clinics?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:"#1677ff"}}),size:"large",className:"w-full",value:(te=d.selectedVendor)==null?void 0:te.id,loading:U.clinics,options:m,filterOption:!1,onChange:(l,f)=>{const I=(f==null?void 0:f.originalItem)||null;C("selectedVendor",I)},optionRender:l=>{var f,I,A,O,Q,u,q,n;return e.jsxs("div",{className:"flex items-center py-2 gap-2",children:[e.jsx("img",{src:((I=(f=l==null?void 0:l.data)==null?void 0:f.originalItem)==null?void 0:I.image)||"https://placehold.co/40x40",alt:`${(O=(A=l==null?void 0:l.data)==null?void 0:A.originalItem)==null?void 0:O.name}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:(u=(Q=l==null?void 0:l.data)==null?void 0:Q.originalItem)==null?void 0:u.name}),e.jsx("div",{className:"text-xs text-gray-600",children:((n=(q=l==null?void 0:l.data)==null?void 0:q.originalItem)==null?void 0:n.address)??"Address not availabe"})]})]})}}),s.vendor&&e.jsx(ne,{strong:!0,className:"block mb-2 !text-red-500",children:"please select a Clinic"})]}),e.jsxs("div",{children:[e.jsxs(ne,{strong:!0,className:"block !mb-3",children:[e.jsx(Se,{className:"!mr-2"}),"Select Date"]}),e.jsx(Me,{status:s!=null&&s.date?"error":"",onChange:J,value:d.selectedDate?je(d.selectedDate):null,size:"large",className:"w-[300px]",placeholder:"Choose appointment date",disabledDate:l=>l&&l<je().startOf("day")}),(s==null?void 0:s.date)&&e.jsx(ne,{strong:!0,className:"block !text-red-500",children:"please select a date"})]}),e.jsxs("div",{children:[e.jsxs(ne,{strong:!0,className:"block !mb-3",children:[e.jsx(Pe,{className:"!mr-2"}),"Available Time Slots",(s==null?void 0:s.timeSlot)&&e.jsx("span",{className:"text-red-500 !ml-2",children:"(please select a timeslot)"})]}),U.timeSlots?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsxs(ee,{size:"middle",children:[e.jsx(oe,{indicator:e.jsx(Ve,{spin:!0}),size:"large"}),e.jsx(ne,{className:"text-base",children:"Loading available time slots..."})]})}):d.selectedDate&&c?e.jsx(Ts,{size:"large",className:"bg-gray-50",children:v.map((l,f)=>{var I,A;return e.jsx(Pt,{header:e.jsxs(ee,{children:[e.jsx(Pe,{className:"text-blue-500"}),e.jsx(ne,{strong:!0,children:l.title}),e.jsxs(ne,{type:"secondary",className:"text-xs",children:["(",((I=l.slots)==null?void 0:I.length)||0," slots available)"]})]}),children:e.jsx(pt,{gutter:[12,12],className:"max-w-3xl",children:((A=l.slots)==null?void 0:A.length)>0?l.slots.map(O=>e.jsx(ps,{xs:12,sm:8,md:6,lg:4,children:e.jsx(ze,{type:d.selectedTimeSlot===O?"primary":"default",size:"large",className:`w-full h-12 font-medium ${d.selectedTimeSlot===O?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"}`,onClick:()=>{C("selectedTimeSlot",O),s!=null&&s.timeSlot&&O&&j(Q=>({...Q,timeSlot:null}))},children:O})},O)):e.jsx(ps,{span:24,children:e.jsx(Fe,{message:"No time slots available for this period",type:"info",showIcon:!0,className:"text-center"})})})},f)})}):d.selectedDate?e.jsx(Fe,{message:"No time slots available",description:"Please try selecting a different date",type:"warning",showIcon:!0,className:"text-center p-10"}):e.jsx(Fe,{message:"Select a date first",description:"Choose an appointment date to view available time slots",type:"info",showIcon:!0,className:"text-center p-10"})]})]})]})]})})},Ft=De.memo(vt),{Title:$t,Text:pe}=ke,Ie={id:1,name:"Raphacure Preferred Vendor",phone:"95551 66000",address:"We will select the nearest vendor for you!",city:"Nearby",zip:560102,slot_start_time:"07:00:00",slot_end_time:"19:00:00",week_off_days:"0",type:"pathology_lab",parent_id:null,mapped_pin_codes:"500075,500034,",image:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/wa-default.png",rating:null,status:"requested",old_users_data:null,created_at:null,updated_at:"2025-04-25T05:18:27.456Z",state:"karnataka",search_keys:"Raphacure Preferred Vendor",instant_pin_codes:null,facilities:[],services:[],default_consultation_cost:0,available_in_90:!1,collection_type:"center",address1:null,address2:null,latitude:null,longitude:null,primary_email:"wellness@raphacure.com",secondary_email:null,created_by:null,spoc_contact_first_name:null,spoc_contact_last_name:null,spoc_contact_phone_no:null,spoc_contact_email:null,spoc_contact_office_no:null,spoc_contact_designation:null,marketplace_name:"raphacure",gst_number:null,secondary_phone:null,registration_details:null,vendor_client_id:null,is_premium:!1,country_code:null,price:{actual_cost:1200,discount_percentage:0,service_charges:0,discounted_price:1200}},Rt=({setFormData:t,formData:N,consultType:s,validationErrors:j,setValidationErrors:w})=>{var M,D,J;const d=N==null?void 0:N.tests,[h,R]=o.useState([Ie]),[K,L]=o.useState(Ie),V=ge(),[i,H]=De.useState([]),[r,$]=o.useState([]),[x,c]=De.useState({testsList:!1,vendorsList:!1,timeSLots:!1});o.useEffect(()=>{R([Ie]),L(Ie),H([]),$([])},[s]),o.useEffect(()=>{switch(s){case"labpackage":T();break;case"labtest":P();break;case"radiology":U();break}},[s,V]),o.useEffect(()=>{d!=null&&d.selectedDate&&(z(d==null?void 0:d.selectedDate),Y("selectedTimeSlot",null))},[d.selectedDate,V,K]);const z=async p=>{var v,a,g;if(!p){W.error("Please select a date first");return}try{c(m=>({...m,timeSLots:!0}));const b=await V(Ys({date:p,vendorId:1}));if(b!=null&&b.error){W.error(((v=b==null?void 0:b.error)==null?void 0:v.message)||"Unknown Error Occured");return}$(((g=(a=b==null?void 0:b.payload)==null?void 0:a.data)==null?void 0:g.timeslots)??[])}catch(b){W.error("unknown error occured"),console.error(b)}finally{c(b=>({...b,timeSLots:!1}))}},T=async(p="")=>{var v,a,g,b;try{c({...x,testsList:!0});const _=await V(Bs({filters:{categoryIds:[],count:20,isCorporate:!1,type:"diagnostic",page:1,searchText:p}}));if(_!=null&&_.error){W.error(((a=(v=_==null?void 0:_.error)==null?void 0:v.data)==null?void 0:a.message)??"Something went wrong");return}else H((b=(g=_==null?void 0:_.payload)==null?void 0:g.data)==null?void 0:b.data)}catch{W.error("Something went wrong")}finally{c({...x,testsList:!1})}},P=async(p="")=>{var v,a,g;try{c(_=>({..._,testsList:!0}));const m=await V(os({filters:{categoryIds:[],count:20,page:1,searchText:p}}));if(m!=null&&m.error){W.error(((a=(v=m==null?void 0:m.error)==null?void 0:v.data)==null?void 0:a.message)??"Something went wrong");return}else H((g=m==null?void 0:m.payload)==null?void 0:g.data)}catch{W.error("Something went wrong")}finally{c(b=>({...b,testsList:!1}))}},U=async(p="")=>{var v,a,g;try{c(_=>({..._,testsList:!0}));const m=await V(os({filters:{searchText:p,categoryIds:[],testType:"ctmri",count:20,page:1,active_status:"active"}}));if(m!=null&&m.error){W.error(((a=(v=m==null?void 0:m.error)==null?void 0:v.data)==null?void 0:a.message)??"Something went wrong");return}else H((g=m==null?void 0:m.payload)==null?void 0:g.data)}catch{W.error("Something went wrong")}finally{c(b=>({...b,testsList:!1}))}},B=async p=>{switch(s){case"labpackage":T(p);break;case"labtest":P(p);break;case"radiology":U(p);break}},C=p=>{t(v=>{var a;return{...v,tests:{...v.selectedTest,selectedVendor:K,selectedTest:Array.isArray(p)?(a=p==null?void 0:p.map)==null?void 0:a.call(p,g=>g==null?void 0:g.originalItem):[p==null?void 0:p.originalItem]}}}),(j!=null&&j.vendor||j!=null&&j.test)&&w(v=>({...v,vendor:K!=null&&K.id?null:v.vendor,test:p?null:v.selectedTest}))},k=p=>{p?Y("selectedDate",je(p).format("YYYY-MM-DD")):Y("selectedDate",null),p&&(j!=null&&j.date)&&w(v=>({...v,date:null}))},Y=(p,v)=>{t(a=>({...a,tests:We(p,v,a.tests)}))},X=(()=>{switch(s){case"labpackage":return{title:"Lab Packages",placeholder:"Search Lab Packages...",icon:e.jsx(ws,{}),mode:void 0,color:"#1677ff;"};case"labtest":return{title:"Lab Tests",placeholder:"Search Lab Tests...",icon:e.jsx(ct,{}),mode:"multiple",color:"#1677ff;"};case"radiology":return{title:"Radiology Tests",placeholder:"Search Radiology Tests...",icon:e.jsx(nt,{}),mode:"multiple",color:"#1677ff;"};default:return null}})();return!["labpackage","labtest","radiology"].includes(s)||!X?null:e.jsxs("div",{className:"max-w-screen-xl mx-auto px-2 !mt-[22px]",children:[e.jsx(de,{className:"search-component-card",style:{marginBottom:24,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:"8px",border:`1px solid ${X.color}20`},children:e.jsxs(ee,{direction:"vertical",size:"middle",className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"text-[18px]",style:{color:X.color},children:X.icon}),e.jsx($t,{className:"text-nowrap m-0",level:4,style:{color:X.color},children:X.title})]}),e.jsxs("div",{children:[e.jsx(ce,{placeholder:"Select Vendor",size:"middle",status:j.vendor?"error":"",loading:x==null?void 0:x.vendorsList,showSearch:!0,allowClear:!0,filterOption:!1,suffixIcon:x!=null&&x.testsList?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:X.color}}),className:"w-full",onSearch:async p=>{B(p)},options:(M=h==null?void 0:h.map)==null?void 0:M.call(h,p=>({label:p==null?void 0:p.name,value:p==null?void 0:p.id,originalItem:p})),value:K==null?void 0:K.id}),j.vendor&&e.jsx("p",{className:"!m-0 text-red-500",children:j.vendor})]})]}),e.jsx(pe,{type:"secondary",children:s==="labpackage"?"Select a comprehensive lab package for multiple health checks":`Search and select ${s==="labtest"?"individual lab tests":"radiology examinations"} as needed`}),e.jsx(Te,{layout:"vertical",children:e.jsxs(Te.Item,{label:e.jsxs("span",{className:"font-semibold text-[#262626]",children:[X.title," Selection"]}),className:"mb-0",children:[e.jsx(ce,{status:j.test?"error":"",placeholder:X.placeholder,mode:X.mode,size:"large",loading:x==null?void 0:x.testsList,showSearch:!0,allowClear:!0,filterOption:!1,suffixIcon:x!=null&&x.testsList?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:X.color}}),style:{width:"100%"},onSearch:async p=>{B(p)},options:i==null?void 0:i.map(p=>({label:p.service_name,value:p.service_code,originalItem:p})),optionRender:p=>{var v,a;return e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"font-medium text-[#262626]",children:[e.jsx("img",{src:((a=(v=p.data.originalItem)==null?void 0:v.image)==null?void 0:a[0])??"https://placehold.co/40x40",alt:p.data.originalItem.service_name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 !mr-3"}),p.data.originalItem.service_name]}),p.data.originalItem.service_code&&e.jsxs("div",{className:"text-xs text-[#8c8c8c]",children:["Code: ",p.data.originalItem.service_code]})]})},onChange:(p,v)=>{C(v)},value:Array.isArray(d.selectedTest)?(D=d.selectedTest)==null?void 0:D.map(p=>p.service_code):(J=d.selectedTest)==null?void 0:J.service_code}),j.test&&e.jsx(pe,{strong:!0,className:"block mb-2 !text-red-500",children:j.test})]})})]})}),d.selectedTest&&e.jsxs(de,{title:e.jsxs(ee,{children:[e.jsx(Se,{className:"text-pink-500"}),e.jsx("span",{children:"Schedule Appointment"})]}),className:"shadow-md",children:[e.jsx(pe,{type:"secondary",className:"block mb-6",children:"Select your preferred date and time for the consultation"}),e.jsxs(ee,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs("div",{children:[e.jsxs(pe,{strong:!0,className:"block mb-3",children:[e.jsx(Se,{className:"!mr-2"}),"Select Date"]}),e.jsx(Me,{status:j.date?"error":"",onChange:k,value:d.selectedDate?je(d.selectedDate):null,size:"large",className:"w-[300px]",placeholder:"Choose appointment date",disabledDate:p=>p&&p<je().startOf("day")}),j.date&&e.jsx(pe,{strong:!0,className:"block mb-2 !text-red-500",children:j.date})]}),e.jsxs("div",{children:[e.jsxs(pe,{strong:!0,className:"block mb-3",children:[e.jsx(Pe,{className:"!mr-2"}),"Available Time Slots"," ",j.timeSlot&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",j.timeSlot,")"]})]}),x.timeSLots?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsxs(ee,{size:"middle",children:[e.jsx(oe,{indicator:e.jsx(Ve,{spin:!0}),size:"large"}),e.jsx(pe,{className:"text-base",children:"Loading available time slots..."})]})}):d.selectedDate?r.length===0?e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(Pe,{className:"text-2xl text-gray-400 mb-2"}),e.jsx(pe,{className:"block text-gray-500",children:"No time slots available for the selected date"})]}):e.jsx(Te,{layout:"vertical",children:e.jsxs(Te.Item,{label:e.jsx("span",{className:"font-semibold text-[#262626]",children:"Select Time Slot"}),className:"mb-0",children:[e.jsx(ce,{status:j.timeSlot?"error":"",placeholder:"Choose a time slot",size:"large",style:{width:"100%"},value:d.selectedTimeSlot,onChange:p=>{Y("selectedTimeSlot",p),p&&j.timeSlot&&w(v=>({...v,timeSlot:void 0}))},options:r.map(p=>({label:p==null?void 0:p.slot,value:p==null?void 0:p.slot})),notFoundContent:e.jsx("div",{className:"text-center py-2 text-gray-500",children:"No time slots available"})}),j.timeSlot&&e.jsx(pe,{strong:!0,className:"block mb-2 !text-red-500",children:j.timeSlot})]})}):e.jsxs("div",{className:"text-center !py-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(Se,{className:"text-2xl text-gray-400 mb-2"}),e.jsx(pe,{className:"block text-gray-500",children:"Please select a date first to view available time slots"})]})]})]})]})]})},Yt=o.memo(Rt),{Text:Ye}=ke,Bt=({validationErrors:t,formData:N,setFormData:s,setValidationErrors:j})=>{var $,x;const w=N.pharmacy,d=ge(),h=o.useRef({medicineTimer:void 0}),[R,K]=o.useState({pharmacy:!1}),[L,V]=o.useState([]);o.useEffect(()=>{i()},[d]);const i=async(c="")=>{clearTimeout(h.current.medicineTimer),h.current.medicineTimer=setTimeout(async()=>{try{K(T=>({...T,pharmacy:!0}));const z=await d(ht({count:10,page:1,searchText:c}));z.error?W.error(z.payload.message||"Something went wrong"):V(z.payload.data)}catch{W.error("Something went wrong")}finally{K(z=>({...z,pharmacy:!1}))}},250)},H=(c,z)=>{s(T=>{const P=T.pharmacy.selectedMedicines||[];if(P.find(B=>B.item.service_code===c)){if(z===0){const C=P.filter(k=>k.item.service_code!==c);return{...T,pharmacy:{...T.pharmacy,selectedMedicines:C}}}const B=P.map(C=>C.item.service_code===c?{...C,quantity:z}:C);return{...T,pharmacy:{...T.pharmacy,selectedMedicines:B}}}return T})},r=(c,z)=>{const T=z.filter(P=>(P==null?void 0:P.originalItem)&&c.includes(P.value)).map(P=>({item:P.originalItem,quantity:1}));s(P=>{const B=(P.pharmacy.selectedMedicines||[]).filter(k=>c.includes(k.item.service_code)),C=T.filter(k=>!B.some(Y=>Y.item.service_code===k.item.service_code));return{...P,pharmacy:{...P.pharmacy,selectedMedicines:[...B,...C]}}}),c&&t.pharmacy&&j(P=>({...P,pharmacy:void 0}))};return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 mt-3",children:e.jsx(ee,{direction:"vertical",size:"large",className:"w-full",children:e.jsxs(de,{title:e.jsxs(ee,{children:[e.jsx(us,{className:"text-green-500"}),e.jsx("span",{children:"Medicine Selection"})]}),className:`shadow-md ${t.pharmacy?"!border-red-500":""}`,children:[e.jsxs(e.Fragment,{children:[e.jsx(Ye,{type:"secondary",className:"block mb-4",children:"Select from Medicines from the list"}),e.jsxs("div",{children:[e.jsx(Ye,{strong:!0,className:"block mb-2",children:"Search Your Medicines"}),e.jsx(ce,{status:t.pharmacy?"error":"",placeholder:"Type to search and select a medicines from the list",showSearch:!0,suffixIcon:R.pharmacy?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:"#1677ff"}}),mode:"multiple",size:"large",className:"w-full",value:($=w.selectedMedicines)==null?void 0:$.map(c=>{var z;return(z=c==null?void 0:c.item)==null?void 0:z.service_code}),loading:R.pharmacy,onSearch:c=>i(c),options:L.map(c=>({label:`${(c==null?void 0:c.service_name)??(c==null?void 0:c.service_code)}`,value:c==null?void 0:c.service_code,originalItem:c})),filterOption:!1,onChange:r,optionRender:c=>{var z,T,P,U,B;return e.jsxs("div",{className:"flex items-center py-2",children:[e.jsx("img",{src:((P=(T=(z=c==null?void 0:c.data)==null?void 0:z.originalItem)==null?void 0:T.image)==null?void 0:P[0])??e.jsx(us,{}),alt:`${c==null?void 0:c.label}`,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c==null?void 0:c.label}),e.jsx("div",{className:"text-xs text-gray-600",children:((B=(U=c==null?void 0:c.data)==null?void 0:U.originalItem)==null?void 0:B.company)??"company not available"})]})]})}}),t.pharmacy&&e.jsx(Ye,{strong:!0,className:"block mb-2 !text-red-500",children:t.pharmacy})]})]}),e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(x=w.selectedMedicines)==null?void 0:x.map((c,z)=>{var T;return e.jsx(it,{medicineDetail:c.item,sectionName:(T=c==null?void 0:c.item)==null?void 0:T.category_key,onCountChange:H},z)})})})]})})})},Lt=o.memo(Bt),Ut=o.memo(({reports:t,setReports:N,validationErrors:s,setValidationErrors:j})=>{var r,$,x,c,z,T,P,U,B,C;const[w,d]=o.useState(!1),[h,R]=o.useState(!1),[K,L]=o.useState(""),V=k=>{L(k),R(!0)},i=()=>{d(!1)},H=k=>{var Y;if(Array.isArray(t==null?void 0:t.urls)&&((Y=t==null?void 0:t.urls)==null?void 0:Y.length)>k){const Z=[...t.urls];Z.splice(k,1),N("urls",Z)}};return e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2",children:["Upload Reports"," ",((r=s==null?void 0:s.secondOpinion)==null?void 0:r.reports)&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",($=s==null?void 0:s.secondOpinion)==null?void 0:$.reports,")"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row mt-3 mb-5 w-full gap-6",children:[e.jsx("div",{className:"flex flex-col gap-2 w-full",children:((x=t==null?void 0:t.urls)==null?void 0:x.length)>0?(c=t==null?void 0:t.urls)==null?void 0:c.map((k,Y)=>e.jsxs("div",{className:"flex items-center p-2 bg-slate-100 border border-gray-300 rounded-md",children:[e.jsx("span",{children:e.jsx(gt,{url:k,openPreview:V,handleRemoveFile:()=>H(Y),fileContainerClassName:"w-[80px] h-[80px]"})}),e.jsxs("div",{className:"flex-grow !ml-2",children:[e.jsx("h6",{className:"font-medium text-sm",children:k==null?void 0:k.name}),e.jsx("p",{className:"text-xs text-gray-600",children:k.description})]}),e.jsx("button",{onClick:()=>H(Y),className:"text-red-500 hover:text-red-700",children:e.jsx(ut,{color:"#FF0000"})})]},k==null?void 0:k.index)):e.jsx("div",{className:"flex justify-center items-center h-full border border-gray-300 rounded-md text-gray-500",children:e.jsx("p",{children:"No reports Added"})})}),e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs(Dt,{onClick:()=>d(!0),children:[e.jsx("img",{className:"uploadIcon",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/111904-1743769172669.png",alt:""}),e.jsx("div",{children:e.jsx("span",{className:"chooseFile",children:"Add a report"})})]})}),e.jsxs(ie,{open:w,handleClose:()=>d(!1),title:"Upload Medical Report",width:"600px",children:[e.jsx(ie.Body,{children:e.jsx(dt,{acceptType:["jpeg","png","pdf"],fileUrls:Array.isArray(t==null?void 0:t.urls)?t==null?void 0:t.urls:[],setFileUrls:k=>{var Y;N("urls",k),(Y=s==null?void 0:s.secondOpinion)!=null&&Y.reports&&k&&j({...s,secondOpinion:{...s.secondOpinion,reports:""}})},mode:"multiple"})}),e.jsx(ie.Footer,{children:e.jsx("div",{className:"flex justify-end",children:e.jsx(_e,{onClick:i,children:"Add Report"})})})]}),e.jsx(ft,{previewOpen:h,closePreview:()=>R(!1),previewFile:K})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2",children:["Primary Contact Number"," ",((z=s==null?void 0:s.secondOpinion)==null?void 0:z.phone)&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",(T=s==null?void 0:s.secondOpinion)==null?void 0:T.phone,")"]})]}),e.jsx("input",{type:"tel",value:t==null?void 0:t.phone,onChange:k=>{var Z;const Y=k.target.value.replace(/\D/g,"").slice(0,10);N("phone",Y),(Z=s==null?void 0:s.secondOpinion)!=null&&Z.phone&&Y&&j({...s,secondOpinion:{...s.secondOpinion,phone:""}})},placeholder:"Enter primary contact number",maxLength:10,className:`px-3 py-2 border ${(P=s==null?void 0:s.secondOpinion)!=null&&P.phone?"!border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent`})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2",children:"Alternate Person Phone Number"}),e.jsx("input",{type:"tel",value:t==null?void 0:t.alternate_phone,onChange:k=>{var Z;const Y=k.target.value.replace(/\D/g,"").slice(0,10);N("alternate_phone",Y),(Z=s==null?void 0:s.secondOpinion)!=null&&Z.phone&&Y&&j({...s,secondOpinion:{...s.secondOpinion,phone:""}})},placeholder:"Enter alternate person phone number",maxLength:10,className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 mb-2",children:["Comments"," ",((U=s==null?void 0:s.secondOpinion)==null?void 0:U.comments)&&e.jsxs("p",{className:"text-red-500 m-0 inline-block",children:["(",(B=s==null?void 0:s.secondOpinion)==null?void 0:B.comments,")"]})]}),e.jsx("textarea",{value:t==null?void 0:t.comments,onChange:k=>{var Y;N("comments",k.target.value),(Y=s==null?void 0:s.secondOpinion)!=null&&Y.comments&&k.target.value&&j({...s,secondOpinion:{...s.secondOpinion,comments:""}})},placeholder:"Enter any additional comments",rows:4,className:`px-3 py-2 border ${(C=s==null?void 0:s.secondOpinion)!=null&&C.comments?"!border-red-500":"border-gray-300"} rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical`})]})]})]})}),Dt=Ae.div`
  border: 1px dashed #7291f4;
  border-radius: 25px;
  padding: 35px;
  cursor: pointer;
  text-align: center;
  background-color: white;
  transition: all 0.3s ease;

  &:hover {
    background-color: #f5f8ff;
  }

  .uploadIcon {
    width: 60px;
    height: 51px;
    margin-bottom: 10px;
  }

  .chooseFile {
    font-weight: 500;
    border-bottom: 1px solid #252b61;
  }

  p {
    color: #888888;
    font-weight: 400;
    font-size: 14px;
    letter-spacing: 1.5px;
    margin-top: 8px;
  }
`,{Text:be}=ke,Be=[{id:102,name:"Cardiology"},{id:115,name:"Oncology"},{id:103,name:"Orthopedics"},{id:105,name:"Neurology"},{id:104,name:"Gastroenterology"},{id:88,name:"General Surgery"}],Le=Be==null?void 0:Be.map(t=>t==null?void 0:t.id),Wt=({formData:t,setFormData:N,validationErrors:s,setValidationErrors:j})=>{var U,B,C,k,Y,Z,X,M,D,J,p,v;o.useRef({doctors:void 0});const w=t.secondOpinion,d=ge(),[h,R]=o.useState("doctors"),[K,L]=o.useState([]),[V,i]=o.useState([]),[H,r]=o.useState([]),[$,x]=o.useState({doctors:!1,categories:!1}),c=()=>{N(a=>({...a,secondOpinion:{selectedDoctor:null,selectedVendor:null,selectedCategory:null,urls:null,phone:null,comments:null,alternate_phone:null}}))};o.useEffect(()=>{z("",H,h)},[d,h,H]),o.useEffect(()=>{T(),c()},[]);const z=async(a="",g,b="doctors")=>{var m,_,F,G,te;if(b==="doctors")try{x(f=>({...f,doctors:!0}));const l=await d(Ss({filters:{count:10,searchText:a,is_doctor_second_opinion:!0,status:["approved"],category_ids:Array.isArray(g)?g:[],client_id:null}}));l!=null&&l.error?(W.error(((m=l==null?void 0:l.error)==null?void 0:m.message)||"Unknown Error Occured"),L([])):L((F=(_=l==null?void 0:l.payload)==null?void 0:_.data)==null?void 0:F.doctors)}catch(l){console.error("Error fetching users:",l),W.error("Failed to fetch team members."),L([])}finally{x(l=>({...l,doctors:!1}))}else if(b==="vendors")try{x(f=>({...f,doctors:!0}));const l=await d(Ls({filters:{page:1,count:10,is_international:!0,search_text:a}}));l!=null&&l.error?(W.error(((G=l==null?void 0:l.error)==null?void 0:G.message)||"Unknown Error Occured"),L([])):L((te=l==null?void 0:l.payload)==null?void 0:te.vendors)}catch(l){console.error("Error fetching users:",l),W.error("Failed to fetch team members."),L([])}finally{x(l=>({...l,doctors:!1}))}},T=async()=>{var a,g,b;try{x(_=>({..._,categories:!0}));const m=await d(js({filtersNeeded:["category_ids"]}));if(m!=null&&m.error){W.error(((a=m==null?void 0:m.error)==null?void 0:a.message)||"Unknown Error Occured");return}i(((b=(g=m.payload)==null?void 0:g.data)==null?void 0:b.category_ids)||[])}catch{W.error("unknown error occured")}finally{x(m=>({...m,categories:!1}))}},P=(a,g)=>{N(b=>({...b,secondOpinion:We(a,g,b.secondOpinion)}))};return e.jsx("div",{className:"max-w-screen-xl mx-auto px-2 mt-3",children:e.jsxs(ee,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs(de,{title:e.jsxs(ee,{children:[e.jsx(_s,{className:"text-green-500"}),e.jsx("span",{children:"Doctor Selection Preference"})]}),className:`shadow-md ${s.doctor?"!border-red-500":""}`,children:[e.jsxs(e.Fragment,{children:[e.jsx(be,{type:"secondary",className:"block mb-4",children:"Choose between International Doctors and Hospitals"}),e.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 rounded-lg",children:e.jsx(ee,{size:"large",children:e.jsxs(e.Fragment,{children:[e.jsx(be,{strong:!0,className:h!=="doctors"?"!text-gray-600":"!text-blue-500",children:"Indian Second Opinion(Doctors)"}),e.jsx(Cs,{checked:h!=="doctors",onChange:a=>{c(),R(a?"vendors":"doctors")},size:"default"}),e.jsx(be,{strong:!0,className:h!=="doctors"?"!text-blue-500":"!text-gray-600",children:"International Secound Opinion(Hospitals)"})]})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(be,{strong:!0,className:"block mb-2",children:"Specializations"}),e.jsx(ce,{status:(U=s==null?void 0:s.secondOpinion)!=null&&U.category?"error":void 0,className:"w-full mb-2",id:"secoundOpinionSpec",placeholder:"Select specializations",loading:$.categories,value:h==="doctors"?H:w.selectedCategory,size:"large",suffixIcon:$.doctors?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:"#1677ff"}}),mode:h==="doctors"?"multiple":void 0,showSearch:!0,options:h==="vendors"?(B=V==null?void 0:V.filter(a=>Le==null?void 0:Le.includes(a==null?void 0:a.id)))==null?void 0:B.map(a=>({label:`${a==null?void 0:a.name}`,value:a.id})):V==null?void 0:V.map(a=>({label:`${a==null?void 0:a.name}`,value:a.id})),filterOption:(a,g)=>((g==null?void 0:g.label)??"").toLowerCase().includes(a.toLowerCase()),onChange:a=>{var g;h==="vendors"?(P("selectedCategory",a),(g=s==null?void 0:s.secondOpinion)!=null&&g.category&&a&&j(b=>({...b,secondOpinion:{...b.secondOpinion,category:void 0}}))):h==="doctors"&&r(a)}}),((C=s.secondOpinion)==null?void 0:C.category)&&e.jsx(be,{strong:!0,className:"block mb-2 !text-red-500",children:(k=s.secondOpinion)==null?void 0:k.category}),e.jsx(be,{strong:!0,className:"block mb-2",children:`Select ${h==="vendors"?"International Hospitals":"Doctors"} from Rapha Platform`}),e.jsx(ce,{className:"w-full",id:"secoundOpinionDoctor",placeholder:"Search and select a secound opinion doctor",showSearch:!0,status:h==="doctors"?(Y=s==null?void 0:s.secondOpinion)!=null&&Y.doctor?"error":void 0:(Z=s==null?void 0:s.secondOpinion)!=null&&Z.vendor?"error":void 0,size:"large",suffixIcon:$.doctors?e.jsx(oe,{size:"small"}):e.jsx(he,{style:{color:"#1677ff"}}),loading:$.doctors,value:h==="doctors"?(X=w.selectedDoctor)==null?void 0:X.id:h==="vendors"?(M=w==null?void 0:w.selectedVendor)==null?void 0:M.id:null,onSearch:a=>z(a,H,h),options:h==="doctors"?K==null?void 0:K.map(a=>({label:`${(a==null?void 0:a.name)||""} - ${(a==null?void 0:a.specialization)||""}`,value:a.id,originalItem:a})):K==null?void 0:K.map(a=>({label:`${(a==null?void 0:a.name)||""} - ${(a==null?void 0:a.specialization)||""}`,value:a.id,originalItem:a})),filterOption:!1,onChange:(a,g)=>{var b,m;if(h==="doctors"){const _=(g==null?void 0:g.originalItem)||null;N(F=>({...F,secondOpinion:{...F.secondOpinion,selectedDoctor:_,selectedVendor:null}})),(b=s==null?void 0:s.secondOpinion)!=null&&b.doctor&&a&&j(F=>({...F,secondOpinion:{...F.secondOpinion,doctor:void 0}}))}else if(h==="vendors"){const _=(g==null?void 0:g.originalItem)||null;N(F=>({...F,secondOpinion:{...F.secondOpinion,selectedDoctor:null,selectedVendor:_}})),(m=s==null?void 0:s.secondOpinion)!=null&&m.vendor&&a&&j(F=>({...F,secondOpinion:{...F.secondOpinion,vendor:void 0}}))}},optionRender:a=>{var g,b,m,_,F;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:((g=a==null?void 0:a.originalItem)==null?void 0:g.image)||((_=(m=(b=a==null?void 0:a.originalItem)==null?void 0:b.roleDoctor)==null?void 0:m.user)==null?void 0:_.image)||"https://placehold.co/40x40",alt:(F=a==null?void 0:a.originalItem)==null?void 0:F.name,className:"w-8 h-8 rounded-full mr-2 object-cover"}),e.jsx("span",{children:a==null?void 0:a.label})]})}}),h==="doctors"?((D=s.secondOpinion)==null?void 0:D.doctor)&&e.jsx(be,{strong:!0,className:"block mb-2 !text-red-500",children:(J=s.secondOpinion)==null?void 0:J.doctor}):((p=s.secondOpinion)==null?void 0:p.vendor)&&e.jsx(be,{strong:!0,className:"block mb-2 !text-red-500",children:(v=s.secondOpinion)==null?void 0:v.vendor})]})]}),e.jsx(de,{title:e.jsxs(ee,{children:[e.jsx(mt,{}),e.jsx("span",{children:"Second Opinion Details"})]}),className:`shadow-md ${s.secondOpinion?"!border-red-500":""}`,children:e.jsx(Ut,{validationErrors:s,reports:w,setReports:(a,g)=>{P(a,g)},setValidationErrors:j})})]})})},Vt=o.memo(Wt),Gt=[{value:"virtual",label:"Virtual Consult",icon:e.jsx(Ns,{className:"tab-icon"})},{value:"labpackage",label:"Lab Package",icon:e.jsx(Us,{className:"tab-icon"})},{value:"labtest",label:"Lab Test",icon:e.jsx(Ds,{className:"tab-icon"})},{value:"radiology",label:"Radiology",icon:e.jsx(Ws,{className:"tab-icon"})},{value:"pharmacy",label:"Pharmacy",icon:e.jsx(ms,{className:"tab-icon"})},{value:"second_opinion",label:"Second Opinion",icon:e.jsx(ms,{className:"tab-icon"})}],Ue={consultation:{consultType:"instant",selectedDoctor:null,selectedTimeSlot:null,selectedDate:null,selectedSpecialization:null,selectedVendor:null},tests:{selectedTest:null,selectedVendor:null,selectedTimeSlot:null,selectedDate:null},pharmacy:{selectedMedicines:[]},secondOpinion:{phone:null,comments:null,alternate_phone:null,selectedCategory:null,selectedDoctor:null,selectedVendor:null,urls:null}},fs=({visible:t=!1,onCancel:N,reload:s})=>{const{linkableId:j}=ve(),w=ge(),[d,h]=o.useState(!1),[R,K]=o.useState({virtual:[],labpackage:[],labtest:[],radiology:[],pharmacy:[]}),[L,V]=o.useState("virtual"),[i,H]=o.useState({userType:"existing"}),[r,$]=o.useState(Ue),[x,c]=o.useState({}),[z,T]=o.useState({isBooking:!1});o.useEffect(()=>{$(Ue),c({})},[L]);const P=()=>{H({userType:"existing"}),$(Ue),c({})},U=()=>{var k,Y,Z,X,M,D,J,p,v,a,g,b,m,_,F,G,te,l,f,I,A,O,Q;const C={};if(i!=null&&i.user||!(i!=null&&i.user))if((i==null?void 0:i.userType)==="new"){const u={};(k=i==null?void 0:i.user)!=null&&k.firstName||(u.firstName="Please enter first name"),(Y=i==null?void 0:i.user)!=null&&Y.lastName||(u.lastName="Please enter last name"),(Z=i==null?void 0:i.user)!=null&&Z.email||(u.email="Please enter email"),(X=i==null?void 0:i.user)!=null&&X.phone||(u.phone="Please enter phone number"),(!((M=i==null?void 0:i.user)!=null&&M.age)||!((D=i==null?void 0:i.user)!=null&&D.dob))&&(u.age="Please enter age"),(J=i==null?void 0:i.user)!=null&&J.gender||(u.gender="Please enter gender"),Object.keys(u).length>0&&(C.user=u)}else(p=i==null?void 0:i.user)!=null&&p.id||(C.user={id:"Please select a user"});if(i.payment){const u={};i.payment.paymentMethod||(u.paymentMethod="Please select a payment method"),((v=i==null?void 0:i.payment)==null?void 0:v.paymentMethod)!=="raphacure_collects"&&(i.payment.paymentType||(u.paymentType="Please select a payment type")),Object.keys(u).length>0&&(C.payment=u)}else C.payment={paymentMethod:"Please select a payment method",paymentType:"Please select a payment type"};switch(L){case"virtual":!r.consultation.selectedDoctor&&r.consultation.consultType!=="second_opinion"&&(C.doctor="Please select a doctor"),r.consultation.consultType||(C.consultType="Please select consultation type"),["call","chat","video","opd"].includes(r.consultation.consultType)&&(r.consultation.selectedDate||(C.date="Please select a date"),r.consultation.selectedTimeSlot||(C.timeSlot="Please select a time slot"),!((a=r.consultation.selectedVendor)!=null&&a.id)&&r.consultation.consultType==="opd"&&(C.vendor="Please select a clinic"));break;case"labpackage":case"labtest":case"radiology":(!r.tests.selectedTest||Array.isArray(r.tests.selectedTest)&&r.tests.selectedTest.length===0)&&(C.test=`Please select at least one ${L==="labpackage"?"package":L==="labtest"?"lab test":"radiology test"}`),r.tests.selectedVendor||(C.vendor="Please select a vendor"),r.tests.selectedDate||(C.date="Please select a date"),r.tests.selectedTimeSlot||(C.timeSlot="Please select a time slot");break;case"pharmacy":((b=(g=r==null?void 0:r.pharmacy)==null?void 0:g.selectedMedicines)==null?void 0:b.length)===0&&(C.pharmacy="Please select at least one medicine");break;case"second_opinion":{const u={},q=(m=r.secondOpinion.selectedDoctor)!=null&&m.id?"doctor":r.secondOpinion.selectedVendor?"vendor":null;q?q==="doctor"?(F=(_=r==null?void 0:r.secondOpinion)==null?void 0:_.selectedDoctor)!=null&&F.id||(u.doctor="Please select a doctor"):q==="vendor"&&((te=(G=r==null?void 0:r.secondOpinion)==null?void 0:G.selectedVendor)!=null&&te.id||(u.vendor="Please select a Hospital"),(!((l=r==null?void 0:r.secondOpinion)!=null&&l.selectedCategory)||((I=(f=r==null?void 0:r.consultation)==null?void 0:f.selectedSpecialization)==null?void 0:I.length)===0)&&(u.category="Please select a category")):(u.doctor="Please select a doctor",u.vendor="Please select a Hospital"),(A=r==null?void 0:r.secondOpinion)!=null&&A.urls||(u.reports="Please upload reports"),(O=r==null?void 0:r.secondOpinion)!=null&&O.phone||(u.phone="Please enter phone number"),(Q=r==null?void 0:r.secondOpinion)!=null&&Q.comments||(u.comments="Please add a comment"),Object.keys(u).length>0&&(C.secondOpinion=u);break}default:C.general="Invalid consultation type"}if(L=="labtest"||(i==null?void 0:i.userType)==="new")if(i!=null&&i.address){const u={};i.address.fullAddress||(u.fullAddress="Please provide full address"),i.address.city||(u.city="Please provide city"),i.address.state||(u.state="Please provide state"),i.address.zip||(u.zip="Please provide zip code"),Object.keys(u).length>0&&(C.address=u)}else C.address={fullAddress:"Please provide full address",city:"Please provide city",state:"Please provide state",zip:"Please provide zip code"};if(c(C),Object.keys(C).length>0){const u=[],q=n=>{Object.entries(n).forEach(([y,S])=>{typeof S=="string"?u.push(S):typeof S=="object"&&q(S)})};return q(C),u.forEach((n,y)=>{W.error(n)}),!1}return!0},B=async()=>{var Y,Z,X,M,D,J,p,v,a,g,b,m,_,F,G,te,l,f,I,A,O,Q,u,q,n,y,S,E,le,me,ae,Ge,He,Je,qe,Ke,Xe,Ze,Qe,Ee,es,ss,ts,ls,ns,cs;if(!U())return;let C;if(!((Y=i.user)!=null&&Y.id))try{T({isBooking:!0});const se={user:{first_name:(Z=i.user)==null?void 0:Z.firstName,last_name:(X=i.user)==null?void 0:X.lastName,email:(M=i.user)==null?void 0:M.email,phone:(D=i.user)==null?void 0:D.phone,age:(J=i.user)==null?void 0:J.age,gender:(p=i.user)==null?void 0:p.gender,dob:(v=i.user)==null?void 0:v.dob,address:{address:(a=i.address)==null?void 0:a.fullAddress,city:(g=i.address)==null?void 0:g.city,state:(b=i.address)==null?void 0:b.state,zip:(m=i.address)==null?void 0:m.zip}}},re=await w(Vs({data:se,clientId:j}));if(re.error){W.error(re.error.message||"unkown error");return}else W.success("User created successfully"),C=(G=(F=(_=re==null?void 0:re.payload)==null?void 0:_.data)==null?void 0:F.createdUser)==null?void 0:G.id}catch{W.error("Something went wrong");return}finally{T({isBooking:!1})}let k;switch(L){case"virtual":{["call","chat","video"].includes(r.consultation.consultType)?k={virtual_type:r.consultation.consultType,useWallet:!0,doctor_id:parseInt((te=r.consultation.selectedDoctor)==null?void 0:te.id),user_id:(l=i.user)==null?void 0:l.id,collection_1_date:r.consultation.selectedDate,collection_1_slot:r.consultation.selectedTimeSlot,collection_2_date:null,collection_2_slot:null,attachment_ids:null,section_key:"doctor"}:r.consultation.consultType==="instant"?k={virtual_type:"instant",useWallet:!0,doctor_id:parseInt((f=r.consultation.selectedDoctor)==null?void 0:f.id),user_id:(I=i.user)==null?void 0:I.id,collection_1_date:null,collection_1_slot:null,collection_2_date:null,collection_2_slot:null,attachment_ids:null,section_key:"doctor"}:r.consultation.consultType==="opd"&&(k={virtual_type:null,useWallet:!0,doctor_id:parseInt((A=r.consultation.selectedDoctor)==null?void 0:A.id),vendor_id:parseInt(r.consultation.selectedVendor.id),user_id:(O=i.user)==null?void 0:O.id,collection_1_date:r.consultation.selectedDate,collection_1_slot:r.consultation.selectedTimeSlot,collection_2_date:null,collection_2_slot:null,attachment_ids:null,section_key:"doctor"});break}case"labpackage":{k={virtual_type:null,package_code:((Q=r.tests.selectedTest.map(se=>se.service_code))==null?void 0:Q[0])||"",useWallet:!0,vendor_id:((u=r.tests.selectedVendor)==null?void 0:u.id)||1,user_id:(q=i.user)==null?void 0:q.id,collection_1_date:r.tests.selectedDate,collection_1_slot:r.tests.selectedTimeSlot,attachment_ids:null,section_key:"labtest",instant_booking:null};break}case"labtest":{k={virtual_type:null,test_codes:r.tests.selectedTest.map(se=>se.service_code)||[],useWallet:!0,vendor_id:((n=r.tests.selectedVendor)==null?void 0:n.id)||1,user_id:(y=i.user)==null?void 0:y.id,collection_1_date:r.tests.selectedDate,collection_1_slot:r.tests.selectedTimeSlot,attachment_ids:null,section_key:"labtest",instant_booking:null};break}case"radiology":{k={virtual_type:null,test_codes:r.tests.selectedTest.map(se=>se.service_code)||[],useWallet:!0,vendor_id:((S=r.tests.selectedVendor)==null?void 0:S.id)||1,user_id:(E=i.user)==null?void 0:E.id,collection_1_date:r.tests.selectedDate,collection_1_slot:r.tests.selectedTimeSlot,attachment_ids:null,section_key:"ctmri"};break}case"pharmacy":{k={user_id:(le=i.user)==null?void 0:le.id,useWallet:!0,collection_1_date:null,collection_1_slot:null,medicines:((me=r.pharmacy.selectedMedicines)==null?void 0:me.map(se=>{var re;return{service_code:(re=se==null?void 0:se.item)==null?void 0:re.service_code,count:se==null?void 0:se.quantity}}))||[],attachment_ids:null,section_key:"pharmacy"};break}case"second_opinion":{k={user_id:(ae=i.user)==null?void 0:ae.id,section_key:"doctor",isSecondOpinion:!0,report_urls:Array.isArray((Ge=r.secondOpinion)==null?void 0:Ge.urls)?(He=r.secondOpinion)==null?void 0:He.urls:[],specialization_id:(qe=(Je=r.secondOpinion)==null?void 0:Je.selectedVendor)!=null&&qe.id?(Ke=r.secondOpinion)==null?void 0:Ke.selectedCategory:null,useWallet:!0,extra_info:{alternate_person:(Xe=r.secondOpinion)==null?void 0:Xe.alternate_phone,contact_number:(Ze=r.secondOpinion)==null?void 0:Ze.phone,comments:(Qe=r.secondOpinion)==null?void 0:Qe.comments},...(Ee=r.secondOpinion)!=null&&Ee.selectedDoctor?{doctor_id:(ss=(es=r.secondOpinion)==null?void 0:es.selectedDoctor)==null?void 0:ss.id}:{vendor_id:(ls=(ts=r.secondOpinion)==null?void 0:ts.selectedVendor)==null?void 0:ls.id}};break}}if(!k){W.error("Invalid data found");return}k.user_id=((ns=i.user)==null?void 0:ns.id)||C;try{if(T(se=>({...se,isBooking:!0})),k!=null&&k.user_id){const se=await w(Gs(k));if(se.error){W.error(se.error.message||"Unknown error occurred");return}else{const re=await w(Hs({user_id:k.user_id,payment_note:(cs=i==null?void 0:i.payment)==null?void 0:cs.paymentMethod}));if(re.error){W.error(re.error.message||"Unknown error occurred");return}else W.success("Order Booked Successfully!"),P(),N(),s&&s()}}}catch{W.error("Unknown error occurred")}finally{T(se=>({...se,isBooking:!1}))}};return console.log("formData",r),console.log("userDetails",i),console.log("cartData",R),console.log("validationErrors",x),e.jsxs(ie,{title:d?"Cart":"Create New Order",open:t,handleClose:N,headerClassName:"px-2",children:[e.jsx(ie.Body,{children:e.jsx(xt,{spinning:z.isBooking,children:e.jsx(Ct,{children:d?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"createOrderTopDiv",children:e.jsx(ot,{activeTab:L,setActiveTab:V,tabs:Gt})}),e.jsxs("div",{children:[L==="virtual"&&e.jsx(Ft,{setFormData:$,formData:r,validationErrors:x,setValidationErrors:c}),["labpackage","labtest","radiology"].includes(L)&&e.jsx(Yt,{setFormData:$,formData:r,consultType:L,validationErrors:x,setValidationErrors:c}),L==="pharmacy"&&e.jsx(Lt,{setFormData:$,formData:r,validationErrors:x,setValidationErrors:c}),L==="second_opinion"&&e.jsx(Vt,{formData:r,setFormData:$,validationErrors:x,setValidationErrors:c}),e.jsx(Mt,{consultType:L,formData:i,setFormData:H,validationErrors:x,setValidationErrors:c})]})]})})})}),e.jsx(ie.Footer,{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Ce,{onClick:N,children:"Cancel"}),!d&&e.jsx(_e,{onClick:B,children:"Create Order"})]})})]})},Ht=({children:t,onClearButton:N,...s})=>e.jsxs("span",{className:"relative inline-block",children:[e.jsx(Ce,{className:"!cursor-default",...s,children:t}),e.jsx(jt,{color:"red",className:"cursor-pointer absolute top-0 right-[-5px] transform -translate-y-1/2 bg-white",onClick:N})]}),Nn=()=>{var Q,u,q;const t=ys(),{linkableId:N}=ve(),[s,j]=Js(),w=s.get("globalsearch"),d=s.get("tab"),h=ge(),[R,K]=o.useState(null),[L,V]=o.useState(1),[i,H]=o.useState(10),{section:r}=qs(),[$,x]=o.useState({dateRange:null,searchText:"",status:[]}),[c,z]=o.useState(()=>{const n=[{label:"All Bookings",key:"",data:null,classes:"all-label",type:"all"},{label:"Upcoming",key:"booking_scheduled,consultation_rescheduled",data:null,classes:"upcoming-label",type:"upcoming"},{label:"Pending",key:"open,payment_pending",data:null,classes:"open-label",type:"pending"},{label:"Prescription Sent",key:"prescription_sent_successfully",data:null,classes:"prescription-label",type:"prescription_sent"},{label:"Reports Delivered",key:"reports_delivered",data:null,classes:"reports-label",type:"reports_delivered"},{label:"Completed",key:"completed",data:null,classes:"completed-label",type:"completed"},{label:"Rejected",key:"cancelled",data:null,classes:"rejected-label",type:"rejected"}];let y;return r?y=n.find(S=>S.type===r)||n[0]:d?y=n.find(S=>S.type===d)||n[0]:y=n[0],{options:n,selectedFilter:y,selectedFilters:[y.key]}}),[T,P]=o.useState(!0),[U,B]=o.useState(new Date);o.useEffect(()=>{},[c]);const C=()=>xe()?[...new Set(c.options.filter(n=>c.selectedFilters.includes(n.type)).map(n=>n.key))].join(","):c.selectedFilter.key,k=()=>{if(xe()){if(c.selectedFilters.includes(""))return"All Bookings";const n=c.selectedFilters[0],y=c.options.find(S=>S.key===n);return(y==null?void 0:y.label)||"All Bookings"}else return c.selectedFilter.label};o.useMemo(()=>{if(w&&(w==null?void 0:w.length)>0){const n=c.options.find(y=>y.key==="");n&&z(y=>({...y,selectedFilter:n,selectedFilters:[""]}))}},[w]),o.useEffect(()=>{x(n=>({...n,searchText:w||""}))},[w]);const Y=async()=>{var n,y;if(N)try{P(!0);const S=C(),E=k(),le=await h(Zs({limited_fields:!0,filters:{from:"hr",...s.get("clientOrderId")?{clientOrderId:s.get("clientOrderId")}:{},page:L,count:i,status:xe()?S:$.status.join(","),type:null,id:String(N),searchText:w&&E==="All Bookings"?w:$.searchText,...$.dateRange?{dateRange:{dateType:"scheduled",from:$.dateRange.start_date,to:$.dateRange.end_date}}:{}}}));if(le!=null&&le.error){rs.error(((n=le==null?void 0:le.error)==null?void 0:n.message)||"Unknown Error Occured");return}K((y=le==null?void 0:le.payload)==null?void 0:y.data)}catch{rs.error("unknown error occured")}finally{P(!1)}};o.useEffect(()=>{const n=setTimeout(()=>{N&&Y()},300);return()=>clearTimeout(n)},[L,h,c.selectedFilter.label,c.selectedFilters,i,w,N,$]);const[Z,X]=o.useState(!1);console.log("filterState",c);const M=(n,y)=>{Number(w==null?void 0:w.length)>0&&t("/bookings",{replace:!0}),z(S=>{let E;n==="all"?E=["all"]:S.selectedFilters.includes(n)?(E=S.selectedFilters.filter(ae=>ae!==n),E.length===0&&(E=["all"])):(E=S.selectedFilters.filter(ae=>ae!=="all"),E=[...E,n]);const le=E[0]||"all",me=S.options.find(ae=>ae.type===le)||S.options[0];return{...S,selectedFilters:E,selectedFilter:me}})},[D,J]=o.useState(!1),[p,v]=o.useState(null),[a,g]=o.useState(""),b=o.useCallback((n,y={})=>{["reject","approve","booking_details","reschedule"].includes(n)&&(g(n),v(y),J(!0))},[]),m=()=>{J(!1),v(null),g("")},_=()=>{J(!0)},F=()=>{J(!1),v(null),g(""),N&&Y()},[G,te]=o.useState(!1),[l,f]=o.useState(!1),[I,A]=o.useState(!1),O=n=>{t("/employees/detail/"+n)};return xe()?e.jsxs(hs,{children:[e.jsxs("div",{className:"booking-header-div flex flex-row justify-between items-center gap-2",children:[e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsx(xs,{onSearch:n=>{x(y=>({...y,searchText:n}))},className:"w-[100px]",searchText:$==null?void 0:$.searchText,placeHolder:"Search Bookings"}),e.jsx("div",{className:"date-range-picker",children:e.jsx(Me.RangePicker,{className:"w-[200px]",format:"DD/MM/YYYY",placeholder:["Start Date","End Date"],onChange:n=>{n&&n[0]&&n[1]?x(y=>{var S,E;return{...y,dateRange:{start_date:((S=n==null?void 0:n[0])==null?void 0:S.format("YYYY-MM-DD"))??"",end_date:((E=n==null?void 0:n[1])==null?void 0:E.format("YYYY-MM-DD"))??""}}}):x(y=>({...y,dateRange:null}))}})})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{className:"download-btn !ml-0",onClick:()=>A(!0),children:e.jsx(Oe,{size:20})}),I&&e.jsx(is,{sectionType:"bookings",closeForm:()=>A(!1)}),e.jsxs("button",{className:"filter",onClick:()=>X(n=>!n),children:[e.jsx("span",{children:e.jsx("img",{src:Z?"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/106435-1741429137408.png":"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/106435-1741244655183.png",className:"filter",alt:"filter-icon"})}),"Filters"]})]}),e.jsx("div",{className:"booking-create"})]}),Z&&e.jsx(_t,{filters:c.options.map(n=>({key:n.type,label:n.label})),selectedFilters:c.selectedFilters,handleChange:M}),e.jsx("div",{className:"booking-mobile-body-div",children:((Q=R==null?void 0:R.bookings)==null?void 0:Q.length)>0?(q=(u=R==null?void 0:R.bookings)==null?void 0:u.map)==null?void 0:q.call(u,(n,y)=>{var E,le,me,ae;const S=we((n==null?void 0:n.collection_1_date)??(n==null?void 0:n.collection_2_date),"DD/MM/YYYY");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"booking-mobile-div-card",children:[e.jsxs("div",{className:"flex justify-between gap-[2px]",children:[e.jsxs("div",{className:"booking-mobile-card-details",children:[e.jsxs("div",{className:"calender-box-mobile",children:[e.jsx("span",{className:"date-number-span",children:S!=null&&S.isValid()?S.date():"N/A"}),e.jsx("span",{className:"date-month-name",children:S!=null&&S.isValid()?S.format("MMM").toUpperCase():"N/A"}),e.jsx("span",{className:"booking-type",children:S!=null&&S.isValid()?S.format("YYYY").toUpperCase():"N/A"})]}),e.jsxs("div",{className:"booking-details-mobile",children:[e.jsx("p",{title:`${((E=n==null?void 0:n.user)==null?void 0:E.first_name)??""} ${((le=n==null?void 0:n.user)==null?void 0:le.last_name)??""}`,onClick:()=>b("booking_details",n),className:"booking-details-name cursor-pointer",children:`${((me=n==null?void 0:n.user)==null?void 0:me.first_name)??""} ${((ae=n==null?void 0:n.user)==null?void 0:ae.last_name)??""}`}),e.jsx("p",{title:(n==null?void 0:n.collection_1_slot)??(n==null?void 0:n.collection_2_slot)??"N/A",className:"booking-details-slot",children:(n==null?void 0:n.collection_1_slot)??(n==null?void 0:n.collection_2_slot)??"N/A"}),e.jsx("p",{title:Ne((n==null?void 0:n.type)??"N/A"),className:"booking-details-type",children:Ne((n==null?void 0:n.type)??"N/A")})]})]}),e.jsx("div",{className:"status-mobile-div",children:e.jsx(St,{data:n,time:U,instituteAction:b})})]}),e.jsxs("div",{children:[e.jsx("hr",{className:"my-1"}),e.jsx(gs,{instituteAction:b,time:U,data:n})]})]})})}):!T&&e.jsx("p",{className:"my-5  text-center text-red-500",children:"No bookings available"})}),l&&e.jsx(fs,{visible:l,reload:Y,onCancel:()=>f(!1)}),e.jsx("div",{className:"load-more-btn-div",children:T?e.jsx(e.Fragment,{children:e.jsx(oe,{indicator:e.jsx(Ve,{style:{fontSize:48},spin:!0})})}):e.jsx(Ce,{disabled:(R==null?void 0:R.totalCount)<i||T,onClick:()=>H(n=>n+10),children:"Load More"})}),e.jsx(ds,{modalData:p,selectedAction:a,open:D,handleClose:F,handleOpen:_,handleSoftClose:m})]}):e.jsxs(hs,{children:[e.jsxs("div",{className:"booking-container",children:[e.jsxs("div",{className:"heading",children:[e.jsx("h2",{children:"My Bookings"}),e.jsxs("p",{children:["My Bookings > ",c.selectedFilter.label," ",Number(w==null?void 0:w.length)>0?e.jsxs(e.Fragment,{children:["> ",w]}):""]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-end lg:items-center justify-between mb-[15.5px]",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(xs,{onSearch:n=>{x(y=>({...y,searchText:n}))},className:"w-[100px]",searchText:$==null?void 0:$.searchText,placeHolder:"Search Bookings"}),e.jsx("div",{className:"sort-dropdown",children:e.jsx("div",{className:"select-wrapper",children:e.jsx(ce,{maxTagCount:1,value:$.status,mode:"multiple",maxTagPlaceholder:()=>"...",popupMatchSelectWidth:!1,placeholder:"Status",className:"min-w-[100px]",onChange:(n,y)=>{x(S=>{var E;return{...S,status:(E=y==null?void 0:y.map)==null?void 0:E.call(y,le=>le.value)}})},options:["booking_scheduled","consultation_rescheduled","open","payment_pending","prescription_sent_successfully","reports_delivered","completed","cancelled"].map(n=>({value:n,label:Ne(n)}))})})}),e.jsx("div",{className:"date-range-picker",children:e.jsx(Me.RangePicker,{className:"w-[200px]",format:"DD/MM/YYYY",placeholder:["Start Date","End Date"],onChange:n=>{n&&n[0]&&n[1]?x(y=>{var S,E;return{...y,dateRange:{start_date:((S=n==null?void 0:n[0])==null?void 0:S.format("YYYY-MM-DD"))??"",end_date:((E=n==null?void 0:n[1])==null?void 0:E.format("YYYY-MM-DD"))??""}}}):x(y=>({...y,dateRange:null}))}})}),s.get("clientOrderId")&&e.jsx("div",{children:e.jsxs(Ht,{onClearButton:()=>{j(n=>(n.delete("clientOrderId"),n))},children:["Order Id:",s.get("clientOrderId")]})})]}),e.jsxs("div",{className:"pd-container",children:[l&&e.jsx(fs,{visible:l,reload:Y,onCancel:()=>f(!1)}),e.jsx("button",{className:"download-btn",onClick:()=>A(!0),children:e.jsx(Oe,{size:20})}),I&&e.jsx(is,{sectionType:"bookings",closeForm:()=>A(!1)})]})]}),e.jsx("div",{children:e.jsx(bt,{columns:[{label:"Serial No",key:"Serial No",dataIndex:"id",render:(n,y)=>e.jsx("p",{onClick:()=>b("booking_details",y),className:"text-center m-0 !text-blue-600 cursor-pointer",children:n})},{label:"Name",key:"Name",dataIndex:"user",render:(n,y)=>e.jsx("p",{onClick:()=>{var S;return O((S=y==null?void 0:y.user)==null?void 0:S.id)},className:"name !text-blue-600 cursor-pointer",children:Ks(n==null?void 0:n.first_name,n==null?void 0:n.last_name)})},{label:"Age & Sex",key:"Age & Sex",dataIndex:"user",render:n=>{var y,S;return e.jsx("p",{className:"m-0",children:`${(n==null?void 0:n.age)??"N/A"}/${((S=(y=n==null?void 0:n.gender)==null?void 0:y[0])==null?void 0:S.toUpperCase())??"N/A"}`})}},{label:"Date & Time",key:"Date & Time",dataIndex:"collection_1_date",render:(n,y)=>e.jsxs("p",{className:"m-0",children:[Xs(n??(y==null?void 0:y.collection_2_date))," / ",(y==null?void 0:y.collection_1_slot)??(y==null?void 0:y.collection_w_slot)??"N/A"]})},{label:"Visit Type",key:"Visit Type",dataIndex:"type",render:n=>e.jsx("p",{className:"m-0",children:Ne(n)??"N/A"})},{label:"Status",key:"Status",dataIndex:"type",render:(n,y)=>Ne(y==null?void 0:y.status)??"N/A"},{label:"Actions",key:"Actions",dataIndex:"actions",render:(n,y)=>e.jsx(gs,{instituteAction:b,time:U,data:y})}],data:(R==null?void 0:R.bookings)||[],showingName:s.get("clientOrderId")?`bookings for order:${s.get("clientOrderId")}`:"bookings",isLoading:T,page:L,pageSize:i,pagination:!0,onPageChange:(n,y)=>{V(n),H(y)},total:R==null?void 0:R.totalCount})})]}),e.jsx(ds,{modalData:p,selectedAction:a,open:D,handleClose:F,handleOpen:_,handleSoftClose:m})]})};export{Nn as default};
