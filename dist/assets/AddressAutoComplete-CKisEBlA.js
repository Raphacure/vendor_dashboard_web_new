import{bm as X,f$ as te,aV as re,r as ne,j as C,g0 as oe,z as ae}from"./index-ChUmNm8R.js";import{c as ie}from"./index-Ds72tj9v.js";import{C as ue}from"./CustomSpinLoader-CrgQ8bNq.js";var j={},A={},G={},P={},N;function ce(){if(N)return P;N=1,Object.defineProperty(P,"__esModule",{value:!0}),P.loadGoogleMapScript=P.isBrowser=void 0;var o=typeof window<"u"&&window.document;P.isBrowser=o;var c=function(g,f){if(!o||typeof google<"u"&&google.maps&&google.maps.api)return Promise.resolve();var m=document.querySelectorAll('script[src*="'.concat(g,'"]'));if(m&&m.length)return new Promise(function(y){if(typeof google<"u")return y();m[0].addEventListener("load",function(){return y()})});var _=new URL(f);_.searchParams.set("callback","__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__");var s=document.createElement("script");return s.src=_.toString(),new Promise(function(y){window.__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__=y,document.body.appendChild(s)})};return P.loadGoogleMapScript=c,P}var M={},k;function le(){if(k)return M;k=1,Object.defineProperty(M,"__esModule",{value:!0}),M.GOOGLE_MAP_SCRIPT_BASE_URL=void 0;var o="https://maps.googleapis.com/maps/api/js";return M.GOOGLE_MAP_SCRIPT_BASE_URL=o,M}var z;function J(){if(z)return G;z=1;function o(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(t){return typeof t}:o=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(e)}Object.defineProperty(G,"__esModule",{value:!0}),G.default=O;var c=m(X()),u=ce(),g=le();function f(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,t=new WeakMap;return(f=function(a){return a?t:n})(e)}function m(e,n){if(e&&e.__esModule)return e;if(e===null||o(e)!=="object"&&typeof e!="function")return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var p=a?Object.getOwnPropertyDescriptor(e,i):null;p&&(p.get||p.set)?Object.defineProperty(r,i,p):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?_(Object(t),!0).forEach(function(r){y(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function w(e,n){if(e==null)return{};var t=b(e,n),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function b(e,n){if(e==null)return{};var t={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function O(e){var n=e.ref,t=e.onPlaceSelected,r=e.apiKey,a=e.libraries,i=a===void 0?"places":a,p=e.inputAutocompleteValue,E=p===void 0?"new-password":p,v=e.options;v=v===void 0?{}:v;var L=v.types,B=L===void 0?["(cities)"]:L,h=v.componentRestrictions,T=v.fields,q=T===void 0?["address_components","geometry.location","place_id","formatted_address"]:T,W=v.bounds,x=w(v,["types","componentRestrictions","fields","bounds"]),K=e.googleMapsScriptBaseUrl,U=K===void 0?g.GOOGLE_MAP_SCRIPT_BASE_URL:K,D=e.language,d=(0,c.useRef)(null),S=(0,c.useRef)(null),l=(0,c.useRef)(null),Z=D?"&language=".concat(D):"",V="".concat(U,"?libraries=").concat(i,"&key=").concat(r).concat(Z),ee=(0,c.useCallback)(function(){return(0,u.loadGoogleMapScript)(U,V)},[U,V]);return(0,c.useEffect)(function(){var R=s(s({},x),{},{fields:q,types:B,bounds:W});if(h&&(R.componentRestrictions=h),!(l.current||!d.current||!u.isBrowser)){n&&!n.current&&(n.current=d.current);var F=function(){var I;if(typeof google>"u")return console.error("Google has not been found. Make sure your provide apiKey prop.");if(!((I=google.maps)!==null&&I!==void 0&&I.places))return console.error("Google maps places API must be loaded.");if(!(d.current instanceof HTMLInputElement))return console.error("Input ref must be HTMLInputElement.");l.current=new google.maps.places.Autocomplete(d.current,R),l.current&&(S.current=l.current.addListener("place_changed",function(){t&&l&&l.current&&t(l.current.getPlace(),d.current,l.current)}))};return r?ee().then(function(){return F()}):F(),function(){return S.current?S.current.remove():void 0}}},[]),(0,c.useEffect)(function(){return l.current&&t&&(S.current=l.current.addListener("place_changed",function(){t&&l&&l.current&&t(l.current.getPlace(),d.current,l.current)})),function(){return S.current?S.current.remove():void 0}},[t]),(0,c.useEffect)(function(){if(u.isBrowser&&window.MutationObserver&&d.current&&d.current instanceof HTMLInputElement){var R=new MutationObserver(function(){R.disconnect(),d.current&&(d.current.autocomplete=E)});return R.observe(d.current,{attributes:!0,attributeFilter:["autocomplete"]}),function(){R.disconnect()}}},[E]),(0,c.useEffect)(function(){l.current&&l.current.setFields(q)},[q]),(0,c.useEffect)(function(){l.current&&l.current.setBounds(W)},[W]),(0,c.useEffect)(function(){l.current&&l.current.setComponentRestrictions(h)},[h]),(0,c.useEffect)(function(){l.current&&l.current.setOptions(x)},[x]),{ref:d,autocompleteRef:l}}return G}var H;function se(){if(H)return A;H=1;function o(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(t){return typeof t}:o=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(e)}Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var c=_(X()),u=f(te()),g=f(J());function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,t=new WeakMap;return(m=function(a){return a?t:n})(e)}function _(e,n){if(e&&e.__esModule)return e;if(e===null||o(e)!=="object"&&typeof e!="function")return{default:e};var t=m(n);if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var p=a?Object.getOwnPropertyDescriptor(e,i):null;p&&(p.get||p.set)?Object.defineProperty(r,i,p):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},s.apply(this,arguments)}function y(e,n){if(e==null)return{};var t=w(e,n),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function w(e,n){if(e==null)return{};var t={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function b(e){var n=e.onPlaceSelected,t=e.apiKey,r=e.libraries,a=e.inputAutocompleteValue,i=e.options,p=e.googleMapsScriptBaseUrl,E=e.refProp,v=e.language,L=y(e,["onPlaceSelected","apiKey","libraries","inputAutocompleteValue","options","googleMapsScriptBaseUrl","refProp","language"]),B=(0,g.default)({ref:E,googleMapsScriptBaseUrl:p,onPlaceSelected:n,apiKey:t,libraries:r,inputAutocompleteValue:a,options:i,language:v}),h=B.ref;return c.default.createElement("input",s({ref:h},L))}b.propTypes={apiKey:u.default.string,libraries:u.default.arrayOf(u.default.string),ref:u.default.oneOfType([u.default.func,u.default.shape({current:u.default.any})]),googleMapsScriptBaseUrl:u.default.string,onPlaceSelected:u.default.func,inputAutocompleteValue:u.default.string,options:u.default.shape({componentRestrictions:u.default.object,bounds:u.default.object,location:u.default.object,offset:u.default.number,origin:u.default.object,radius:u.default.number,sessionToken:u.default.object,types:u.default.arrayOf(u.default.string)}),language:u.default.string};var O=(0,c.forwardRef)(function(e,n){return c.default.createElement(b,s({},e,{refProp:n}))});return A.default=O,A}var Y;function fe(){return Y||(Y=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"default",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(o,"usePlacesWidget",{enumerable:!0,get:function(){return u.default}});var c=g(se()),u=g(J());function g(f){return f&&f.__esModule?f:{default:f}}})(j)),j}var $,Q;function pe(){return Q||(Q=1,$=fe()),$}var de=pe();const ge=re(de),Oe=o=>{const[c,u]=ne.useState(!1),g=s=>{s&&o.onAddressSelected(s)},f=s=>{o.onChange&&o.onChange(s),s.target.value===""&&o.onAddressSelected({})},m=s=>{o.onBlur&&o.onBlur(s)},_=()=>{navigator.geolocation&&!c&&navigator.geolocation.getCurrentPosition(async s=>{const{latitude:y,longitude:w}=s.coords;try{u(!0);const O=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${y},${w}&key=${oe}`)).json();O.results&&O.results[0]&&g(O.results[0])}catch{ae.error("Failed to fetch location details.")}finally{u(!1)}})};return C.jsx(ue,{spinning:c,children:C.jsxs("div",{className:"relative",children:[C.jsx(ge,{apiKey:"AIzaSyDiKV3OLHnGFYI4qhcIKjk7tzG-RXeUI5s",id:o.id??"address1",onPlaceSelected:g,componentRestrictions:{country:"in"},options:{types:["geocode","establishment"],componentRestrictions:{country:"in"}},value:o.value,autocomplete:"off",name:o.name,className:`${o.className?`${o.className} input`:"input"} !pr-10`,placeholder:o.placeholder?o.placeholder:"Enter Address Line 1",defaultValue:o.defaultValue,onChange:f,disabled:o.disabled||c,autoFocus:o.autoFocus,maxLength:o.maxLength,onBlur:m,style:{border:"1px solid #d9d9d9",borderRadius:"4px",padding:"8px",width:"100%",boxSizing:"border-box"}}),C.jsx(ie,{className:"absolute right-2.5 top-1/2 w-[30px] h-[30px] -translate-y-1/2 text-black cursor-pointer bg-[#cce8db] p-[5px] rounded",onClick:_})]})})};export{Oe as A};
