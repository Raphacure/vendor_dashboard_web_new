import{d as D,u as F,a as I,h as L,r as m,j as e,P as R,z as p,bM as T}from"./index-ChUmNm8R.js";import{r as U,u as z}from"./xlsx-BUW7exb-.js";import{F as O,D as $,I as q}from"./DownloadCsv-Cwn0aB6k.js";import{C as H}from"./CommonBreadCrumb-ZFUcDUQp.js";import"./createLucideIcon-D1dtiQRH.js";import"./index-HwAQ7eJ8.js";import"./DownOutlined-z3I3nDv9.js";import"./dropdown-C4zMWtkZ.js";import"./LeftOutlined-lLzXux5-.js";import"./collapse-BbEVqHco.js";const M=D.div`
  width: 100%;
  padding:39px 37px;
  font-family: inter;

  @media (max-width: 675px) {
    padding: 15px;
  }
`,ee=()=>{const N=F(),b=I(),{linkableId:k}=L(),[l,h]=m.useState([]),[n,c]=m.useState([]),[o,f]=m.useState({booking:!1,page:!1,csv:!1});console.log(l,"employeeList");const _=[{name:"HR Dashboard",link:"/dashboard"},{name:"Toxic Substances",link:"/toxic-substance"}];function v(s){if(s){const t=new FileReader;t.readAsArrayBuffer(s),t.onload=a=>{var y;const i=(y=a.target)==null?void 0:y.result;if(i){const u=U(i,{type:"binary"}),S=u.SheetNames[0],B=u.Sheets[S],A=z.sheet_to_json(B,{raw:!1}),C=["first_name","last_name","email","employee_id","phone","age","gender","designation","address","dob","active_status","office_location_name","office_location_address"],d=A.map((r,P)=>{const g={};let j=!0;return C.forEach(x=>{r[x]===void 0||r[x]===null||r[x]===""?(p.error(`Row ${P+2}: Missing required field '${x}'. Please ensure all mandatory fields are present.`),j=!1):g[x]=r[x]}),j?g:null}).filter(r=>r!==null);d.length>0?(h(d),c([...Array(d==null?void 0:d.length).keys()]),p.success(`${d.length} employees added successfully`)):(h([]),c([]),p.error("No valid employee data found after filtering."))}}}}const E=async()=>{var t;const s={users:l.filter((a,i)=>n.includes(i)),client_id:k};try{f(i=>({...i,booking:!0})),console.log("payload",s);const a=await N(T(s));if(a!=null&&a.error){p.error(((t=a==null?void 0:a.error)==null?void 0:t.message)||"unknown error occured");return}p.success("Employees added successfully"),b(-1)}catch{p.error("Something went wrong")}finally{f(a=>({...a,booking:!1}))}};return e.jsxs(M,{children:[e.jsx(H,{className:"mb-2",items:_}),e.jsx("p",{className:"text-[28px] font-semibold font-[Inter] !mb-[23.87px]",children:"Bulk Upload/Employee List"}),e.jsx("p",{className:"text-[22px] font-medium !mb-[58.32px]",children:"Please Upload Excel"}),e.jsxs("div",{className:"w-full flex flex-col gap-6",children:[e.jsxs("div",{className:"grid grid-col-1 gap-y-2 sm:grid-cols-[1.2fr_2px_1fr] gap-x-10",children:[e.jsx("div",{className:"flex-1",children:e.jsx(O,{onFileUpload:v,acceptType:".csv",mode:"single",acceptText:"csv"})}),e.jsx("span",{className:"w-full min-h-[2px] sm:w-[2px] bg-slate-200 self-stretch"}),e.jsxs("div",{className:"flex flex-col items-start gap-[22px]",children:[e.jsxs("span",{className:"text-[16px] text-black font-medium",children:["Download The"," ",e.jsx("span",{className:"font-bold text-[#252b61]",children:"Package 1"})," ","Template For Bulk Upload"]}),e.jsxs("div",{children:[e.jsxs("a",{href:"#",className:"w-full flex items-center !no-underline gap-2 border !border-[#aeaeae] rounded-lg !px-[7.98px] !py-[16.02px] transition-colors",children:[e.jsx("img",{className:"w-[40px] h-[40px]",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/119535-1746609861744.png",alt:"xls lgo"}),e.jsx($,{csvData:[["first_name","last_name","email","employee_id","phone","age","gender","designation","address","relation","dob","active_status","office_location_name","office_location_address"]],children:e.jsx("span",{className:"text-[14px] font-medium !text-[#252b61]",children:"Host_Package_1_Template.2025.csv"})})]}),e.jsxs("div",{className:"flex gap-[13.7px] !mt-[11.17px]",children:[e.jsx(q,{className:"w-[14px] h-[14px] flex-shrink-0 mt-1",color:"#888"}),e.jsx("span",{className:"text-[14px] text-[#888]",children:"only the csv file types are allowed. Please download the above templet fill & upload for extra feilds contact admin"})]})]})]})]}),e.jsx("hr",{className:"my-2 border-gray-200"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium text-[22px]",children:[l==null?void 0:l.length," Employees Pacakage 1 package have uploaded"]}),e.jsx(R,{isLoading:o==null?void 0:o.booking,onClick:E,className:"!py-[10px] !px-[20px]",children:"Book Now"})]}),e.jsx("div",{className:"overflow-x-auto rounded-[20px] border border-gray-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-sm ",children:[e.jsx("thead",{className:"bg-blue-50 text-[16px] !border-[4px] border-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:e.jsx("input",{className:"scale-[1.65]",type:"checkbox",checked:n.length===l.length&&n.length>0,onChange:()=>{n.length===l.length?c([]):c([...Array(l.length).keys()])}})}),e.jsx("th",{className:"px-3 py-2 text-left",children:"First Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Last Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Email"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Employee ID"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Phone"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Age"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Gender"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Designation"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Address"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Relation"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"DOB"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Active Status"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Office Location Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Office Location Address"})]})}),e.jsx("tbody",{className:"text-[18px]",children:l.length===0?e.jsx("tr",{className:"border-t border-gray-100 transition-colors",children:e.jsx("td",{colSpan:8,className:"px-3 py-4 text-center text-gray-500",children:"No employees added"})}):l.map((s,t)=>e.jsxs("tr",{className:"border-t border-gray-100 transition-colors",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{className:"scale-[1.65]",type:"checkbox",checked:n.includes(t),onChange:()=>{n.includes(t)?c(n.filter(a=>a!==t)):c([...n,t])}})}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.first_name}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.last_name}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.email}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.employee_id}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.phone}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.age}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.gender}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.designation}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.address}),e.jsx("td",{className:"px-3 py-2",children:s==null?void 0:s.relation})]},t))})]})})]})]})};export{ee as default};
