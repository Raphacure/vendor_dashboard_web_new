import{u as z,a as O,bH as T,r as d,j as e,cL as $,P as L,dO as B}from"./index-ChUmNm8R.js";import{I as W}from"./Index.styled-DnYCryoN.js";import{C as J}from"./ConformPopUp-XU7HL4wD.js";import{S as U}from"./SecoundaryButton-goiA8OO9.js";import{D as g}from"./Dropdown-fpMXnwtC.js";import"./InputGroupContext-BUHt4CjC.js";function ee(){const _=z(),D=O(),y=T(),[m,E]=d.useState(""),[p,P]=d.useState(""),[F,v]=d.useState(!1),[N,S]=d.useState(!1),[H,R]=d.useState(""),[C,A]=d.useState(""),{pathologyList:x,radiologyList:i,doctorList:h,formData:c}=y.state||{};console.log({pathologyList:x,radiologyList:i,doctorList:h,formData:c},"1212121sdzdxczxxc");const f=c.selectedCities,b=c==null?void 0:c.selectedClint;console.log(y,"location22");const I=()=>{S(!1)},q=[{category:"Diagnostic Center",items:["Standard","Premium"]},{category:"Hospital",items:["Standard","Premium"]}],M=(s,l)=>{s==="Hospital"?E(a=>a.includes(l)?a.filter(t=>t!==l):[...a,l]):s==="Diagnostic Center"&&P(a=>a.includes(l)?a.filter(t=>t!==l):[...a,l])},Q=async s=>{var u;s.preventDefault();const l=[...x,...i],a=[...h],t={rfq_name:C,client_id:b==null?void 0:b.value,items:f.map(o=>{var j,r,w;return{city_id:o.id,package_id:null,test_id:l.map(n=>n==null?void 0:n.service_code),specialization_id:a.map(n=>{var k;return(k=n==null?void 0:n.id)==null?void 0:k.toString()})||null,service_id:c.selectedTest.id||"",no_of_men:((j=o.employeeData)==null?void 0:j.menEmployees)||"0",no_of_women:((r=o.employeeData)==null?void 0:r.womenEmployees)||"0",no_of_children:((w=o.employeeData)==null?void 0:w.children)||"0",hospital:m==null?void 0:m.toString(),diagnostic_center:p==null?void 0:p.toString()}})};try{const o=await _(B(t)),j=JSON.stringify(o),r=JSON.parse(j);((u=r==null?void 0:r.payload)==null?void 0:u.success)===!0?v(!0):R(r.error.message)}catch(o){console.error("Error in handleSubmit:",o)}};return e.jsxs(W,{children:[e.jsx("p",{children:"Your RFQ"}),e.jsxs("div",{className:"service-conform-module-div",children:[e.jsxs("div",{className:"service-conform-left-module-div",children:[e.jsxs("div",{className:"service-conform-header-module-div",children:[e.jsx("img",{src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1732791573758.png",alt:"",className:"me-3"}),e.jsx("p",{children:"Packages"})]}),e.jsxs("div",{className:" service-conform-text-module-div",children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"lab-test-list-title",children:"Lab Test"}),x.map(s=>e.jsx("li",{className:"lab-test-list-sub-title",children:s==null?void 0:s.service_name}))]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"lab-test-list-title",children:"Radiology"}),i==null?void 0:i.map(s=>e.jsx("li",{className:"lab-test-list-sub-title",children:s==null?void 0:s.service_name}))]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"lab-test-list-title",children:"Doctor Consultation"}),Array.isArray(h)&&h.map(s=>e.jsx("li",{className:"lab-test-list-sub-title",children:s==null?void 0:s.name}))]})]})]}),e.jsx("div",{className:"service-conform-right-module-div",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Package Name"}),e.jsx("input",{type:"text",className:"form-control no-box-shadow",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:C,onChange:s=>A(s.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"exampleInputEmail1 ",className:"form-label mb-3",children:"Employees details"}),f==null?void 0:f.map(s=>e.jsxs("div",{children:[e.jsxs("p",{className:"form-label",children:[" City: ",s.name]}),s.employeeData&&e.jsxs("div",{children:[e.jsxs("p",{className:"form-label",children:["Women Employees: ",s.employeeData.womenEmployees]}),e.jsxs("p",{className:"form-label",children:["Men Employees: ",s.employeeData.menEmployees]}),e.jsxs("p",{className:"form-label",children:["Children: ",s.employeeData.children]})]})]},s.id))]}),e.jsx("div",{className:"mb-5 select select-options-div",children:e.jsxs(g,{show:N,onToggle:()=>S(!N),children:[e.jsx(g.Toggle,{variant:"primary",id:"dropdown-basic",children:"Preferred Vendor:"}),e.jsxs(g.Menu,{children:[q.map((s,l)=>e.jsxs("div",{className:"px-3 py-2",children:[e.jsx("strong",{children:s.category}),e.jsx("div",{className:"d-flex flex-row gap-3 mt-1",children:s.items.map((a,t)=>{const u=s.category==="Hospital"?m.includes(a):p.includes(a),o=s.category==="Hospital"?m.length>0:p.length>0;return e.jsx($.Check,{type:"checkbox",id:`${s.category}-${t}`,label:a,checked:u,disabled:!u&&o,onChange:()=>M(s.category,a)},`${l}-${t}`)})})]},l)),e.jsx("div",{className:"RFQ-options-select-btn",children:e.jsx("button",{className:"btn",onClick:I,children:"Ok"})})]})]})}),e.jsx("p",{style:{color:"red"},children:H}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(U,{onClick:()=>D("/rfq/rfqcreate?type=1",{state:{status:!0,formData:c,pathologyList:x,radiologyList:i,doctorList:h}}),children:"Add More RFQ"}),e.jsx(L,{onClick:Q,children:"Request For Quote"})]})]})})]}),e.jsx(J,{show:F,onHide:()=>v(!1),path:"/rfq?type=1",conformImg:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/76741-1732700413741.png",title:"RFQ Service Created Successfully",subTitle:"We will offer the best prices for you shortly"})]})}export{ee as default};
