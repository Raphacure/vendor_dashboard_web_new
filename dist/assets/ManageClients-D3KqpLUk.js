import{d as Z,r,u as H,c as W,h as V,j as e,L as O,cL as l,P as D,d1 as ee,d2 as te,d3 as ne,d4 as se,cK as ie,a as le,bs as ae,I as ce}from"./index-ChUmNm8R.js";import{b as oe}from"./index-CSCB4ib3.js";import{A as de}from"./AddressAutoComplete-CKisEBlA.js";import{C as R}from"./CustomModal-Ds0Ku9jR.js";import{S as re}from"./SecoundaryButton-goiA8OO9.js";import{U as me}from"./index-BZKwATQs.js";import{B as ue}from"./button-D0Rmo6Y5.js";import{I as xe}from"./index-Dg9qyxYI.js";import{C as pe}from"./CommonBreadCrumb-ZFUcDUQp.js";import{C as ge}from"./CustomTable-BBwjbMSz.js";import"./index-Ds72tj9v.js";import"./CustomSpinLoader-CrgQ8bNq.js";import"./Upload-CTnVjxYJ.js";import"./DownOutlined-z3I3nDv9.js";import"./collapse-BbEVqHco.js";import"./fade-8FE2cY_X.js";import"./useForceUpdate-jQjUdsvY.js";import"./DeleteOutlined-LwZaW3bw.js";import"./EyeOutlined-BGetrG_9.js";import"./CheckOutlined-DPOLd74P.js";import"./LeftOutlined-lLzXux5-.js";import"./ZoomOutOutlined-BnxwUvIO.js";import"./DialogWrap-CqE8f3eU.js";import"./addEventListener-D7w6vIGx.js";import"./useBubbleLock-BnnxIxI9.js";import"./index-WMmC3KlA.js";import"./index-Ctpo8ZnH.js";import"./dropdown-C4zMWtkZ.js";import"./CustomPagination-BfzEq6pA.js";import"./index-gapj9Wcb.js";import"./index-D9Bv3C6k.js";import"./useIcons-CDf6lDIp.js";import"./chevron-down-u38pTTSM.js";import"./createLucideIcon-D1dtiQRH.js";import"./Table-BhIN-nUr.js";import"./styleChecker-DD0Z1krI.js";import"./index-De2sQM66.js";import"./useForm-CIMDi_Qk.js";import"./Input-ClusE8wk.js";import"./index-1XTAFx_Q.js";import"./Pagination-BbDnNTXA.js";import"./extendsObject-78o_rR5W.js";const q=Z.div`
  .create-new-sec {
    text-align: center;
    margin-top: 30px;
  }

  .pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
    gap: 10px;

    .arrows {
      display: flex;
      align-items: center;
      gap: 13px;
    }

    .arrow-icon {
      font-size: 1.5rem;
      cursor: pointer;
    }

    .back-arrow-icon {
      display: flex;
      align-items: center;
      padding: 5px;
      border: 1px solid #252b61;
      background-color: white;
      border-radius: 50%;
      cursor: pointer;
    }

    .page-btn {
      display: flex;
      gap: 8px;
      align-items: center;
      width: 100%;
      background-color: #252b61;
      border: 1px solid #252b61;
      color: white;
      font-size: 14px;
      letter-spacing: 0.03em;
      font-weight: 500;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
    }

    span {
      font-size: 14px;
      letter-spacing: 0.03em;
      font-weight: 500;
      color: #161616;
      input {
        width: 60px;
        padding: 10px 16px;
        color: #252b61;
        text-align: left;
        border: 1px solid #252b61;
        border-radius: 8px;
        margin: 0 5px;
      }
    }
  }

  .ant-select-selector{
    border-radius:24px;
    border: 1px solid var(--rapha-primary) !important;
  }

  .student-fields-sec-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: 8px;
    margin-bottom: 30px;
    .delta-signup-md {
      margin-bottom: 5px;
    }
  }
  .student-details-header {
    margin-bottom: 30px;
    span {
      cursor: pointer;
      color: #4682b4;
    }
  }
  .delta-select-column-error .delta-select__control {
    border-color: red;
  }
  .actions-btn-sec {
    display: flex;
    justify-content: end;
  }
  .error_message {
    text-align: left;
    font-size: 0.875em;
    color: #dc3545;
  }
  .profileEdit {
    font-size: 14px;
    padding: 12px 15px;
    border-radius: 8px;
    background: #008080;
    color: #fff;
  }
  .student-fields-sec-content-all {
    display: flex;
    gap: 20px;
    margin-bottom: 0px;
    justify-content: space-between;
  }
  .manage-clicnets-sec-new-ap{
    gap: 20px;
  }
  .submit-filter-btn-sec {
    margin-top: 25px;
  }

  label.form-label {
    margin-bottom: 0.5rem;
    font-size: 16px;
  }

  .actions-btn-sec {
    display: flex;
    gap: 10px;

    .deltape-cancel-button {
      font-size: 14px;
      padding: 12px 15px;
      border-radius: 8px;
      border: none;
      background: #008080;
      color: #fff;
    }

    .deltape-button {
      font-size: 14px;
      padding: 12px 15px;
      border: none;
      border-radius: 8px;
      background: #008080;
      color: #fff;
    }
  }

  .delta-select-column select {
    z-index: 999999999;
  }

  .create-new-institute-sec-content-all {
    position: relative;
    z-index: 5;
  }
`,he={address:void 0,city:void 0,companyName:void 0,dependentsPerUser:void 0,maxUsers:void 0,pincode:void 0,state:void 0,contractStartDate:void 0,contractEndDate:void 0,parentCompany:void 0,uploadLogo:void 0,booking_key:void 0},Q={companyName:!1,address:!1,city:!1,state:!1,pincode:!1,maxUsers:!1,dependentsPerUser:!1,contractStartDate:!1,contractEndDate:!1,booking_key:!1,uploadLogo:!1},fe={fullName:"Please Enter First name",email:"Please Enter Phone number",phoneNumber:"Please Enter Last name",role:"Please Enter Last name",companyName:"Please Enter Company Name",address:"Please Enter Address",city:"Please Enter city",state:"Please Enter state",pincode:"Please Enter pin code",maxUsers:"Please Enter max users",dependentsPerUser:"Please Enter dependents per user",contractStartDate:"Please Enter contract start date",contractEndDate:"Please Enter contarct end date",parentCompany:"Please Enter parent company",uploadLogo:"Please Enter upload Logo",booking_key:"Please Enter Booking Key"},ye=o=>{const[E,v]=r.useState(""),[S,C]=r.useState(!1),[i,h]=r.useState(he),[n,p]=r.useState(Q),[d,X]=r.useState(fe),[J,k]=r.useState(!1),[L,M]=r.useState(null),g=(o==null?void 0:o.isEdit)??!1,U=H(),{user:f}=W(s=>s==null?void 0:s.auth),{linkableId:_}=V();r.useEffect(()=>{o!=null&&o.selectedUser&&h(o==null?void 0:o.selectedUser)},[o==null?void 0:o.selectedUser]);const N=s=>{v("");let{name:c,value:a}=s.target;var m=a;a&&(a==null?void 0:a.trim())==""&&(m=a==null?void 0:a.trim());const j={...i},x={...n};h({...j,[c]:m}),p({...x,[c]:!1})},I=async()=>{var m,j,x,w,b,A;k(!0),v("");var s=!0,c={...Q};for(var a in c)["address","city","state","pincode","zip"].includes(a)?a=="zip"||a=="pincode"?t!=null&&t.zip||(c[a]=!0,s=!1):a=="uploadLogo"?L||(c[a]=!0,s=!1):t!=null&&t[a]||(c[a]=!0,s=!1):(i[a]===""||!i[a])&&(c[a]=!0,s=!1);if(p({...c}),console.log(c),s){const z={name:(i==null?void 0:i.companyName)??null,address:(t==null?void 0:t.address)??null,state:(t==null?void 0:t.state)??null,city:((m=t==null?void 0:t.city)==null?void 0:m.toLowerCase())??null,zip:(t==null?void 0:t.zip)??null,logo_url:L??null,parent_id:_??null,user_max:(i==null?void 0:i.maxUsers)??null,dependent_per_user:(i==null?void 0:i.dependentsPerUser)??null,booking_key:"-",contract_start:(i==null?void 0:i.contractStartDate)??null,contract_end:(i==null?void 0:i.contractEndDate)??null};if(C(!0),o!=null&&o.selectedUser){const $={...z},u=await U(te($));C(!1),(j=u==null?void 0:u.payload)!=null&&j.success?o==null||o.onSuccess():(x=u==null?void 0:u.payload)!=null&&x.error&&v((w=u==null?void 0:u.payload)==null?void 0:w.error)}else{const $={...z},u=await U(ne($));C(!1),(b=u==null?void 0:u.payload)!=null&&b.success?o==null||o.onSuccess():u!=null&&u.error&&v(((A=u==null?void 0:u.error)==null?void 0:A.message)??"")}}},B=()=>{o==null||o.handleCancel()},G=g?"edit":"",T=async s=>{var c,a,m,j;try{const x={id:`${f==null?void 0:f.id}`,ext:".png"},w=await U(se(x)),b=JSON.parse(JSON.stringify(w)),A=(a=(c=b==null?void 0:b.payload)==null?void 0:c.signedUrL)==null?void 0:a.signedUrL,z=(j=(m=b==null?void 0:b.payload)==null?void 0:m.signedUrL)==null?void 0:j.publicUrl;return await ie.put(A,s,{headers:{"Content-Type":"image/png"}}),z}catch(x){throw console.error("Error uploading image to S3:",x),x}},K=async s=>{const c=s.file.originFileObj;if(c)try{const a=await T(c);M(a),h(m=>({...m,uploadLogo:a})),p(m=>({...m,uploadLogo:!1}))}catch{p(m=>({...m,uploadLogo:!0}))}},[F,P]=r.useState([]);F==null||F.map(s=>({value:s.id,label:s.name})),r.useEffect(()=>{(async()=>{var a,m;const c=await U(ee("parent"));P((m=(a=c==null?void 0:c.payload)==null?void 0:a.data)==null?void 0:m.clients)})()},[U]);const[t,y]=r.useState({address:"",city:"",state:"",zip:"",latitude:"",longitude:""}),Y=s=>{const c={address:(s==null?void 0:s.fullAddress)||(s==null?void 0:s.formatted_address)||"",city:s==null?void 0:s.city,state:s==null?void 0:s.state,zip:s==null?void 0:s.postalCode,latitude:parseFloat((s==null?void 0:s.latitude)||0),longitude:parseFloat((s==null?void 0:s.longitude)||0)};y(c)};return e.jsxs(e.Fragment,{children:[e.jsx(R.Body,{children:e.jsx(q,{children:e.jsxs("div",{className:`create-new-institute-sec create-new-institute-sec-${G}`,children:[S&&e.jsx(O,{}),e.jsx("div",{className:"create-new-institute-sec-content",children:e.jsx("div",{className:"student-info-values",children:e.jsxs("div",{children:[e.jsx("br",{}),e.jsxs("div",{className:"student-fields-sec-content deltape-form",children:[e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:[" ","Company Name"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{isInvalid:n==null?void 0:n.companyName,name:"companyName",type:"text",value:i==null?void 0:i.companyName,onChange:s=>N(s)}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.companyName?e.jsx(e.Fragment,{children:d==null?void 0:d.companyName}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"address",children:[e.jsxs(l.Label,{children:["Address"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{disabled:!0,hidden:!0,className:"hidden ",isInvalid:n==null?void 0:n.address,name:"address",type:"text",maxLength:10,value:i==null?void 0:i.address,onChange:s=>N(s)}),e.jsx(q,{children:e.jsx(de,{className:`${n!=null&&n.address?"!border !border-red-500":""}`,onAddressSelected:s=>{if(s){const c=s.address_components;let a="",m="",j="";console.log(s,"addressData"),c==null||c.forEach(x=>{const w=x.types;w.includes("locality")&&(a=x.long_name),w.includes("administrative_area_level_1")&&(m=x.long_name),w.includes("postal_code")&&(j=x.long_name)}),y(x=>({...x,address:s.formatted_address,city:a,state:m,zip:j}))}},autoFocus:!0,name:"fromAddress",id:"fromAddress",placeholder:"Type street address",onChange:Y,value:t==null?void 0:t.address})}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.address?e.jsx(e.Fragment,{children:d==null?void 0:d.address}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["City"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{type:"text",name:"city",isInvalid:n==null?void 0:n.city,value:(t==null?void 0:t.city)??"",onChange:()=>{}}),n!=null&&n.city?e.jsx(l.Control.Feedback,{type:"invalid",children:e.jsx(e.Fragment,{children:d==null?void 0:d.city})}):null]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["State"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{type:"text",name:"state",isInvalid:n==null?void 0:n.city,value:(t==null?void 0:t.state)??"",onChange:()=>{}}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.state?e.jsx(e.Fragment,{children:d==null?void 0:d.state}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["Pincode"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{type:"text",name:"zip",isInvalid:n==null?void 0:n.pincode,value:(t==null?void 0:t.zip)??"",onChange:()=>{}}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.pincode?e.jsx(e.Fragment,{children:d==null?void 0:d.pincode}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["Max Users"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{min:0,isInvalid:n==null?void 0:n.maxUsers,name:"maxUsers",type:"number",value:i==null?void 0:i.maxUsers,onChange:s=>{Number(s.target.value)>=0&&N(s)}}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.maxUsers?e.jsx(e.Fragment,{children:d==null?void 0:d.maxUsers}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["Department Per User"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{min:0,isInvalid:n==null?void 0:n.dependentsPerUser,name:"dependentsPerUser",type:"number",value:i==null?void 0:i.dependentsPerUser,onChange:s=>{Number(s.target.value)>=0&&N(s)}}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.dependentsPerUser?e.jsx(e.Fragment,{children:d==null?void 0:d.dependentsPerUser}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["Contarct Start Date"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{isInvalid:n==null?void 0:n.contractStartDate,name:"contractStartDate",type:"date",onFocus:s=>{var a;const c=s.target;(a=c.showPicker)==null||a.call(c)},value:i==null?void 0:i.contractStartDate,onChange:s=>N(s)}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.contractStartDate?e.jsx(e.Fragment,{children:d==null?void 0:d.contractStartDate}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["Contarct End Date"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{isInvalid:n==null?void 0:n.contractEndDate,name:"contractEndDate",type:"date",min:i==null?void 0:i.contractStartDate,onFocus:s=>{var a;const c=s.target;(a=c.showPicker)==null||a.call(c)},value:i==null?void 0:i.contractEndDate,onChange:s=>N(s)}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.contractEndDate?e.jsx(e.Fragment,{children:d==null?void 0:d.contractEndDate}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"bookingKey",children:[e.jsxs(l.Label,{children:["Booking Key"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx(l.Control,{isInvalid:n==null?void 0:n.booking_key,name:"booking_key",type:"text",placeholder:"Ex: RC",value:i==null?void 0:i.booking_key,onChange:s=>N(s)}),e.jsx(l.Control.Feedback,{type:"invalid",children:n!=null&&n.booking_key?e.jsx(e.Fragment,{children:d==null?void 0:d.booking_key}):null})]})}),e.jsx("div",{className:"student-info-row",children:e.jsxs(l.Group,{className:"delta-signup-md",controlId:"email",children:[e.jsxs(l.Label,{children:["Upload Logo"," ",e.jsx("span",{className:"mand-sign-field text-red-500",children:"*"})]}),e.jsx("br",{}),e.jsx(me,{accept:"image/png",showUploadList:!1,onChange:K,children:e.jsx(ue,{icon:e.jsx(oe,{}),className:"min-w-[200px] w-full mb-3",children:"Upload Image"})}),L&&e.jsx("div",{className:"image-preview",children:e.jsx(xe,{width:200,src:L,alt:"Uploaded Image"})}),n!=null&&n.uploadLogo?e.jsx("div",{className:"text-red-500 text-sm mt-1",children:"Logo is required"}):null]})})]})]})})}),E&&e.jsxs("p",{className:"error_message",children:[" ",E," "]})]})})}),e.jsx(R.Footer,{children:e.jsxs("div",{className:"actions-btn-sec align-center",children:[e.jsx(re,{className:"!py-2",onClick:B,children:"Cancel"}),e.jsx(D,{className:"!bg-[#262b61] !py-2 text-white",onClick:I,children:g?"Update User":"Create User"})]})})]})},je=o=>{const{handleCancel:E,show:v,selectedUser:S}=o,C=!!S;return v&&e.jsx(R,{headerClassName:"p-1",handleClose:E,open:v,title:C?"Edit Client":"Add New Client",children:e.jsx(ye,{...o,isEdit:C})})},ot=()=>{var F,P;const[o,E]=r.useState(null),[v,S]=r.useState(!1),[C,i]=r.useState(""),[h,n]=r.useState(1),[p,d]=r.useState(10),[X,J]=r.useState(!1),[k,L]=r.useState(h),M=H(),{allClients:g,loading:U}=W(t=>t==null?void 0:t.clients),[f,_]=r.useState(""),N=le();r.useEffect(()=>{const t=setTimeout(()=>{var y;k>=1&&k<=Math.ceil(((y=g==null?void 0:g.data)==null?void 0:y.clientsCount)/p)&&n(k)},500);return()=>{clearTimeout(t)}},[k]),r.useEffect(()=>{const t=new URLSearchParams(window.location.search);if(t)try{t!=null&&t.get("search")&&_((t==null?void 0:t.get("search"))??""),t!=null&&t.get("pgNo")&&n(Number((t==null?void 0:t.get("pgNo"))??1)),t!=null&&t.get("size")&&d(Number((t==null?void 0:t.get("size"))??10)),t!=null&&t.get("status")&&E((t==null?void 0:t.get("status"))??"")}catch(y){console.log(y)}},[]),r.useEffect(()=>{const t=new URLSearchParams;f&&t.set("search",f),h&&t.set("pgNo",h.toString()),p&&t.set("size",p.toString()),o&&t.set("status",o)},[f,o,p,h]);const I=r.useCallback(()=>{const t={page:h-1,count:p};o&&(t.status=o),f&&(t.searchText=f),M(ae(t))},[h,p,o,f]);r.useEffect(()=>{I()},[I]);const B=()=>{S(!1)},G=()=>{S(!1),J(!0)},T=t=>{const{value:y}=t.target;_(y)},K=[{label:"Id",key:"id",dataIndex:"id",render:t=>e.jsx("span",{onClick:()=>N(`update/${t}`),className:"no-underline text-blue-500 cursor-pointer",children:t})},{label:"Name",key:"name",dataIndex:"name"},{label:"User count",key:"user_count",dataIndex:"user_count",render:t=>e.jsx(e.Fragment,{children:t})},{label:"Client User count",key:"client_user_count",dataIndex:"client_user_count",render:t=>e.jsx(e.Fragment,{children:t})}];return e.jsx(e.Fragment,{children:e.jsx(q,{children:e.jsxs("div",{className:"freshbag-wrapper px-2 sm:px-4 pt-3 ",children:[e.jsxs("div",{className:"content getinTouchPage",children:[e.jsxs("div",{children:[e.jsx(pe,{items:[{name:"Clients",link:"/MyClients"},{name:"All Clients"}]}),e.jsx("div",{className:"profileinfoHeader",children:e.jsx("div",{className:"top-sec-header-sec",children:e.jsx("h2",{className:"!text-[20px]",children:"Manage Clients"})})})]}),e.jsx("div",{className:"create-new-institute-sec-content-all",children:e.jsx("div",{className:"student-fields-sec-content-all max-[675px]:flex-col deltape-form",children:e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"student-info-row",children:[e.jsx("label",{htmlFor:"client_search",className:"!text-sm mb-1 text-[raphaprimary]",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute rounded-full h-[70%] top-1/2 -translate-y-1/2 left-2 flex items-center justify-center bg-[#92BDF6] aspect-square",children:e.jsx(ce,{})}),e.jsx("input",{id:"client_search",placeholder:"Search Name, Email",className:"w-full border !border-blue-900 focus:!border-blue-900 rounded-3xl !py-[5.7px] !pl-[40px]",type:"text",value:f,onChange:t=>T(t)})]})]})})})}),e.jsxs("div",{children:[e.jsx("div",{className:"institutes-filters"}),e.jsx("div",{className:"all-institutes-data deltape-table-view",children:e.jsx(ge,{columns:K,data:(F=g==null?void 0:g.data)==null?void 0:F.clients,page:h,pageSize:p,total:(P=g==null?void 0:g.data)==null?void 0:P.clientsCount,onPageChange:(t,y)=>{n(t),d(y)},isLoading:U,pagination:!0,showingName:"Clients"})})]})]}),e.jsx(je,{onSuccess:()=>{S(!1),i({}),I()},handleCancel:B,selectedUser:C,addUserSuccess:G,show:v,getAllUsersCall:I})]})})})};export{ot as default};
