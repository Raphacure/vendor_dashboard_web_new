import{r as s,ao as ne,g as xe,m as fe,w as O,b as ve,f as Me,h as ae,e as k,a3 as $e,ap as we,j as n,ab as ee,d as ye,a5 as Ce,aq as je,ah as Se,z as Ye,ak as Ne,a1 as be,a8 as Re,a0 as le}from"./index-PsMG3Zdc.js";import{d as J}from"./dayjs.min-BXvgyEn3.js";import{a as Ee}from"./bookingsQuery-CAYjxI9l.js";import{i as Be,g as Pe,a as Oe,R as Te,b as De}from"./index-DliyYz8W.js";import"./index-B46B2bWJ.js";import{S as G,G as Ie,B as re}from"./index-Ddh1qbRu.js";import{c as de}from"./createLucideIcon-DgyBfDek.js";import"./useQuery-BiTCPQsi.js";const He=10,ze=20;function Le(e){const{fullscreen:t,validRange:l,generateConfig:c,locale:u,prefixCls:i,value:r,onChange:N,divRef:x}=e,j=c.getYear(r||c.getNow());let y=j-He,C=y+ze;l&&(y=c.getYear(l[0]),C=c.getYear(l[1])+1);const w=u&&u.year==="年"?"年":"",d=[];for(let f=y;f<C;f++)d.push({label:`${f}${w}`,value:f});return s.createElement(G,{size:t?void 0:"small",options:d,value:j,className:`${i}-year-select`,onChange:f=>{let Y=c.setYear(r,f);if(l){const[$,S]=l,a=c.getYear(Y),v=c.getMonth(Y);a===c.getYear(S)&&v>c.getMonth(S)&&(Y=c.setMonth(Y,c.getMonth(S))),a===c.getYear($)&&v<c.getMonth($)&&(Y=c.setMonth(Y,c.getMonth($)))}N(Y)},getPopupContainer:()=>x.current})}function _e(e){const{prefixCls:t,fullscreen:l,validRange:c,value:u,generateConfig:i,locale:r,onChange:N,divRef:x}=e,j=i.getMonth(u||i.getNow());let y=0,C=11;if(c){const[f,Y]=c,$=i.getYear(u);i.getYear(Y)===$&&(C=i.getMonth(Y)),i.getYear(f)===$&&(y=i.getMonth(f))}const w=r.shortMonths||i.locale.getShortMonths(r.locale),d=[];for(let f=y;f<=C;f+=1)d.push({label:w[f],value:f});return s.createElement(G,{size:l?void 0:"small",className:`${t}-month-select`,value:j,options:d,onChange:f=>{N(i.setMonth(u,f))},getPopupContainer:()=>x.current})}function We(e){const{prefixCls:t,locale:l,mode:c,fullscreen:u,onModeChange:i}=e;return s.createElement(Ie,{onChange:({target:{value:r}})=>{i(r)},value:c,size:u?void 0:"small",className:`${t}-mode-switch`},s.createElement(re,{value:"month"},l.month),s.createElement(re,{value:"year"},l.year))}function Fe(e){const{prefixCls:t,fullscreen:l,mode:c,onChange:u,onModeChange:i}=e,r=s.useRef(null),N=s.useContext(ne),x=s.useMemo(()=>Object.assign(Object.assign({},N),{isFormItemInput:!1}),[N]),j=Object.assign(Object.assign({},e),{fullscreen:l,divRef:r});return s.createElement("div",{className:`${t}-header`,ref:r},s.createElement(ne.Provider,{value:x},s.createElement(Le,Object.assign({},j,{onChange:y=>{u(y,"year")}})),c==="month"&&s.createElement(_e,Object.assign({},j,{onChange:y=>{u(y,"month")}}))),s.createElement(We,Object.assign({},j,{onModeChange:i})))}const Ae=e=>{const{calendarCls:t,componentCls:l,fullBg:c,fullPanelBg:u,itemActiveBg:i}=e;return{[t]:Object.assign(Object.assign(Object.assign({},Pe(e)),ve(e)),{background:c,"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",justifyContent:"flex-end",padding:`${O(e.paddingSM)} 0`,[`${t}-year-select`]:{minWidth:e.yearControlWidth},[`${t}-month-select`]:{minWidth:e.monthControlWidth,marginInlineStart:e.marginXS},[`${t}-mode-switch`]:{marginInlineStart:e.marginXS}}}),[`${t} ${l}-panel`]:{background:u,border:0,borderTop:`${O(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,[`${l}-month-panel, ${l}-date-panel`]:{width:"auto"},[`${l}-body`]:{padding:`${O(e.paddingXS)} 0`},[`${l}-content`]:{width:"100%"}},[`${t}-mini`]:{borderRadius:e.borderRadiusLG,[`${t}-header`]:{paddingInlineEnd:e.paddingXS,paddingInlineStart:e.paddingXS},[`${l}-panel`]:{borderRadius:`0 0 ${O(e.borderRadiusLG)} ${O(e.borderRadiusLG)}`},[`${l}-content`]:{height:e.miniContentHeight,th:{height:"auto",padding:0,lineHeight:O(e.weekHeight)}},[`${l}-cell::before`]:{pointerEvents:"none"}},[`${t}${t}-full`]:{[`${l}-panel`]:{display:"block",width:"100%",textAlign:"end",background:c,border:0,[`${l}-body`]:{"th, td":{padding:0},th:{height:"auto",paddingInlineEnd:e.paddingSM,paddingBottom:e.paddingXXS,lineHeight:O(e.weekHeight)}}},[`${l}-cell-week ${l}-cell-inner`]:{display:"block",borderRadius:0,borderTop:`${O(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,width:"100%",height:e.calc(e.dateValueHeight).add(e.dateContentHeight).add(e.calc(e.paddingXS).div(2)).add(e.lineWidthBold).equal()},[`${l}-cell`]:{"&::before":{display:"none"},"&:hover":{[`${t}-date`]:{background:e.controlItemBgHover}},[`${t}-date-today::before`]:{display:"none"},[`&-in-view${l}-cell-selected`]:{[`${t}-date, ${t}-date-today`]:{background:i}},"&-selected, &-selected:hover":{[`${t}-date, ${t}-date-today`]:{[`${t}-date-value`]:{color:e.colorPrimary}}}},[`${t}-date`]:{display:"block",width:"auto",height:"auto",margin:`0 ${O(e.calc(e.marginXS).div(2).equal())}`,padding:`${O(e.calc(e.paddingXS).div(2).equal())} ${O(e.paddingXS)} 0`,border:0,borderTop:`${O(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,transition:`background ${e.motionDurationSlow}`,"&-value":{lineHeight:O(e.dateValueHeight),transition:`color ${e.motionDurationSlow}`},"&-content":{position:"static",width:"auto",height:e.dateContentHeight,overflowY:"auto",color:e.colorText,lineHeight:e.lineHeight,textAlign:"start"},"&-today":{borderColor:e.colorPrimary,[`${t}-date-value`]:{color:e.colorText}}}},[`@media only screen and (max-width: ${O(e.screenXS)}) `]:{[t]:{[`${t}-header`]:{display:"block",[`${t}-year-select`]:{width:"50%"},[`${t}-month-select`]:{width:`calc(50% - ${O(e.paddingXS)})`},[`${t}-mode-switch`]:{width:"100%",marginTop:e.marginXS,marginInlineStart:0,"> label":{width:"50%",textAlign:"center"}}}}}}},Xe=e=>Object.assign({fullBg:e.colorBgContainer,fullPanelBg:e.colorBgContainer,itemActiveBg:e.controlItemBgActive,yearControlWidth:80,monthControlWidth:70,miniContentHeight:256},Oe(e)),Ve=xe("Calendar",e=>{const t=`${e.componentCls}-calendar`,l=fe(e,Be(e),{calendarCls:t,pickerCellInnerCls:`${e.componentCls}-cell-inner`,dateValueHeight:e.controlHeightSM,weekHeight:e.calc(e.controlHeightSM).mul(.75).equal(),dateContentHeight:e.calc(e.calc(e.fontHeightSM).add(e.marginXS)).mul(3).add(e.calc(e.lineWidth).mul(2)).equal()});return Ae(l)},Xe),ie=(e,t,l)=>{const{getYear:c}=l;return e&&t&&c(e)===c(t)},te=(e,t,l)=>{const{getMonth:c}=l;return ie(e,t,l)&&c(e)===c(t)},se=(e,t,l)=>{const{getDate:c}=l;return te(e,t,l)&&c(e)===c(t)},oe=e=>l=>{const{prefixCls:c,className:u,rootClassName:i,style:r,dateFullCellRender:N,dateCellRender:x,monthFullCellRender:j,monthCellRender:y,cellRender:C,fullCellRender:w,headerRender:d,value:f,defaultValue:Y,disabledDate:$,mode:S,validRange:a,fullscreen:v=!0,showWeek:R,onChange:T,onPanelChange:E,onSelect:P}=l,{getPrefixCls:D,direction:W,className:I,style:K}=Me("calendar"),q=D("picker",c),B=`${q}-calendar`,[U,Z,h]=Ve(q,B),p=e.getNow(),[M,H]=ae(()=>f||e.getNow(),{defaultValue:Y,value:f}),[L,Q]=ae("month",{value:S}),z=s.useMemo(()=>L==="year"?"month":"date",[L]),F=s.useCallback(o=>(a?e.isAfter(a[0],o)||e.isAfter(o,a[1]):!1)||!!($!=null&&$(o)),[$,a]),g=(o,b)=>{E==null||E(o,b)},A=o=>{H(o),se(o,M,e)||((z==="date"&&!te(o,M,e)||z==="month"&&!ie(o,M,e))&&g(o,L),T==null||T(o))},X=o=>{Q(o),g(M,o)},V=(o,b)=>{A(o),P==null||P(o,{source:b})},m=s.useCallback((o,b)=>w?w(o,b):N?N(o):s.createElement("div",{className:k(`${q}-cell-inner`,`${B}-date`,{[`${B}-date-today`]:se(p,o,e)})},s.createElement("div",{className:`${B}-date-value`},String(e.getDate(o)).padStart(2,"0")),s.createElement("div",{className:`${B}-date-content`},C?C(o,b):x==null?void 0:x(o))),[N,x,C,w]),me=s.useCallback((o,b)=>{if(w)return w(o,b);if(j)return j(o);const ge=b.locale.shortMonths||e.locale.getShortMonths(b.locale.locale);return s.createElement("div",{className:k(`${q}-cell-inner`,`${B}-date`,{[`${B}-date-today`]:te(p,o,e)})},s.createElement("div",{className:`${B}-date-value`},ge[e.getMonth(o)]),s.createElement("div",{className:`${B}-date-content`},C?C(o,b):y==null?void 0:y(o)))},[j,y,C,w]),[ue]=$e("Calendar",we),_=Object.assign(Object.assign({},ue),l.locale),pe=(o,b)=>{if(b.type==="date")return m(o,b);if(b.type==="month")return me(o,Object.assign(Object.assign({},b),{locale:_==null?void 0:_.lang}))};return U(s.createElement("div",{className:k(B,{[`${B}-full`]:v,[`${B}-mini`]:!v,[`${B}-rtl`]:W==="rtl"},I,u,i,Z,h),style:Object.assign(Object.assign({},K),r)},d?d({value:M,type:L,onChange:o=>{V(o,"customize")},onTypeChange:X}):s.createElement(Fe,{prefixCls:B,value:M,generateConfig:e,mode:L,fullscreen:v,locale:_==null?void 0:_.lang,validRange:a,onChange:V,onModeChange:X}),s.createElement(Te,{value:M,prefixCls:q,locale:_==null?void 0:_.lang,generateConfig:e,cellRender:pe,onSelect:o=>{V(o,z)},mode:z,picker:z,disabledDate:F,hideHeader:!0,showWeek:R})))},he=oe(De);he.generateCalendar=oe;/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ge=de("ChevronLeft",qe);/**
 * @license lucide-react v0.482.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Qe=de("ChevronRight",Ke),Je=e=>{const[t,l]=s.useState(!1);return s.useEffect(()=>{const c=window.matchMedia(e);l(c.matches);const u=i=>{l(i.matches)};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[e]),t},ce=e=>{const{bookings:t,current:l,handleShowMore:c,mode:u,handleBookingDetailsModalOpen:i,leaves:r}=e,[N,x]=s.useState([]),[j,y]=s.useState(0),C=s.useRef(null),[w,d]=s.useState(0),f=Je("(max-width: 768px)"),Y=s.useMemo(()=>J(),[]),$=s.useMemo(()=>l.format("YYYY-MM-DD")===Y.format("YYYY-MM-DD"),[l,Y]),S=r&&(r==null?void 0:r.length)>0&&u==="month"?"bg-[#F3E1EA]":t&&(t==null?void 0:t.length)>0?"bg-[#e9f2fd]":"";return s.useEffect(()=>{if(!(t!=null&&t.length)||!C.current)return;const a=()=>{const v=C.current;if(!v)return;const R=v.clientHeight,E=Math.floor(R/30),P=Math.max(1,E);d(P),x(t.slice(0,P)),y(Math.max(0,t.length-P))};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[t]),f&&u==="month"?n.jsxs("div",{className:`mobile-date-cell ${r&&(r==null?void 0:r.length)>0?"has-leaves":""} ${t&&(t==null?void 0:t.length)>0?"has-bookings":""}`,children:[n.jsx("div",{className:`date-indicator ${$?"current-date":""}`,children:l.date()}),n.jsxs("div",{className:"badge-container",children:[t==null?void 0:t.slice(0,2).map((a,v)=>{var R,T,E,P,D;return n.jsx("div",{onClick:W=>{W.stopPropagation(),i(a)},className:`badge-pill ${(a==null?void 0:a.status)==="completed"?"bg-green-200":"bg-[#FFDA85]"}`,children:(R=a==null?void 0:a.user)!=null&&R.first_name?`${(E=(T=a==null?void 0:a.user)==null?void 0:T.first_name)==null?void 0:E.substring(0,6)}${((D=(P=a==null?void 0:a.user)==null?void 0:P.first_name)==null?void 0:D.length)>6?"...":""}`:(a==null?void 0:a.type)||"Stand"},(a==null?void 0:a.id)||v)}),t&&(t==null?void 0:t.length)>2&&n.jsxs("div",{onClick:a=>{a.stopPropagation(),c({data:{bookings:t,leaves:r},type:r&&(r==null?void 0:r.length)>0?"leave":"booking",title:l.format("DD MMMM YYYY"),position:{top:`${a.currentTarget.getBoundingClientRect().top}`,left:`${a.currentTarget.getBoundingClientRect().right}`}})},className:"text-[10px] text-black font-medium underline cursor-pointer text-center",children:["+",(t==null?void 0:t.length)-2," more"]})]})]}):n.jsxs("div",{className:`h-[140px] max-h-[140px] overflow-hidden flex flex-col cursor-default rounded-md p-1 ${S}`,children:[n.jsx("div",{children:n.jsx("div",{className:"text-[1rem] text-black",children:u==="year"?l.format("MMMM"):l.date()})}),r&&(r==null?void 0:r.length)>0&&u==="month"?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"flex justify-around items-center h-full flex-col",children:[n.jsx("img",{className:"w-[36px] h-[36px]",src:"https://raphacure-public-images.s3.ap-south-1.amazonaws.com/119535-1745576627643.png",alt:"vacation_pic"}),n.jsx("p",{className:"text-black font-medium",children:"On Vacation"})]})}):n.jsxs(n.Fragment,{children:[t&&(t==null?void 0:t.length)>0?n.jsxs("div",{ref:C,className:"w-full grow-1 px-2 py-1 overflow-hidden",children:[N.map(a=>{var v,R;return n.jsx("div",{onClick:T=>{T.stopPropagation(),i(a)},className:`${(a==null?void 0:a.status)=="completed"?"bg-green-200":"bg-[#92bdf6]"} max-w-[100%] truncate text-[12px] font-medium capitalize px-2 rounded-2xl my-[5px] inline-block cursor-pointer`,children:`${((v=a==null?void 0:a.user)==null?void 0:v.first_name)??""} ${((R=a==null?void 0:a.user)==null?void 0:R.last_name)??""}`},a==null?void 0:a.id)}),j>0&&n.jsxs("div",{onClick:a=>{a.stopPropagation(),c({data:{bookings:t},type:"booking",title:l.format("DD MMMM YYYY"),position:{top:`${a.currentTarget.getBoundingClientRect().top}`,left:`${a.currentTarget.getBoundingClientRect().right}`}})},className:"text-[12px] text-black font-medium mt-1 underline cursor-pointer",children:["+",j," more booking",j!==1?"s":""]})]}):n.jsx("div",{children:"No bookings"}),r&&(r==null?void 0:r.length)>0&&u==="year"&&n.jsxs("div",{ref:C,className:"w-full grow-1 px-2 py-1 overflow-hidden",children:[r==null?void 0:r.slice(0,w).map(a=>n.jsx("div",{className:"bg-[#E7C2D4] max-w-[100%] truncate text-[12px] font-medium capitalize px-2 rounded-2xl my-[5px] inline-block cursor-pointer",children:`${ee(a==null?void 0:a.type)} leave ${a!=null&&a.reason?"("+(a==null?void 0:a.reason)+")":""}`},a==null?void 0:a.id)),Math.max(0,(r==null?void 0:r.length)-w)>0&&n.jsxs("div",{onClick:a=>{a.stopPropagation(),c({data:{leaves:r},type:"leave",title:l.format("DD MMMM YYYY"),position:{top:`${a.currentTarget.getBoundingClientRect().top}`,left:`${a.currentTarget.getBoundingClientRect().right}`}})},className:"text-[12px] text-black font-medium mt-1 underline cursor-pointer",children:["+",Math.max(0,(r==null?void 0:r.length)-w)," more leaves",j!==1?"s":""]})]})]})]})},Ue=ye.div`
    .calendar-container .ant-picker-cell {
        border: 2px solid #e9e9e9;
        padding: 2px !important;
        text-align: initial;
    }

    .calender-mode-select{
        .ant-select-selector{
            border-radius:25px;
            border:1px solid black;
            padding:7px 20px;
        }
    }

    .header-style{
        box-shadow: 2px 2px 9px 0px #00000021;
    }
    
    /* Mobile view styles */
    @media (max-width: 768px) {
        .ant-picker-calendar {
            .ant-picker-panel {
                width: 100%;
            }
            
            .ant-picker-cell {
                height: auto;
                min-height: 60px;
                
                .ant-picker-cell-inner {
                    height: 100%;
                    min-height: 60px;
                    display: flex;
                    flex-direction: column;
                }
            }
            
            .ant-picker-content th {
                font-weight: bold;
                text-transform: uppercase;
            }
            
            .mobile-date-cell {
                height: 100%;
                min-height: 60px;
                width: 100%;
                display: flex;
                flex-direction: column;
                padding: 2px;
                border-radius: 4px;
                position: relative;
                
                .date-indicator {
                    font-weight: 500;
                    padding: 2px 4px;
                    text-align: center;
                    width: 24px;
                    height: 24px;
                    margin-bottom: 2px;
                    border-radius: 50%;
                }
                
                .current-date {
                    background-color: #1677ff;
                    color: white;
                    font-weight: bold;
                }
                
                .badge-container {
                    display: flex;
                    flex-direction: column;
                    gap: 4px;
                    padding-top: 2px;
                }
                
                .badge-pill {
                    padding: 2px 6px;
                    border-radius: 12px;
                    font-size: 10px;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    text-align: center;
                }
                
                &.has-bookings {
                    background-color: #f0f7ff;
                }
                
                &.has-leaves {
                    background-color: #F3E1EA;
                }
            }
        }
    }
`,Ze="raphaplus-tooltip-container",ke=({position:e,children:t,parentClassName:l,title:c,handleClose:u,headerClassName:i})=>{const r=s.useRef(null),N=s.useRef(null),[x,j]=s.useState(e),[y,C]=s.useState("90%");s.useEffect(()=>{if(e!=null&&e.top||e!=null&&e.bottom||e!=null&&e.left||e!=null&&e.right){const d=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=d}}},[e]),s.useEffect(()=>{const d=()=>{if(!N.current)return;const $=N.current.getBoundingClientRect(),S=window.innerWidth,a=window.innerHeight,v={...e};let R="90%";if((e==null?void 0:e.top)!==void 0||(e==null?void 0:e.left)!==void 0){const E=(e==null?void 0:e.left)||0,P=S-E-10;if($.left<10){v.left=10;const I=S-20;R=`${Math.min(I,S*.9)}px`}else if($.right>S-10){const I=Math.max(10,S-$.width-10);v.left=I;const K=S-I-10;R=`${Math.min(K,S*.9)}px`}else R=`${Math.min(P,S*.9)}px`;const D=10,W=$.height/2;$.top<D&&(v.top=D+W),$.bottom>a-D&&(v.top=a-W-D)}j(v),C(R)},f=setTimeout(d,50);return window.addEventListener("resize",d),()=>{clearTimeout(f),window.removeEventListener("resize",d),r.current&&r.current.remove()}},[e]);const w=!(x!=null&&x.top)&&!(x!=null&&x.left);return n.jsx("div",{ref:r,className:`${Ze} h-[100vh] w-[100vw] bg-black/30 fixed top-0 left-0 right-0 bottom-0 z-10000 overflow-hidden`,children:n.jsx("div",{ref:N,className:`absolute ${l||""} overflow-hidden max-h-[90%] bg-white rounded-3xl shadow-2xl !p-[3px]`,style:{top:w?"50%":`${x==null?void 0:x.top}px`,left:w?"50%":`${x==null?void 0:x.left}px`,transform:w?"translate(-50%, -50%)":"translate(0, -50%)",maxWidth:w?"90%":y},children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:`flex justify-between items-center h-[30px] bg-[#e9f2fd] rounded-t-3xl p-1 flex-shrink-0 ${i||""}`,children:[n.jsx("div",{className:"text-lg font-bold truncate flex-1 mr-2",children:c}),n.jsx("span",{onClick:d=>{d.stopPropagation(),u==null||u()},className:"cursor-pointer flex-shrink-0",children:n.jsx(je,{size:23})})]}),n.jsx("div",{className:"flex-grow max-h-[calc(90vh-30px)] overflow-y-auto min-h-0",children:t})]})})})},et=({position:e,children:t,isOpen:l,parentClassName:c,title:u,handleClose:i,headerClassName:r})=>n.jsx(n.Fragment,{children:l&&Ce.createPortal(n.jsx(ke,{parentClassName:c,handleClose:i,title:u,position:e,children:t,headerClassName:r}),document.body)}),it=()=>{const{linkableId:e}=Se(),[t,l]=s.useState(()=>J(new Date)),[c,u]=s.useState(J(new Date)),[i,r]=s.useState("month"),[N,x]=s.useState(null),[j,y]=s.useState(!1),[C,w]=s.useState(!1),[d,f]=s.useState(null),Y=h=>{w(!0),f(h)},$=()=>{w(!1),f(null)},[S,a]=s.useState(!1),[v,R]=s.useState(new Map),T=s.useMemo(()=>{if(!t)return null;const h=t.startOf(i==="month"?"month":"year").format("YYYY-MM-DD"),p=t.endOf(i==="month"?"month":"year").format("YYYY-MM-DD");return{dateType:"scheduled",from:h,to:p}},[i,t]),{data:E,isLoading:P,isError:D}=Ee({from:"vendor",status:"booking_scheduled,consultation_rescheduled,open,completed,sample_collected",id:String(e),pageSize:1e4,page:1,...T?{dateRange:T}:{}});console.log("bookings",v),s.useEffect(()=>{var h;if((h=E==null?void 0:E.data)!=null&&h.bookings){const p=new Map;E.data.bookings.forEach(M=>{if(M!=null&&M.collection_1_date){const H=J(M==null?void 0:M.collection_1_date,"DD/MM/YYYY").format("DD/MM/YYYY");p.has(H)?p.set(H,[...p.get(H),M]):p.set(H,[M])}}),R(p)}},[E]),s.useEffect(()=>{a(P)},[P]),s.useEffect(()=>{D&&Ye.error("Failed to fetch bookings.")},[D]);const W=(h,p)=>{i==="month"?(t.format("MM/YYYY")!==h.format("MM/YYYY")&&l(h),u(h)):i==="year"&&(l(h),u(h),r("month")),console.log("info",p)},I=h=>{x(h),y(!0)},K=h=>{const p=v.get(h.format("MM/YYYY"));return n.jsx(ce,{handleShowMore:Y,bookings:p,current:h,loading:S,mode:i,handleBookingDetailsModalOpen:I})},q=h=>{const p=v.get(h.format("DD/MM/YYYY"));return n.jsx(ce,{handleShowMore:Y,bookings:p,current:h,loading:S,mode:i,handleBookingDetailsModalOpen:I})},B=({value:h,type:p,onChange:M,onTypeChange:H})=>{const z=[];let F=h.clone();const g=h.localeData(),A=[];for(let m=0;m<12;m++)F=F.month(m),A.push(g.monthsShort(F));for(let m=0;m<12;m++)z.push(n.jsx(G.Option,{value:m,className:"month-item",children:A[m]},m));const X=h.year();h.month();const V=[];for(let m=X-10;m<X+10;m+=1)V.push(n.jsx(G.Option,{value:m,className:"year-item",children:m},m));return n.jsx("div",{className:"!px-[22px] rounded-t-[20px] !py-[14px] header-style !mb-[22px]",children:n.jsxs("div",{className:"flex flex-col min-[675px]:flex-row justify-between items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-[46px] w-full",children:[n.jsx(Re,{className:"!border-[1px]",onClick:()=>{const m=J();l(m),u(m),i==="year"&&r("month")},children:"Today"}),n.jsxs("div",{className:"flex gap-6 items-center",children:[n.jsx(le,{className:"!border-none shadow-none",icon:n.jsx(Ge,{}),onClick:()=>{const m=h.clone();M(p==="month"?m.month(m.month()-1):m.year(m.year()-1))}}),n.jsx("p",{className:"font-medium m-0 text-[Inter] text-[20px] mb-1",children:h.format(p==="month"?"MMMM YYYY":"YYYY")}),n.jsx(le,{className:"!border-none shadow-none ",icon:n.jsx(Qe,{}),onClick:()=>{const m=h.clone();M(p==="month"?m.month(m.month()+1):m.year(m.year()+1))}})]})]}),n.jsx("div",{className:"max-[675px]:w-full",children:n.jsxs(G,{value:p,onChange:m=>{H(m),r(m)},className:"calender-mode-select",children:[n.jsx(G.Option,{value:"month",children:"Month"}),n.jsx(G.Option,{value:"year",children:"Year"})]})})]})})},U=(h,p)=>p.type==="date"?q(h):p.type==="month"?K(h):p.originNode,Z=(h,p)=>{r(p)};return console.log("toolTipData",d),n.jsx(Ue,{children:n.jsxs("div",{className:"p-2 sm:px-4 sm:py-3",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("h4",{className:"font-bold",children:"My Calendar"})}),n.jsx("div",{className:"flex gap-3 max-[1100px]:flex-col",children:n.jsx("div",{className:"flex-grow-0",children:n.jsxs("div",{className:"bg-white rounded-lg p-2 calendar-container",children:[n.jsx(et,{handleClose:$,isOpen:C,title:d==null?void 0:d.title,position:d==null?void 0:d.position,children:n.jsx("div",{className:"p-2",children:(()=>{var h,p,M,H,L,Q,z,F;switch(d==null?void 0:d.type){case"booking":return n.jsxs("div",{children:[n.jsxs("p",{children:["Total ",(p=(h=d==null?void 0:d.data)==null?void 0:h.bookings)==null?void 0:p.length," ","Consultations"]}),n.jsx("div",{className:"flex gap-2 flex-col max-h-[140px] overflow-y-auto",children:(H=(M=d==null?void 0:d.data)==null?void 0:M.bookings)==null?void 0:H.map((g,A)=>{var X,V;return n.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:[n.jsx("div",{className:"bg-[#92bdf6] px-2 rounded-lg text-sm cursor-pointer",onClick:m=>{m.stopPropagation(),$(),I(g)},children:n.jsx("div",{className:"font-semibold capitalize",children:`${((X=g==null?void 0:g.user)==null?void 0:X.first_name)??""} ${((V=g==null?void 0:g.user)==null?void 0:V.last_name)??""}`})}),n.jsx("div",{className:"text-[.8rem] font-semibold",children:(g==null?void 0:g.collection_1_slot)??""})]},(g==null?void 0:g.id)||A)})})]});case"leave":return n.jsx(n.Fragment,{children:n.jsxs("div",{children:[n.jsxs("p",{children:["Total ",(Q=(L=d==null?void 0:d.data)==null?void 0:L.leaves)==null?void 0:Q.length," Leaves"]}),n.jsx("div",{className:"flex gap-2 flex-col max-h-[140px] overflow-y-auto",children:(F=(z=d==null?void 0:d.data)==null?void 0:z.leaves)==null?void 0:F.map((g,A)=>n.jsx("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:n.jsx("div",{className:"bg-[#92bdf6] px-2 rounded-lg text-sm cursor-pointer",children:n.jsx("div",{className:"font-semibold capitalize",children:`${ee(g==null?void 0:g.type)} ${g!=null&&g.reason?"("+ee(g==null?void 0:g.type)+")":""}`})})},A))})]})});default:return null}})()})}),n.jsx(Ne,{spinning:S,tip:"Loading",indicator:n.jsx(be,{spin:!0}),size:"large",children:n.jsx(he,{mode:i,value:t,onSelect:W,onPanelChange:Z,fullCellRender:U,headerRender:B})})]})})})]})})};export{it as default};
